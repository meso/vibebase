(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Oe,K,zt,be,At,Bt,Ht,qt,lt,tt,nt,Gt,Ie={},Vt=[],Tn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ke=Array.isArray;function he(t,n){for(var r in n)t[r]=n[r];return t}function ct(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Re(t,n,r){var o,a,i,d={};for(i in n)i=="key"?o=n[i]:i=="ref"?a=n[i]:d[i]=n[i];if(arguments.length>2&&(d.children=arguments.length>3?Oe.call(arguments,2):r),typeof t=="function"&&t.defaultProps!=null)for(i in t.defaultProps)d[i]===void 0&&(d[i]=t.defaultProps[i]);return Fe(t,d,o,a,null)}function Fe(t,n,r,o,a){var i={type:t,props:n,key:r,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:a??++zt,__i:-1,__u:0};return a==null&&K.vnode!=null&&K.vnode(i),i}function qe(t){return t.children}function Ne(t,n){this.props=t,this.context=n}function we(t,n){if(n==null)return t.__?we(t.__,t.__i+1):null;for(var r;n<t.__k.length;n++)if((r=t.__k[n])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?we(t):null}function Wt(t){var n,r;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,n=0;n<t.__k.length;n++)if((r=t.__k[n])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return Wt(t)}}function rt(t){(!t.__d&&(t.__d=!0)&&be.push(t)&&!Be.__r++||At!=K.debounceRendering)&&((At=K.debounceRendering)||Bt)(Be)}function Be(){for(var t,n,r,o,a,i,d,h=1;be.length;)be.length>h&&be.sort(Ht),t=be.shift(),h=be.length,t.__d&&(r=void 0,a=(o=(n=t).__v).__e,i=[],d=[],n.__P&&((r=he({},o)).__v=o.__v+1,K.vnode&&K.vnode(r),dt(n.__P,r,o,n.__n,n.__P.namespaceURI,32&o.__u?[a]:null,i,a??we(o),!!(32&o.__u),d),r.__v=o.__v,r.__.__k[r.__i]=r,Zt(i,r,d),r.__e!=a&&Wt(r)));Be.__r=0}function Jt(t,n,r,o,a,i,d,h,g,p,E){var c,b,m,A,F,k,C=o&&o.__k||Vt,$=n.length;for(g=Sn(r,n,C,g,$),c=0;c<$;c++)(m=r.__k[c])!=null&&(b=m.__i==-1?Ie:C[m.__i]||Ie,m.__i=c,k=dt(t,m,b,a,i,d,h,g,p,E),A=m.__e,m.ref&&b.ref!=m.ref&&(b.ref&&ut(b.ref,null,m),E.push(m.ref,m.__c||A,m)),F==null&&A!=null&&(F=A),4&m.__u||b.__k===m.__k?g=Xt(m,g,t):typeof m.type=="function"&&k!==void 0?g=k:A&&(g=A.nextSibling),m.__u&=-7);return r.__e=F,g}function Sn(t,n,r,o,a){var i,d,h,g,p,E=r.length,c=E,b=0;for(t.__k=new Array(a),i=0;i<a;i++)(d=n[i])!=null&&typeof d!="boolean"&&typeof d!="function"?(g=i+b,(d=t.__k[i]=typeof d=="string"||typeof d=="number"||typeof d=="bigint"||d.constructor==String?Fe(null,d,null,null,null):Ke(d)?Fe(qe,{children:d},null,null,null):d.constructor==null&&d.__b>0?Fe(d.type,d.props,d.key,d.ref?d.ref:null,d.__v):d).__=t,d.__b=t.__b+1,h=null,(p=d.__i=An(d,r,g,c))!=-1&&(c--,(h=r[p])&&(h.__u|=2)),h==null||h.__v==null?(p==-1&&(a>E?b--:a<E&&b++),typeof d.type!="function"&&(d.__u|=4)):p!=g&&(p==g-1?b--:p==g+1?b++:(p>g?b--:b++,d.__u|=4))):t.__k[i]=null;if(c)for(i=0;i<E;i++)(h=r[i])!=null&&!(2&h.__u)&&(h.__e==o&&(o=we(h)),Yt(h,h));return o}function Xt(t,n,r){var o,a;if(typeof t.type=="function"){for(o=t.__k,a=0;o&&a<o.length;a++)o[a]&&(o[a].__=t,n=Xt(o[a],n,r));return n}t.__e!=n&&(n&&t.type&&!r.contains(n)&&(n=we(t)),r.insertBefore(t.__e,n||null),n=t.__e);do n=n&&n.nextSibling;while(n!=null&&n.nodeType==8);return n}function st(t,n){return n=n||[],t==null||typeof t=="boolean"||(Ke(t)?t.some(function(r){st(r,n)}):n.push(t)),n}function An(t,n,r,o){var a,i,d=t.key,h=t.type,g=n[r];if(g===null&&t.key==null||g&&d==g.key&&h==g.type&&!(2&g.__u))return r;if(o>(g!=null&&!(2&g.__u)?1:0))for(a=r-1,i=r+1;a>=0||i<n.length;){if(a>=0){if((g=n[a])&&!(2&g.__u)&&d==g.key&&h==g.type)return a;a--}if(i<n.length){if((g=n[i])&&!(2&g.__u)&&d==g.key&&h==g.type)return i;i++}}return-1}function jt(t,n,r){n[0]=="-"?t.setProperty(n,r??""):t[n]=r==null?"":typeof r!="number"||Tn.test(n)?r:r+"px"}function Ue(t,n,r,o,a){var i,d;e:if(n=="style")if(typeof r=="string")t.style.cssText=r;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(n in o)r&&n in r||jt(t.style,n,"");if(r)for(n in r)o&&r[n]==o[n]||jt(t.style,n,r[n])}else if(n[0]=="o"&&n[1]=="n")i=n!=(n=n.replace(qt,"$1")),d=n.toLowerCase(),n=d in t||n=="onFocusOut"||n=="onFocusIn"?d.slice(2):n.slice(2),t.l||(t.l={}),t.l[n+i]=r,r?o?r.u=o.u:(r.u=lt,t.addEventListener(n,i?nt:tt,i)):t.removeEventListener(n,i?nt:tt,i);else{if(a=="http://www.w3.org/2000/svg")n=n.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(n!="width"&&n!="height"&&n!="href"&&n!="list"&&n!="form"&&n!="tabIndex"&&n!="download"&&n!="rowSpan"&&n!="colSpan"&&n!="role"&&n!="popover"&&n in t)try{t[n]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&n[4]!="-"?t.removeAttribute(n):t.setAttribute(n,n=="popover"&&r==1?"":r))}}function Dt(t){return function(n){if(this.l){var r=this.l[n.type+t];if(n.t==null)n.t=lt++;else if(n.t<r.u)return;return r(K.event?K.event(n):n)}}}function dt(t,n,r,o,a,i,d,h,g,p){var E,c,b,m,A,F,k,C,$,T,_,L,H,ne,G,re,ae,J=n.type;if(n.constructor!=null)return null;128&r.__u&&(g=!!(32&r.__u),i=[h=n.__e=r.__e]),(E=K.__b)&&E(n);e:if(typeof J=="function")try{if(C=n.props,$="prototype"in J&&J.prototype.render,T=(E=J.contextType)&&o[E.__c],_=E?T?T.props.value:E.__:o,r.__c?k=(c=n.__c=r.__c).__=c.__E:($?n.__c=c=new J(C,_):(n.__c=c=new Ne(C,_),c.constructor=J,c.render=Dn),T&&T.sub(c),c.props=C,c.state||(c.state={}),c.context=_,c.__n=o,b=c.__d=!0,c.__h=[],c._sb=[]),$&&c.__s==null&&(c.__s=c.state),$&&J.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=he({},c.__s)),he(c.__s,J.getDerivedStateFromProps(C,c.__s))),m=c.props,A=c.state,c.__v=n,b)$&&J.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),$&&c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if($&&J.getDerivedStateFromProps==null&&C!==m&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(C,_),!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(C,c.__s,_)===!1||n.__v==r.__v){for(n.__v!=r.__v&&(c.props=C,c.state=c.__s,c.__d=!1),n.__e=r.__e,n.__k=r.__k,n.__k.some(function(j){j&&(j.__=n)}),L=0;L<c._sb.length;L++)c.__h.push(c._sb[L]);c._sb=[],c.__h.length&&d.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(C,c.__s,_),$&&c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(m,A,F)})}if(c.context=_,c.props=C,c.__P=t,c.__e=!1,H=K.__r,ne=0,$){for(c.state=c.__s,c.__d=!1,H&&H(n),E=c.render(c.props,c.state,c.context),G=0;G<c._sb.length;G++)c.__h.push(c._sb[G]);c._sb=[]}else do c.__d=!1,H&&H(n),E=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++ne<25);c.state=c.__s,c.getChildContext!=null&&(o=he(he({},o),c.getChildContext())),$&&!b&&c.getSnapshotBeforeUpdate!=null&&(F=c.getSnapshotBeforeUpdate(m,A)),re=E,E!=null&&E.type===qe&&E.key==null&&(re=Qt(E.props.children)),h=Jt(t,Ke(re)?re:[re],n,r,o,a,i,d,h,g,p),c.base=n.__e,n.__u&=-161,c.__h.length&&d.push(c),k&&(c.__E=c.__=null)}catch(j){if(n.__v=null,g||i!=null)if(j.then){for(n.__u|=g?160:128;h&&h.nodeType==8&&h.nextSibling;)h=h.nextSibling;i[i.indexOf(h)]=null,n.__e=h}else for(ae=i.length;ae--;)ct(i[ae]);else n.__e=r.__e,n.__k=r.__k;K.__e(j,n,r)}else i==null&&n.__v==r.__v?(n.__k=r.__k,n.__e=r.__e):h=n.__e=jn(r.__e,n,r,o,a,i,d,g,p);return(E=K.diffed)&&E(n),128&n.__u?void 0:h}function Zt(t,n,r){for(var o=0;o<r.length;o++)ut(r[o],r[++o],r[++o]);K.__c&&K.__c(n,t),t.some(function(a){try{t=a.__h,a.__h=[],t.some(function(i){i.call(a)})}catch(i){K.__e(i,a.__v)}})}function Qt(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:Ke(t)?t.map(Qt):he({},t)}function jn(t,n,r,o,a,i,d,h,g){var p,E,c,b,m,A,F,k=r.props,C=n.props,$=n.type;if($=="svg"?a="http://www.w3.org/2000/svg":$=="math"?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),i!=null){for(p=0;p<i.length;p++)if((m=i[p])&&"setAttribute"in m==!!$&&($?m.localName==$:m.nodeType==3)){t=m,i[p]=null;break}}if(t==null){if($==null)return document.createTextNode(C);t=document.createElementNS(a,$,C.is&&C),h&&(K.__m&&K.__m(n,i),h=!1),i=null}if($==null)k===C||h&&t.data==C||(t.data=C);else{if(i=i&&Oe.call(t.childNodes),k=r.props||Ie,!h&&i!=null)for(k={},p=0;p<t.attributes.length;p++)k[(m=t.attributes[p]).name]=m.value;for(p in k)if(m=k[p],p!="children"){if(p=="dangerouslySetInnerHTML")c=m;else if(!(p in C)){if(p=="value"&&"defaultValue"in C||p=="checked"&&"defaultChecked"in C)continue;Ue(t,p,null,m,a)}}for(p in C)m=C[p],p=="children"?b=m:p=="dangerouslySetInnerHTML"?E=m:p=="value"?A=m:p=="checked"?F=m:h&&typeof m!="function"||k[p]===m||Ue(t,p,m,k[p],a);if(E)h||c&&(E.__html==c.__html||E.__html==t.innerHTML)||(t.innerHTML=E.__html),n.__k=[];else if(c&&(t.innerHTML=""),Jt(n.type=="template"?t.content:t,Ke(b)?b:[b],n,r,o,$=="foreignObject"?"http://www.w3.org/1999/xhtml":a,i,d,i?i[0]:r.__k&&we(r,0),h,g),i!=null)for(p=i.length;p--;)ct(i[p]);h||(p="value",$=="progress"&&A==null?t.removeAttribute("value"):A!=null&&(A!==t[p]||$=="progress"&&!A||$=="option"&&A!=k[p])&&Ue(t,p,A,k[p],a),p="checked",F!=null&&F!=t[p]&&Ue(t,p,F,k[p],a))}return t}function ut(t,n,r){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&n==null||(t.__u=t(n))}else t.current=n}catch(a){K.__e(a,r)}}function Yt(t,n,r){var o,a;if(K.unmount&&K.unmount(t),(o=t.ref)&&(o.current&&o.current!=t.__e||ut(o,null,n)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(i){K.__e(i,n)}o.base=o.__P=null}if(o=t.__k)for(a=0;a<o.length;a++)o[a]&&Yt(o[a],n,r||typeof t.type!="function");r||ct(t.__e),t.__c=t.__=t.__e=void 0}function Dn(t,n,r){return this.constructor(t,r)}function Fn(t,n,r){var o,a,i,d;n==document&&(n=document.documentElement),K.__&&K.__(t,n),a=(o=!1)?null:n.__k,i=[],d=[],dt(n,t=n.__k=Re(qe,null,[t]),a||Ie,Ie,n.namespaceURI,a?null:n.firstChild?Oe.call(n.childNodes):null,i,a?a.__e:n.firstChild,o,d),Zt(i,t,d)}function Nn(t,n,r){var o,a,i,d,h=he({},t.props);for(i in t.type&&t.type.defaultProps&&(d=t.type.defaultProps),n)i=="key"?o=n[i]:i=="ref"?a=n[i]:h[i]=n[i]===void 0&&d!=null?d[i]:n[i];return arguments.length>2&&(h.children=arguments.length>3?Oe.call(arguments,2):r),Fe(t.type,h,o||t.key,a||t.ref,null)}function Ln(t){function n(r){var o,a;return this.getChildContext||(o=new Set,(a={})[n.__c]=this,this.getChildContext=function(){return a},this.componentWillUnmount=function(){o=null},this.shouldComponentUpdate=function(i){this.props.value!=i.value&&o.forEach(function(d){d.__e=!0,rt(d)})},this.sub=function(i){o.add(i);var d=i.componentWillUnmount;i.componentWillUnmount=function(){o&&o.delete(i),d&&d.call(i)}}),r.children}return n.__c="__cC"+Gt++,n.__=t,n.Provider=n.__l=(n.Consumer=function(r,o){return r.children(o)}).contextType=n,n}Oe=Vt.slice,K={__e:function(t,n,r,o){for(var a,i,d;n=n.__;)if((a=n.__c)&&!a.__)try{if((i=a.constructor)&&i.getDerivedStateFromError!=null&&(a.setState(i.getDerivedStateFromError(t)),d=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(t,o||{}),d=a.__d),d)return a.__E=a}catch(h){t=h}throw t}},zt=0,Ne.prototype.setState=function(t,n){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=he({},this.state),typeof t=="function"&&(t=t(he({},r),this.props)),t&&he(r,t),t!=null&&this.__v&&(n&&this._sb.push(n),rt(this))},Ne.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),rt(this))},Ne.prototype.render=qe,be=[],Bt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ht=function(t,n){return t.__v.__b-n.__v.__b},Be.__r=0,qt=/(PointerCapture)$|Capture$/i,lt=0,tt=Dt(!1),nt=Dt(!0),Gt=0;var In=0;function e(t,n,r,o,a,i){n||(n={});var d,h,g=n;if("ref"in g)for(h in g={},n)h=="ref"?d=n[h]:g[h]=n[h];var p={type:t,props:g,key:r,ref:d,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--In,__i:-1,__u:0,__source:a,__self:i};if(typeof t=="function"&&(d=t.defaultProps))for(h in d)g[h]===void 0&&(g[h]=d[h]);return K.vnode&&K.vnode(p),p}var ke,B,Xe,Ft,He=0,en=[],W=K,Nt=W.__b,Lt=W.__r,It=W.diffed,Ot=W.__c,Kt=W.unmount,Rt=W.__;function Ge(t,n){W.__h&&W.__h(B,t,He||n),He=0;var r=B.__H||(B.__H={__:[],__h:[]});return t>=r.__.length&&r.__.push({}),r.__[t]}function y(t){return He=1,On(nn,t)}function On(t,n,r){var o=Ge(ke++,2);if(o.t=t,!o.__c&&(o.__=[nn(void 0,n),function(h){var g=o.__N?o.__N[0]:o.__[0],p=o.t(g,h);g!==p&&(o.__N=[p,o.__[1]],o.__c.setState({}))}],o.__c=B,!B.__f)){var a=function(h,g,p){if(!o.__c.__H)return!0;var E=o.__c.__H.__.filter(function(b){return!!b.__c});if(E.every(function(b){return!b.__N}))return!i||i.call(this,h,g,p);var c=o.__c.props!==h;return E.forEach(function(b){if(b.__N){var m=b.__[0];b.__=b.__N,b.__N=void 0,m!==b.__[0]&&(c=!0)}}),i&&i.call(this,h,g,p)||c};B.__f=!0;var i=B.shouldComponentUpdate,d=B.componentWillUpdate;B.componentWillUpdate=function(h,g,p){if(this.__e){var E=i;i=void 0,a(h,g,p),i=E}d&&d.call(this,h,g,p)},B.shouldComponentUpdate=a}return o.__N||o.__}function ue(t,n){var r=Ge(ke++,3);!W.__s&&tn(r.__H,n)&&(r.__=t,r.u=n,B.__H.__h.push(r))}function Pt(t){return He=5,Kn(function(){return{current:t}},[])}function Kn(t,n){var r=Ge(ke++,7);return tn(r.__H,n)&&(r.__=t(),r.__H=n,r.__h=t),r.__}function Rn(t){var n=B.context[t.__c],r=Ge(ke++,9);return r.c=t,n?(r.__==null&&(r.__=!0,n.sub(B)),n.props.value):t.__}function Pn(){for(var t;t=en.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(ze),t.__H.__h.forEach(ot),t.__H.__h=[]}catch(n){t.__H.__h=[],W.__e(n,t.__v)}}W.__b=function(t){B=null,Nt&&Nt(t)},W.__=function(t,n){t&&n.__k&&n.__k.__m&&(t.__m=n.__k.__m),Rt&&Rt(t,n)},W.__r=function(t){Lt&&Lt(t),ke=0;var n=(B=t.__c).__H;n&&(Xe===B?(n.__h=[],B.__h=[],n.__.forEach(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(n.__h.forEach(ze),n.__h.forEach(ot),n.__h=[],ke=0)),Xe=B},W.diffed=function(t){It&&It(t);var n=t.__c;n&&n.__H&&(n.__H.__h.length&&(en.push(n)!==1&&Ft===W.requestAnimationFrame||((Ft=W.requestAnimationFrame)||Mn)(Pn)),n.__H.__.forEach(function(r){r.u&&(r.__H=r.u),r.u=void 0})),Xe=B=null},W.__c=function(t,n){n.some(function(r){try{r.__h.forEach(ze),r.__h=r.__h.filter(function(o){return!o.__||ot(o)})}catch(o){n.some(function(a){a.__h&&(a.__h=[])}),n=[],W.__e(o,r.__v)}}),Ot&&Ot(t,n)},W.unmount=function(t){Kt&&Kt(t);var n,r=t.__c;r&&r.__H&&(r.__H.__.forEach(function(o){try{ze(o)}catch(a){n=a}}),r.__H=void 0,n&&W.__e(n,r.__v))};var Mt=typeof requestAnimationFrame=="function";function Mn(t){var n,r=function(){clearTimeout(o),Mt&&cancelAnimationFrame(n),setTimeout(t)},o=setTimeout(r,35);Mt&&(n=requestAnimationFrame(r))}function ze(t){var n=B,r=t.__c;typeof r=="function"&&(t.__c=void 0,r()),B=n}function ot(t){var n=B;t.__c=t.__(),B=n}function tn(t,n){return!t||t.length!==n.length||n.some(function(r,o){return r!==t[o]})}function nn(t,n){return typeof n=="function"?n(t):n}var Un={};function De(t,n){for(var r in n)t[r]=n[r];return t}function it(t,n,r){var o,a=/(?:\?([^#]*))?(#.*)?$/,i=t.match(a),d={};if(i&&i[1])for(var h=i[1].split("&"),g=0;g<h.length;g++){var p=h[g].split("=");d[decodeURIComponent(p[0])]=decodeURIComponent(p.slice(1).join("="))}t=at(t.replace(a,"")),n=at(n||"");for(var E=Math.max(t.length,n.length),c=0;c<E;c++)if(n[c]&&n[c].charAt(0)===":"){var b=n[c].replace(/(^:|[+*?]+$)/g,""),m=(n[c].match(/[+*?]+$/)||Un)[0]||"",A=~m.indexOf("+"),F=~m.indexOf("*"),k=t[c]||"";if(!k&&!F&&(m.indexOf("?")<0||A)){o=!1;break}if(d[b]=decodeURIComponent(k),A||F){d[b]=t.slice(c).map(decodeURIComponent).join("/");break}}else if(n[c]!==t[c]){o=!1;break}return(r.default===!0||o!==!1)&&d}function zn(t,n){return t.rank<n.rank?1:t.rank>n.rank?-1:t.index-n.index}function Bn(t,n){return t.index=n,t.rank=function(r){return r.props.default?0:at(r.props.path).map(Hn).join("")}(t),t.props}function at(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function Hn(t){return t.charAt(0)==":"?1+"*+?".indexOf(t.charAt(t.length-1))||4:5}var qn={},ye=[],Le=[],ie=null,ht={url:mt()},rn=Ln(ht);function Gn(){var t=Rn(rn);if(t===ht){var n=y()[1];ue(function(){return Le.push(n),function(){return Le.splice(Le.indexOf(n),1)}},[])}return[t,sn]}function mt(){var t;return""+((t=ie&&ie.location?ie.location:ie&&ie.getCurrentLocation?ie.getCurrentLocation():typeof location<"u"?location:qn).pathname||"")+(t.search||"")}function sn(t,n){return n===void 0&&(n=!1),typeof t!="string"&&t.url&&(n=t.replace,t=t.url),function(r){for(var o=ye.length;o--;)if(ye[o].canRoute(r))return!0;return!1}(t)&&function(r,o){o===void 0&&(o="push"),ie&&ie[o]?ie[o](r):typeof history<"u"&&history[o+"State"]&&history[o+"State"](null,null,r)}(t,n?"replace":"push"),on(t)}function on(t){for(var n=!1,r=0;r<ye.length;r++)ye[r].routeTo(t)&&(n=!0);return n}function Vn(t){if(t&&t.getAttribute){var n=t.getAttribute("href"),r=t.getAttribute("target");if(n&&n.match(/^\//g)&&(!r||r.match(/^_?self$/i)))return sn(n)}}function Wn(t){return t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.stopPropagation&&t.stopPropagation(),t.preventDefault(),!1}function an(t){if(!(t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||t.button)){var n=t.target;do if(n.localName==="a"&&n.getAttribute("href")){if(n.hasAttribute("data-native")||n.hasAttribute("native"))return;if(Vn(n))return Wn(t)}while(n=n.parentNode)}}var Ut=!1;function ln(t){t.history&&(ie=t.history),this.state={url:t.url||mt()}}De(ln.prototype=new Ne,{shouldComponentUpdate:function(t){return t.static!==!0||t.url!==this.props.url||t.onChange!==this.props.onChange},canRoute:function(t){var n=st(this.props.children);return this.g(n,t)!==void 0},routeTo:function(t){this.setState({url:t});var n=this.canRoute(t);return this.p||this.forceUpdate(),n},componentWillMount:function(){this.p=!0},componentDidMount:function(){var t=this;Ut||(Ut=!0,ie||addEventListener("popstate",function(){on(mt())}),addEventListener("click",an)),ye.push(this),ie&&(this.u=ie.listen(function(n){var r=n.location||n;t.routeTo(""+(r.pathname||"")+(r.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),ye.splice(ye.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(t,n){t=t.filter(Bn).sort(zn);for(var r=0;r<t.length;r++){var o=t[r],a=it(n,o.props.path,o.props);if(a)return[o,a]}},render:function(t,n){var r,o,a=t.onChange,i=n.url,d=this.c,h=this.g(st(t.children),i);if(h&&(o=Nn(h[0],De(De({url:i,matches:r=h[1]},r),{key:void 0,ref:void 0}))),i!==(d&&d.url)){De(ht,d=this.c={url:i,previous:d&&d.url,current:o,path:o?o.props.path:null,matches:r}),d.router=this,d.active=o?[o]:[];for(var g=Le.length;g--;)Le[g]({});typeof a=="function"&&a(d)}return Re(rn.Provider,{value:d},o)}});var Jn=function(t){return Re("a",De({onClick:an},t))},Ae=function(t){return Re(t.component,t)},Xn=["className","activeClass","activeClassName","path"];function Zn(t){var n=t.className,r=t.activeClass,o=t.activeClassName,a=t.path,i=function(E,c){if(E==null)return{};var b,m,A={},F=Object.keys(E);for(m=0;m<F.length;m++)c.indexOf(b=F[m])>=0||(A[b]=E[b]);return A}(t,Xn),d=Gn()[0],h=a&&d.path&&it(d.path,a,{})||it(d.url,i.href,{}),g=i.class||n||"",p=h&&(r||o)||"";return i.class=g+(g&&p&&" ")+p,Re(Jn,i)}function cn(t){var n,r,o="";if(typeof t=="string"||typeof t=="number")o+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(n=0;n<a;n++)t[n]&&(r=cn(t[n]))&&(o&&(o+=" "),o+=r)}else for(r in t)t[r]&&(o&&(o+=" "),o+=r);return o}function Qn(){for(var t,n,r=0,o="",a=arguments.length;r<a;r++)(t=arguments[r])&&(n=cn(t))&&(o&&(o+=" "),o+=n);return o}function Yn({children:t}){return e("div",{class:"min-h-screen bg-gray-50",children:[e("nav",{class:"bg-white shadow-sm border-b",children:e("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e("div",{class:"flex justify-between h-16",children:[e("div",{class:"flex",children:[e("div",{class:"flex-shrink-0 flex items-center",children:e("h1",{class:"text-xl font-bold text-gray-900",children:"Vibebase"})}),e("div",{class:"hidden sm:ml-6 sm:flex sm:space-x-8",children:[e(je,{href:"/",children:"Dashboard"}),e(je,{href:"/database",children:"Database"}),e(je,{href:"/storage",children:"Storage"}),e(je,{href:"/auth",children:"Auth"}),e(je,{href:"/settings",children:"Settings"})]})]}),e("div",{class:"flex items-center space-x-4",children:e("a",{href:"/api/docs/swagger",target:"_blank",rel:"noopener noreferrer",class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"📚 API Docs"})})]})})}),e("main",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t})]})}function je({href:t,children:n}){return e(Zn,{href:t,class:Qn("inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium","hover:border-gray-300 hover:text-gray-700","border-transparent text-gray-500"),activeClassName:"border-indigo-500 text-gray-900",children:n})}const N=window.location.origin,I={async health(){return(await fetch(`${N}/api/health`)).json()},async getItems(){const t=await fetch(`${N}/api/items`);if(!t.ok)throw new Error("Failed to fetch items");return t.json()},async createItem(t){const n=await fetch(`${N}/api/items`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error("Failed to create item");return n.json()},async updateItem(t,n){const r=await fetch(`${N}/api/items/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok)throw new Error("Failed to update item");return r.json()},async deleteItem(t){const n=await fetch(`${N}/api/items/${t}`,{method:"DELETE"});if(!n.ok)throw new Error("Failed to delete item");return n.json()},async getTables(){const t=await fetch(`${N}/api/tables`);if(!t.ok)throw new Error("Failed to fetch tables");return t.json()},async getTableSchema(t){const n=await fetch(`${N}/api/tables/${t}/schema`);if(!n.ok)throw new Error("Failed to fetch table schema");return n.json()},async getTableData(t,n=100,r=0){const o=await fetch(`${N}/api/tables/${t}/data?limit=${n}&offset=${r}`);if(!o.ok)throw new Error("Failed to fetch table data");return o.json()},async createTable(t,n){const r=await fetch(`${N}/api/tables`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,columns:n})});if(!r.ok){const o=await r.json();throw new Error(o.error||"Failed to create table")}return r.json()},async dropTable(t){const n=await fetch(`${N}/api/tables/${t}`,{method:"DELETE"});if(!n.ok){const r=await n.json();throw new Error(r.error||"Failed to drop table")}return n.json()},async executeSQL(t,n=[]){const r=await fetch(`${N}/api/tables/query`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sql:t,params:n})});if(!r.ok){const o=await r.json();throw new Error(o.error||"Failed to execute SQL")}return r.json()},async addColumn(t,n){const r=await fetch(`${N}/api/tables/${t}/columns`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok){const o=await r.json();throw new Error(o.error||"Failed to add column")}return r.json()},async renameColumn(t,n,r){const o=await fetch(`${N}/api/tables/${t}/columns/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldName:n,newName:r})});if(!o.ok){const a=await o.json();throw new Error(a.error||"Failed to rename column")}return o.json()},async dropColumn(t,n){const r=await fetch(`${N}/api/tables/${t}/columns/${n}`,{method:"DELETE"});if(!r.ok){const o=await r.json();throw new Error(o.error||"Failed to drop column")}return r.json()},async modifyColumn(t,n,r){const o=await fetch(`${N}/api/tables/${t}/columns/${n}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!o.ok){const a=await o.json();throw new Error(a.error||"Failed to modify column")}return o.json()},async validateColumnChanges(t,n,r){const o=await fetch(`${N}/api/tables/${t}/columns/${n}/validate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!o.ok){const a=await o.json();throw new Error(a.error||"Failed to validate column changes")}return o.json()},async updateRecord(t,n,r){const o=await fetch(`${N}/api/tables/${t}/data/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!o.ok){const a=await o.json();throw new Error(a.error||"Failed to update record")}return o.json()},async getSnapshots(t=20,n=0){const r=await fetch(`${N}/api/snapshots?limit=${t}&offset=${n}`);if(!r.ok)throw new Error("Failed to fetch snapshots");return r.json()},async getSnapshot(t){const n=await fetch(`${N}/api/snapshots/${t}`);if(!n.ok)throw new Error("Failed to fetch snapshot");return n.json()},async createSnapshot(t){const n=await fetch(`${N}/api/snapshots`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.error||"Failed to create snapshot")}return n.json()},async restoreSnapshot(t){const n=await fetch(`${N}/api/snapshots/${t}/restore`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!n.ok){const r=await n.json().catch(()=>({error:"Failed to restore snapshot"}));throw new Error(r.error||"Failed to restore snapshot")}return n.json()},async deleteSnapshot(t){const n=await fetch(`${N}/api/snapshots/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!n.ok){const r=await n.json().catch(()=>({error:"Failed to delete snapshot"}));throw new Error(r.error||"Failed to delete snapshot")}return n.json()},async compareSnapshots(t,n){const r=await fetch(`${N}/api/snapshots/compare/${t}/${n}`);if(!r.ok)throw new Error("Failed to compare snapshots");return r.json()},async getTableIndexes(t){const n=await fetch(`${N}/api/tables/${t}/indexes`);if(!n.ok){const r=await n.json();throw new Error(r.error||"Failed to fetch table indexes")}return n.json()},async getAllIndexes(){const t=await fetch(`${N}/api/tables/indexes`);if(!t.ok){const n=await t.json();throw new Error(n.error||"Failed to fetch all indexes")}return t.json()},async createIndex(t,n){const r=await fetch(`${N}/api/tables/${t}/indexes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok){const o=await r.json();throw new Error(o.error||"Failed to create index")}return r.json()},async dropIndex(t,n){const r=await fetch(`${N}/api/tables/${t}/indexes/${n}`,{method:"DELETE"});if(!r.ok){const o=await r.json();throw new Error(o.error||"Failed to drop index")}return r.json()},async getOAuthProviders(){const t=await fetch(`${N}/api/admin/oauth/providers`);if(!t.ok){let n="Failed to fetch OAuth providers";try{const r=await t.json();r.error==="Authentication required"?n="Admin authentication required. Please log in to access OAuth settings.":n=r.error||n}catch{}throw new Error(n)}return t.json()},async getOAuthProvider(t){const n=await fetch(`${N}/api/admin/oauth/providers/${t}`);if(!n.ok){const r=await n.json();throw new Error(r.error||"Failed to fetch OAuth provider")}return n.json()},async updateOAuthProvider(t,n){const r=await fetch(`${N}/api/admin/oauth/providers/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok){const o=await r.json();throw new Error(o.error||"Failed to update OAuth provider")}return r.json()},async toggleOAuthProvider(t,n){const r=await fetch(`${N}/api/admin/oauth/providers/${t}/toggle`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_enabled:n})});if(!r.ok){const o=await r.json();throw new Error(o.error||"Failed to toggle OAuth provider")}return r.json()},async deleteOAuthProvider(t){const n=await fetch(`${N}/api/admin/oauth/providers/${t}`,{method:"DELETE"});if(!n.ok){const r=await n.json();throw new Error(r.error||"Failed to delete OAuth provider")}return n.json()},async getSupportedProviders(){const t=await fetch(`${N}/api/admin/oauth/supported-providers`);if(!t.ok){let n="Failed to fetch supported providers";try{const r=await t.json();r.error==="Authentication required"?n="Admin authentication required. Please log in to access OAuth settings.":n=r.error||n}catch{}throw new Error(n)}return t.json()}};function er(){const[t,n]=y({userTables:0,systemTables:0,dbStatus:"checking..."});ue(()=>{r()},[]);const r=async()=>{try{const o=await I.health(),a=await I.getTables(),i=a.tables.filter(h=>h.type==="user").length,d=a.tables.filter(h=>h.type==="system").length;n({userTables:i,systemTables:d,dbStatus:o.database==="connected"?"connected":"disconnected"})}catch(o){console.error("Failed to load stats:",o),n(a=>({...a,dbStatus:"error"}))}};return e("div",{children:[e("h2",{class:"text-2xl font-bold text-gray-900 mb-6",children:"Dashboard"}),e("div",{class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[e(Ze,{title:"Database Tables",description:"User-defined tables in D1",href:"/database",stats:`${t.userTables} tables`,status:t.dbStatus}),e(Ze,{title:"System Tables",description:"Protected system tables",href:"/database",stats:`${t.systemTables} tables`}),e(Ze,{title:"Storage",description:"R2 object storage for files",href:"/storage",stats:"Ready",status:"connected"})]}),e("div",{class:"mt-8",children:[e("h3",{class:"text-lg font-medium text-gray-900 mb-4",children:"Quick Actions"}),e("div",{class:"bg-white overflow-hidden shadow rounded-lg",children:e("div",{class:"px-4 py-5 sm:p-6",children:e("div",{class:"space-y-3",children:[e("a",{href:"/database",class:"text-indigo-600 hover:text-indigo-500 block",children:"Create new table →"}),e("a",{href:"/database",class:"text-indigo-600 hover:text-indigo-500 block",children:"Browse database →"}),e("a",{href:"/storage",class:"text-indigo-600 hover:text-indigo-500 block",children:"Upload files →"}),e("a",{href:"/api/health",target:"_blank",class:"text-indigo-600 hover:text-indigo-500 block",children:"View API health →"})]})})})]}),e("div",{class:"mt-8",children:[e("h3",{class:"text-lg font-medium text-gray-900 mb-4",children:"API Endpoints"}),e("div",{class:"bg-white overflow-hidden shadow rounded-lg",children:e("div",{class:"px-4 py-5 sm:p-6",children:e("div",{class:"space-y-2 text-sm",children:[e("div",{class:"flex justify-between",children:[e("code",{class:"text-gray-600",children:"GET /api/health"}),e("span",{class:"text-green-600",children:"Health check"})]}),e("div",{class:"flex justify-between",children:[e("code",{class:"text-gray-600",children:"GET /api/tables"}),e("span",{class:"text-green-600",children:"List tables"})]}),e("div",{class:"flex justify-between",children:[e("code",{class:"text-gray-600",children:"POST /api/tables"}),e("span",{class:"text-green-600",children:"Create table"})]}),e("div",{class:"flex justify-between",children:[e("code",{class:"text-gray-600",children:"GET /api/tables/:name/data"}),e("span",{class:"text-green-600",children:"Get table data"})]}),e("div",{class:"flex justify-between",children:[e("code",{class:"text-gray-600",children:"GET /api/storage"}),e("span",{class:"text-green-600",children:"List files"})]}),e("div",{class:"flex justify-between",children:[e("code",{class:"text-gray-600",children:"POST /api/storage/upload"}),e("span",{class:"text-green-600",children:"Upload file"})]})]})})})]})]})}function Ze({title:t,description:n,href:r,stats:o,status:a}){return e("div",{class:"bg-white overflow-hidden shadow rounded-lg",children:e("div",{class:"px-4 py-5 sm:p-6",children:[e("div",{class:"flex items-center justify-between",children:[e("dt",{class:"text-sm font-medium text-gray-500 truncate",children:t}),a&&e("span",{class:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a==="connected"?"bg-green-100 text-green-800":a==="error"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:a})]}),e("dd",{class:"mt-1 text-3xl font-semibold text-gray-900",children:o}),e("p",{class:"mt-2 text-sm text-gray-600",children:n}),e("a",{href:r,class:"mt-3 text-indigo-600 hover:text-indigo-500 text-sm font-medium inline-block",children:"Manage →"})]})})}function Qe({size:t="sm"}){return e("svg",{class:`animate-spin ${t==="sm"?"h-4 w-4":"h-6 w-6"} text-white`,fill:"none",viewBox:"0 0 24 24",children:[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}function tr({onClose:t,onRestore:n}){const[r,o]=y([]),[a,i]=y(null),[d,h]=y(!0),[g,p]=y(null),[E,c]=y(!1),[b,m]=y({name:"",description:""}),[A,F]=y(null),[k,C]=y(null),[$,T]=y(null),[_,L]=y(!1),[H,ne]=y(!1),[G,re]=y(!1);ue(()=>{ae()},[]),ue(()=>{const v=O=>{if($){const se=O.target;!se.closest("[data-menu-container]")&&!se.closest("[data-menu-button]")&&T(null)}};return document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[$]);const ae=async()=>{try{h(!0),p(null);const v=await I.getSnapshots();o(v.snapshots)}catch(v){p(v instanceof Error?v.message:"Failed to load data")}finally{h(!1)}},J=async v=>{v.preventDefault();try{p(null),L(!0),await I.createSnapshot(b),c(!1),m({name:"",description:""}),await ae()}catch(O){p(O instanceof Error?O.message:"Failed to create snapshot")}finally{L(!1)}},j=async()=>{if(A)try{p(null),ne(!0),await I.restoreSnapshot(A),F(null),n&&n(),t()}catch(v){p(v instanceof Error?v.message:"Failed to restore"),F(null)}finally{ne(!1)}},le=async()=>{if(k)try{p(null),re(!0),await I.deleteSnapshot(k),C(null),T(null),await ae()}catch(v){p(v instanceof Error?v.message:"Failed to delete snapshot"),C(null)}finally{re(!1)}},X=v=>new Date(v).toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1,timeZoneName:"short"}),pe=v=>{const O=new Date(v),Q=new Date().getTime()-O.getTime(),oe=Math.floor(Q/(1e3*60*60*24)),Z=Math.floor(Q%(1e3*60*60*24)/(1e3*60*60));return oe>0?`${oe} day${oe>1?"s":""} ago`:Z>0?`${Z} hour${Z>1?"s":""} ago`:"Just now"};return e("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e("div",{class:"bg-white rounded-lg w-full max-w-6xl mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[e("div",{class:"px-6 py-4 border-b flex items-center justify-between",children:[e("h2",{class:"text-xl font-semibold text-gray-900",children:"Schema Snapshots"}),e("button",{onClick:t,class:"text-gray-400 hover:text-gray-600",children:e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})})})]}),g&&e("div",{class:"mx-6 mt-4 bg-red-50 border border-red-200 rounded-md p-4",children:e("div",{class:"text-sm text-red-700",children:g})}),e("div",{class:"mx-6 mt-4 bg-blue-50 border border-blue-200 rounded-md p-4",children:e("div",{class:"flex",children:[e("div",{class:"flex-shrink-0",children:e("svg",{class:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})})}),e("div",{class:"ml-3",children:[e("h3",{class:"text-sm font-medium text-blue-800",children:"💡 CloudflareのTime Travel機能について"}),e("p",{class:"mt-1 text-sm text-blue-700",children:["Cloudflareの管理画面から、D1データベースを過去の任意の時点（無料プランで7日間、有料プランで30日間）に復元できるTime Travel機能が利用可能です。 詳しくは",e("a",{href:"https://developers.cloudflare.com/d1/reference/time-travel/",target:"_blank",rel:"noopener noreferrer",class:"font-medium underline hover:no-underline",children:"Cloudflare D1 Time Travelドキュメント"}),"をご確認ください。"]})]})]})}),e("div",{class:"flex-1 overflow-auto p-6",children:d?e("div",{class:"text-center py-8",children:e("div",{class:"text-gray-500",children:"Loading..."})}):e("div",{children:[!E&&e("div",{class:"mb-6",children:e("button",{onClick:()=>c(!0),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[e("svg",{class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})}),"Create Snapshot"]})}),E&&e("div",{class:"mb-6 bg-gray-50 rounded-lg p-4",children:[e("h3",{class:"text-sm font-medium text-gray-900 mb-3",children:"Create New Snapshot"}),e("form",{onSubmit:J,children:e("div",{class:"space-y-3",children:[e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-700",children:"Name"}),e("input",{type:"text",value:b.name,onInput:v=>m({...b,name:v.target.value}),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., Before major refactoring"})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-700",children:"Description"}),e("textarea",{value:b.description,onInput:v=>m({...b,description:v.target.value}),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",rows:2,placeholder:"Optional description of current state"})]}),e("div",{class:"flex space-x-3",children:[e("button",{type:"submit",disabled:_,class:`inline-flex justify-center items-center space-x-2 py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${_?"bg-indigo-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:[_&&e(Qe,{size:"sm"}),e("span",{children:_?"Creating...":"Create"})]}),e("button",{type:"button",onClick:()=>{c(!1),m({name:"",description:""})},class:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})})]}),e("div",{class:"space-y-3",children:r.length===0?e("div",{class:"text-center py-8 text-gray-500",children:"No snapshots yet. Create your first snapshot to start tracking schema changes."}):r.map(v=>e("div",{class:`border rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer ${(a==null?void 0:a.id)===v.id?"border-indigo-500 bg-indigo-50":"border-gray-200"}`,onClick:()=>i(v),children:e("div",{class:"flex items-start justify-between",children:[e("div",{class:"flex-1",children:[e("div",{class:"flex items-center space-x-3",children:[e("h4",{class:"text-sm font-medium text-gray-900",children:v.name||`Snapshot v${v.version}`}),e("span",{class:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v.snapshotType==="manual"?"bg-blue-100 text-blue-800":v.snapshotType==="auto"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:v.snapshotType})]}),v.description&&e("p",{class:"mt-1 text-sm text-gray-600",children:v.description}),e("div",{class:"mt-2 flex items-center space-x-4 text-xs text-gray-500",children:[e("span",{children:["Version ",v.version]}),e("span",{children:X(v.createdAt)}),e("span",{children:pe(v.createdAt)})]})]}),e("div",{class:"ml-4 flex items-center space-x-2",children:[e("button",{onClick:O=>{O.stopPropagation(),F(v.id)},class:"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Restore"}),e("div",{class:"relative",children:[e("button",{onClick:O=>{O.stopPropagation(),T($===v.id?null:v.id)},"data-menu-button":"true",class:"inline-flex items-center p-1.5 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 rounded-md",children:e("svg",{class:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),$===v.id&&e("div",{class:"absolute right-0 top-full mt-1 w-32 bg-white rounded-md shadow-lg border border-gray-200 z-10","data-menu-container":"true",children:e("div",{class:"py-1",children:e("button",{onClick:O=>{O.preventDefault(),O.stopPropagation(),T(null),C(v.id)},class:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 focus:outline-none",children:e("div",{class:"flex items-center space-x-2",children:[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),e("span",{children:"Delete"})]})})})})]})]})]})},v.id))})]})}),A&&e("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e("div",{class:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e("div",{class:"flex items-center mb-4",children:[e("div",{class:"flex-shrink-0",children:e("svg",{class:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e("div",{class:"ml-3",children:e("h3",{class:"text-lg font-medium text-gray-900",children:"Confirm Restore"})})]}),e("div",{class:"mb-6",children:[e("p",{class:"text-sm text-gray-700",children:"This will restore your database schema to the selected snapshot. All current tables and data will be replaced."}),e("p",{class:"text-sm text-red-600 mt-2 font-medium",children:"This action cannot be undone. Make sure you have a backup of your current data."})]}),e("div",{class:"flex space-x-3",children:[e("button",{onClick:j,disabled:H,class:`inline-flex justify-center items-center space-x-2 py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 ${H?"bg-red-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700"}`,children:[H&&e(Qe,{size:"sm"}),e("span",{children:H?"Restoring...":"Restore"})]}),e("button",{onClick:()=>F(null),disabled:H,class:`inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${H?"text-gray-400 bg-gray-100 cursor-not-allowed":"text-gray-700 bg-white hover:bg-gray-50"}`,children:"Cancel"})]})]})}),k&&e("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e("div",{class:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e("div",{class:"flex items-center mb-4",children:[e("div",{class:"flex-shrink-0",children:e("svg",{class:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e("div",{class:"ml-3",children:e("h3",{class:"text-lg font-medium text-gray-900",children:"Delete Snapshot"})})]}),e("div",{class:"mb-6",children:e("p",{class:"text-sm text-gray-700",children:"Are you sure you want to delete this snapshot? This action cannot be undone."})}),e("div",{class:"flex space-x-3",children:[e("button",{onClick:le,disabled:G,class:`inline-flex justify-center items-center space-x-2 py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 ${G?"bg-red-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700"}`,children:[G&&e(Qe,{size:"sm"}),e("span",{children:G?"Deleting...":"Delete"})]}),e("button",{onClick:()=>C(null),disabled:G,class:`inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${G?"text-gray-400 bg-gray-100 cursor-not-allowed":"text-gray-700 bg-white hover:bg-gray-50"}`,children:"Cancel"})]})]})})]})})}const nr=t=>t?t.length>8?`${t.substring(0,4)}...`:t:"-",rr=["admins","sessions","schema_snapshots","schema_snapshot_counter","d1_migrations"],Ye=t=>t.filter(n=>!rr.includes(n.name)),et=(t,n)=>{const r=n.filter(o=>o.trim()!=="").join("_");return`idx_${t}_${r}`.toLowerCase()},sr=async t=>{try{return await navigator.clipboard.writeText(t),!0}catch{try{const r=document.createElement("textarea");r.value=t,document.body.appendChild(r),r.focus(),r.select();const o=document.execCommand("copy");return document.body.removeChild(r),o}catch(r){return console.error("Failed to copy to clipboard:",r),!1}}};function or(){var yt,vt,_t,wt,kt;const[t,n]=y([]),[r,o]=y(null),[a,i]=y([]),[d,h]=y([]),[g,p]=y([]),[E,c]=y(!1),[b,m]=y(null),[A,F]=y(!1),[k,C]=y(!1),[$,T]=y({}),[_,L]=y({name:"",columns:[{name:"",type:"TEXT",notNull:!1,foreignKey:{enabled:!1,table:"",column:""}}],indexes:[]}),[H,ne]=y(null),[G,re]=y(null),[ae,J]=y(!1),[j,le]=y({name:"",type:"TEXT",notNull:!1,foreignKey:{enabled:!1,table:"",column:""}}),[X,pe]=y(null),[v,O]=y(null),[se,Q]=y(null),[oe,Z]=y(null),[D,me]=y(null),[M,ce]=y(null),[Ve,Ce]=y({}),[Y,Ee]=y({}),We=Pt(null),$e=Pt(!1),[Je,Pe]=y(!1),[x,w]=y([]),[V,ee]=y(!1),[q,ge]=y({name:"",columns:[""],unique:!1});ue(()=>{if(r&&q.columns.some(s=>s.trim()!=="")){const s=et(r,q.columns);ge(l=>({...l,name:s}))}},[r,q.columns]);const ft=s=>s?new Date(s).toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1,timeZoneName:"short"}):"-";ue(()=>{Me()},[]),ue(()=>{r&&(ve(),fe(),F(!1),C(!1),J(!1))},[r]),ue(()=>{const s=()=>{ne(null)};return document.addEventListener("click",s),()=>document.removeEventListener("click",s)},[]);const Me=async()=>{try{c(!0);const s=await I.getTables();n(s.tables),m(null)}catch(s){m(s instanceof Error?s.message:"Failed to load tables")}finally{c(!1)}},fe=async()=>{if(r)try{const s=await I.getTableSchema(r);h(s.columns),p(s.foreignKeys||[]);const l=await I.getTableIndexes(r);w(l.indexes);const f={};s.columns.forEach(u=>{["id","created_at","updated_at"].includes(u.name)||(f[u.name]="")}),T(f)}catch(s){console.error("Failed to load table schema:",s)}},ve=async()=>{if(r)try{c(!0);const s=await I.getTableData(r);i(s.data),m(null)}catch(s){m(s instanceof Error?s.message:"Failed to load table data")}finally{c(!1)}},dn=async s=>{if(s.preventDefault(),!!r)try{const l=Object.fromEntries(Object.entries($).map(([u,S])=>[u,S===""?null:S]));console.log("Sending record data:",l);const f=await fetch(`${window.location.origin}/api/tables/${r}/data`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!f.ok){const u=await f.json();throw new Error(u.error||`HTTP ${f.status}: Failed to create record`)}await ve(),F(!1),m(null)}catch(l){if(console.error("Create record error:",l),l instanceof Error){let f=l.message;if(l.message.includes("FOREIGN KEY constraint failed"))f="Foreign key constraint failed: The referenced record does not exist";else if(l.message.includes("NOT NULL constraint failed")){const u=l.message.match(/NOT NULL constraint failed: (\w+)\.(\w+)/);u?f=`Required field "${u[2]}" cannot be empty`:f="A required field cannot be empty"}else if(l.message.includes("UNIQUE constraint failed")){const u=l.message.match(/UNIQUE constraint failed: (\w+)\.(\w+)/);u?f=`Value for "${u[2]}" must be unique`:f="This value must be unique"}m(f)}else m("Failed to create record")}},un=async s=>{r&&Z({title:"Delete Record",message:"Are you sure you want to delete this record? This action cannot be undone.",variant:"danger",onConfirm:async()=>{Z(null);try{await fetch(`${window.location.origin}/api/tables/${r}/data/${s}`,{method:"DELETE"}),await ve()}catch(l){m(l instanceof Error?l.message:"Failed to delete record")}}})},hn=async s=>{s.preventDefault();try{const l=_.columns.filter(f=>f.name).map(f=>{var u,S,P;return{name:f.name,type:f.type,constraints:f.notNull?"NOT NULL":void 0,...(u=f.foreignKey)!=null&&u.enabled&&((S=f.foreignKey)!=null&&S.table)&&((P=f.foreignKey)!=null&&P.column)?{foreignKey:{table:f.foreignKey.table,column:f.foreignKey.column}}:{}}});console.log("Creating table:",_.name,"with columns:",l),await I.createTable(_.name,l);for(const f of _.indexes)if(f.name&&f.columns.length>0&&f.columns.some(u=>u.trim()!==""))try{await I.createIndex(_.name,{name:f.name,columns:f.columns.filter(u=>u.trim()!==""),unique:f.unique})}catch(u){console.warn("Failed to create index:",u)}await Me(),C(!1),L({name:"",columns:[{name:"",type:"TEXT",notNull:!1,foreignKey:{enabled:!1,table:"",column:""}}],indexes:[]}),m(null)}catch(l){m(l instanceof Error?l.message:"Failed to create table")}},mn=async s=>{Z({title:"Drop Table",message:`Are you sure you want to drop the table "${s}"? This action cannot be undone.`,variant:"danger",onConfirm:async()=>{Z(null);try{await I.dropTable(s),await Me(),r===s&&(o(null),i([]))}catch(l){m(l instanceof Error?l.message:"Failed to drop table")}}})},fn=async(s,l,f)=>{if(await sr(s)){const S=`${l}-${f}`;re(S),setTimeout(()=>re(null),2e3)}},pn=async(s,l,f,u)=>{s.metaKey||s.ctrlKey?await gn(l,u):await fn(l,f,u)},gn=async(s,l)=>{const f=await xn(s,l);f&&(o(f),setTimeout(()=>{const u=document.querySelector(`[data-record-id="${s}"]`);u&&(u.scrollIntoView({behavior:"smooth",block:"center"}),u.classList.add("bg-yellow-100"),setTimeout(()=>u.classList.remove("bg-yellow-100"),2e3))},500))},xn=async(s,l)=>{if(l.endsWith("_id")){const f=l.replace("_id","")+"s",u=t.find(S=>S.name===f);if(u)return u.name}for(const f of t)try{if((await I.getTableData(f.name,1,0)).data.some(P=>P.id===s))return f.name}catch{}return null},bn=async s=>{var l,f,u;if(s.preventDefault(),!!r)try{const S={name:j.name,type:j.type,constraints:j.notNull?"NOT NULL":void 0,...(l=j.foreignKey)!=null&&l.enabled&&((f=j.foreignKey)!=null&&f.table)&&((u=j.foreignKey)!=null&&u.column)?{foreignKey:{table:j.foreignKey.table,column:j.foreignKey.column}}:{}};await I.addColumn(r,S),await fe(),le({name:"",type:"TEXT",notNull:!1,foreignKey:{enabled:!1,table:"",column:""}}),m(null)}catch(S){m(S instanceof Error?S.message:"Failed to add column")}},pt=async(s,l)=>{if(!(!r||!l||s===l))try{await I.renameColumn(r,s,l),await fe(),pe(null),m(null)}catch(f){m(f instanceof Error?f.message:"Failed to rename column")}},yn=async s=>{r&&Z({title:"Drop Column",message:`Are you sure you want to drop the column "${s}"? This action cannot be undone.`,variant:"danger",onConfirm:async()=>{Z(null);try{await I.dropColumn(r,s),await fe(),m(null)}catch(l){m(l instanceof Error?l.message:"Failed to drop column")}}})},vn=async(s,l)=>{if(r)try{const f=await I.validateColumnChanges(r,s,l);if(!f.valid){Q({errors:f.errors,conflictingRows:f.conflictingRows,onConfirm:async()=>{Q(null);try{await I.modifyColumn(r,s,l),await fe(),O(null),m(null)}catch(u){m(u instanceof Error?u.message:"Failed to modify column")}}});return}await I.modifyColumn(r,s,l),await fe(),O(null),m(null)}catch(f){m(f instanceof Error?f.message:"Failed to modify column")}},te=s=>g.find(l=>l.from===s)||null,gt=async(s,l)=>{if(!s.trim())return null;const f=`${l.table}-${s}`;Ee(u=>({...u,[f]:{isValid:!1,isChecking:!0}}));try{const S=(await I.getTableData(l.table)).data.some(P=>P.id===s);return Ee(P=>({...P,[f]:{isValid:S,isChecking:!1,displayName:S?`Valid ID in ${l.table}`:`ID not found in ${l.table}`}})),S}catch{return Ee(S=>({...S,[f]:{isValid:!1,isChecking:!1,displayName:`Error checking ${l.table}`}})),!1}},_n=(s,l,f)=>{if(["id","created_at","updated_at"].includes(l))return;const u=d.find(P=>P.name===l);if(te(l)||!u){const P=a.find(R=>R.id===s);P&&ce({id:s,data:{...P}})}else $e.current=!1,me({rowId:s,columnName:l,value:f})},xt=async(s,l,f)=>{if(r){me(null),i(u=>u.map(S=>S.id===s?{...S,[l]:f}:S));try{await I.updateRecord(r,s,{[l]:f}),m(null)}catch(u){m(u instanceof Error?u.message:"Failed to update record"),me({rowId:s,columnName:l,value:f}),await ve()}}},wn=()=>{me(null)},kn=async()=>{if(!(!r||!M))try{const s={...M.data};delete s.id,delete s.created_at,delete s.updated_at,await I.updateRecord(r,M.id,s),await ve(),ce(null),m(null)}catch(s){m(s instanceof Error?s.message:"Failed to update record")}},Cn=async s=>{if(s.preventDefault(),!!r)try{const l=q.columns.filter(f=>f.trim()!=="");if(l.length===0){m("At least one column is required for the index");return}await I.createIndex(r,{name:q.name,columns:l,unique:q.unique}),await fe(),ge({name:"",columns:[""],unique:!1}),ee(!1),m(null)}catch(l){m(l instanceof Error?l.message:"Failed to create index")}},En=async s=>{r&&Z({title:"Drop Index",message:`Are you sure you want to drop the index "${s}"? This action cannot be undone.`,variant:"danger",onConfirm:async()=>{Z(null);try{await I.dropIndex(r,s),await fe(),m(null)}catch(l){m(l instanceof Error?l.message:"Failed to drop index")}}})},bt=t.filter(s=>s.type==="user"),$n=t.filter(s=>s.type==="system");return e("div",{children:[e("div",{class:"sm:flex sm:items-center",children:[e("div",{class:"sm:flex-auto",children:[e("h2",{class:"text-2xl font-bold text-gray-900",children:"Database"}),e("p",{class:"mt-2 text-sm text-gray-700",children:"Manage your D1 database tables and data"})]}),e("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none flex space-x-3",children:[e("button",{type:"button",onClick:()=>Pe(!0),class:"inline-flex items-center justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:w-auto",children:[e("svg",{class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"History"]}),e("button",{type:"button",onClick:()=>C(!0),class:"inline-flex items-center justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:w-auto",children:"Create Table"})]})]}),b&&!A&&e("div",{class:"mt-4 bg-red-50 border border-red-200 rounded-md p-4",children:[e("div",{class:"text-sm text-red-700",children:b}),e("button",{onClick:()=>m(null),class:"mt-2 text-xs text-red-600 hover:text-red-500",children:"Dismiss"})]}),k&&e("div",{class:"mt-6 bg-white shadow rounded-lg p-6",children:[e("h3",{class:"text-lg font-medium text-gray-900 mb-4",children:"Create New Table"}),e("form",{onSubmit:hn,children:[e("div",{class:"mb-4",children:[e("label",{class:"block text-sm font-medium text-gray-700",children:"Table Name"}),e("input",{type:"text",value:_.name,onInput:s=>L({..._,name:s.target.value}),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"my_table",pattern:"[a-zA-Z_][a-zA-Z0-9_]*",required:!0})]}),e("div",{class:"mb-4",children:[e("label",{class:"block text-sm font-medium text-gray-700 mb-2",children:"Columns"}),e("div",{class:"space-y-2",children:_.columns.map((s,l)=>{var f,u,S,P;return e("div",{children:[e("div",{class:"flex space-x-2",children:[e("input",{type:"text",value:s.name,onInput:R=>{const U=[..._.columns];U[l].name=R.target.value,L({..._,columns:U})},class:"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"column_name",pattern:"[a-zA-Z_][a-zA-Z0-9_]*"}),e("select",{value:s.type,onChange:R=>{const U=[..._.columns];U[l].type=R.target.value,L({..._,columns:U})},class:"border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[e("option",{value:"TEXT",children:"TEXT"}),e("option",{value:"INTEGER",children:"INTEGER"}),e("option",{value:"REAL",children:"REAL"}),e("option",{value:"BLOB",children:"BLOB"}),e("option",{value:"BOOLEAN",children:"BOOLEAN"})]}),e("label",{class:"flex items-center space-x-1",children:[e("input",{type:"checkbox",checked:s.notNull||!1,onChange:R=>{const U=[..._.columns];U[l].notNull=R.target.checked,L({..._,columns:U})},class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e("span",{class:"text-xs text-gray-700",children:"NN"})]}),e("label",{class:"flex items-center space-x-1",children:[e("input",{type:"checkbox",checked:((f=s.foreignKey)==null?void 0:f.enabled)||!1,onChange:R=>{const U=[..._.columns],xe=R.target.checked;U[l].foreignKey={...U[l].foreignKey,enabled:xe,column:xe?"id":""},L({..._,columns:U})},class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e("span",{class:"text-xs text-gray-700",children:"FK"})]}),l>0&&e("button",{type:"button",onClick:()=>{const R=_.columns.filter((U,xe)=>xe!==l);L({..._,columns:R})},class:"text-red-600 hover:text-red-900 text-sm",children:"Remove"})]}),((u=s.foreignKey)==null?void 0:u.enabled)&&e("div",{class:"flex space-x-2 ml-4 mt-1",children:[e("select",{value:((S=s.foreignKey)==null?void 0:S.table)||"",onChange:R=>{const U=[..._.columns];U[l].foreignKey={...U[l].foreignKey,table:R.target.value},L({..._,columns:U})},class:"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[e("option",{value:"",children:"Select table..."}),Ye(t).map(R=>e("option",{value:R.name,children:R.name},R.name))]}),e("input",{type:"text",value:((P=s.foreignKey)==null?void 0:P.column)||"",onChange:R=>{const U=[..._.columns];U[l].foreignKey={...U[l].foreignKey,column:R.target.value},L({..._,columns:U})},placeholder:"id",class:"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})]},l)})}),e("button",{type:"button",onClick:()=>L({..._,columns:[..._.columns,{name:"",type:"TEXT",notNull:!1,foreignKey:{enabled:!1,table:"",column:""}}]}),class:"mt-2 text-sm text-indigo-600 hover:text-indigo-500",children:"Add Column"}),e("p",{class:"mt-2 text-xs text-gray-500",children:"Note: id, created_at, and updated_at columns will be added automatically"})]}),e("div",{class:"mb-4",children:[e("div",{class:"flex items-center justify-between mb-2",children:[e("label",{class:"block text-sm font-medium text-gray-700",children:"Indexes (Optional)"}),e("button",{type:"button",onClick:()=>{const s=_.columns.filter(f=>f.name.trim()!=="").map(f=>f.name),l=_.name?et(_.name,s.slice(0,1)):"";L({..._,indexes:[..._.indexes,{name:l,columns:s.slice(0,1),unique:!1}]})},class:"text-sm text-indigo-600 hover:text-indigo-500",children:"Add Index"})]}),e("div",{class:"space-y-3",children:_.indexes.map((s,l)=>e("div",{class:"p-3 bg-gray-50 rounded-md",children:[e("div",{class:"flex space-x-2 mb-2",children:[e("input",{type:"text",value:s.name,onInput:f=>{const u=[..._.indexes];u[l].name=f.target.value,L({..._,indexes:u})},placeholder:"index_name",class:"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"}),e("label",{class:"flex items-center space-x-1",children:[e("input",{type:"checkbox",checked:s.unique,onChange:f=>{const u=[..._.indexes];u[l].unique=f.target.checked,L({..._,indexes:u})},class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e("span",{class:"text-xs text-gray-700",children:"Unique"})]}),e("button",{type:"button",onClick:()=>{const f=_.indexes.filter((u,S)=>S!==l);L({..._,indexes:f})},class:"text-red-600 hover:text-red-900 text-sm",children:"Remove"})]}),e("div",{class:"space-y-1",children:[e("label",{class:"text-xs text-gray-700",children:"Columns:"}),s.columns.map((f,u)=>e("div",{class:"flex space-x-2",children:[e("select",{value:f,onChange:S=>{const P=[..._.indexes];P[l].columns[u]=S.target.value,_.name&&(P[l].name=et(_.name,P[l].columns.filter(R=>R.trim()!==""))),L({..._,indexes:P})},class:"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm",children:[e("option",{value:"",children:"Select column..."}),_.columns.filter(S=>S.name.trim()!=="").map(S=>e("option",{value:S.name,children:S.name},S.name))]}),s.columns.length>1&&e("button",{type:"button",onClick:()=>{const S=[..._.indexes];S[l].columns=S[l].columns.filter((P,R)=>R!==u),L({..._,indexes:S})},class:"text-red-600 hover:text-red-500 text-sm",children:"Remove"})]},u)),e("button",{type:"button",onClick:()=>{const f=[..._.indexes];f[l].columns.push(""),L({..._,indexes:f})},class:"text-xs text-indigo-600 hover:text-indigo-500",children:"Add Column"})]})]},l))})]}),e("div",{class:"flex space-x-3",children:[e("button",{type:"submit",class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Create"}),e("button",{type:"button",onClick:()=>{C(!1),L({name:"",columns:[{name:"",type:"TEXT",notNull:!1,foreignKey:{enabled:!1,table:"",column:""}}],indexes:[]}),m(null)},class:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})]}),e("div",{class:"mt-8 grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e("div",{class:"lg:col-span-1",children:e("div",{class:"bg-white shadow rounded-lg",children:e("div",{class:"px-4 py-5 sm:p-6",children:[e("h3",{class:"text-lg font-medium text-gray-900 mb-4",children:"Tables"}),E&&!r?e("div",{class:"text-sm text-gray-500",children:"Loading..."}):e("div",{class:"space-y-4",children:[e("div",{children:[e("h4",{class:"text-sm font-medium text-gray-700 mb-2",children:"User Tables"}),e("div",{class:"space-y-1",children:[bt.map(s=>e("div",{class:`flex items-center justify-between p-2 rounded hover:bg-gray-50 ${r===s.name?"bg-indigo-50 border border-indigo-200":""}`,children:[e("div",{class:"flex-1 cursor-pointer",onClick:()=>o(s.name),children:[e("div",{class:"text-sm font-medium text-gray-900",children:s.name}),e("div",{class:"text-xs text-gray-500",children:[s.rowCount||0," rows"]})]}),s.type==="user"&&e("div",{class:"relative",children:[e("button",{onClick:l=>{l.stopPropagation(),ne(H===s.name?null:s.name)},class:"p-1 text-gray-400 hover:text-gray-600 rounded",children:e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),H===s.name&&e("div",{class:"absolute right-0 mt-1 w-24 bg-white border border-gray-200 rounded-md shadow-lg z-10",children:e("button",{onClick:l=>{l.stopPropagation(),mn(s.name),ne(null)},class:"w-full px-3 py-2 text-xs text-left text-red-600 hover:bg-red-50",children:"Drop Table"})})]})]},s.name)),bt.length===0&&e("p",{class:"text-sm text-gray-500",children:"No user tables yet"})]})]}),e("div",{children:[e("h4",{class:"text-sm font-medium text-gray-700 mb-2",children:"System Tables"}),e("div",{class:"space-y-1",children:$n.map(s=>e("div",{class:`flex items-center justify-between p-2 rounded cursor-pointer hover:bg-gray-50 ${r===s.name?"bg-indigo-50 border border-indigo-200":""}`,onClick:()=>o(s.name),children:[e("div",{children:[e("div",{class:"text-sm font-medium text-gray-900",children:s.name}),e("div",{class:"text-xs text-gray-500",children:[s.rowCount||0," rows"]})]}),e("span",{class:"text-xs text-gray-400",children:"Protected"})]},s.name))})]})]})]})})}),e("div",{class:"lg:col-span-2",children:r?e("div",{class:"bg-white shadow rounded-lg",children:e("div",{class:"px-4 py-5 sm:p-6",children:[e("div",{class:"flex items-center justify-between mb-4",children:[e("h3",{class:"text-lg font-medium text-gray-900",children:r}),((yt=t.find(s=>s.name===r))==null?void 0:yt.type)==="user"&&e("div",{class:"flex space-x-2",children:[e("button",{type:"button",onClick:()=>J(!ae),class:"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Edit Schema"}),e("button",{type:"button",onClick:()=>{const s={};d.forEach(l=>{["id","created_at","updated_at"].includes(l.name)||(s[l.name]="")}),T(s),m(null),F(!0)},class:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Add Record"})]})]}),ae&&e("div",{class:"mb-6 p-4 border border-gray-200 rounded-lg",children:[e("h4",{class:"text-sm font-medium text-gray-900 mb-3",children:"Table Schema"}),e("div",{class:"mb-4",children:[e("h5",{class:"text-xs font-medium text-gray-700 mb-2",children:"Columns"}),e("div",{class:"space-y-2",children:d.map(s=>e("div",{class:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[(X==null?void 0:X.oldName)===s.name?e("input",{type:"text",value:(X==null?void 0:X.newName)||"",onInput:l=>{X&&pe({...X,newName:l.target.value})},onKeyDown:l=>{X&&(l.key==="Enter"&&pt(X.oldName,X.newName),l.key==="Escape"&&pe(null))},onBlur:()=>{X&&pt(X.oldName,X.newName)},class:"flex-1 text-sm border-gray-300 rounded px-2 py-1",autoFocus:!0}):e("div",{class:"flex-1",children:[e("span",{class:"text-sm font-medium text-gray-900",children:s.name}),e("span",{class:"ml-2 text-xs text-gray-500",children:s.type}),s.notnull?e("span",{class:"ml-1 text-xs text-red-500",children:"NOT NULL"}):null,s.pk?e("span",{class:"ml-1 text-xs text-blue-500",children:"PRIMARY KEY"}):null,te(s.name)&&e("span",{class:"ml-1 text-xs text-green-600",children:["FK → ",te(s.name).table,".",te(s.name).to]})]}),!["id","created_at","updated_at"].includes(s.name)&&e("div",{class:"flex space-x-2",children:[e("button",{onClick:()=>pe({oldName:s.name,newName:s.name}),class:"text-xs text-indigo-600 hover:text-indigo-500",children:"Rename"}),e("button",{onClick:()=>{const l=te(s.name);O({name:s.name,type:s.type,notNull:s.notnull===1,foreignKey:{enabled:!!l,table:(l==null?void 0:l.table)||"",column:(l==null?void 0:l.to)||""}})},class:"text-xs text-blue-600 hover:text-blue-500",children:"Modify"}),e("button",{onClick:()=>yn(s.name),class:"text-xs text-red-600 hover:text-red-500",children:"Drop"})]})]},s.name))})]}),e("div",{class:"border-t pt-4",children:[e("h5",{class:"text-xs font-medium text-gray-700 mb-2",children:"Add Column"}),e("form",{onSubmit:bn,children:[e("div",{class:"flex space-x-2",children:[e("input",{type:"text",value:j.name,onInput:s=>le({...j,name:s.target.value}),placeholder:"column_name",pattern:"[a-zA-Z_][a-zA-Z0-9_]*",class:"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm",required:!0}),e("select",{value:j.type,onChange:s=>le({...j,type:s.target.value}),class:"border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm",children:[e("option",{value:"TEXT",children:"TEXT"}),e("option",{value:"INTEGER",children:"INTEGER"}),e("option",{value:"REAL",children:"REAL"}),e("option",{value:"BLOB",children:"BLOB"}),e("option",{value:"BOOLEAN",children:"BOOLEAN"})]}),e("label",{class:"flex items-center space-x-1",children:[e("input",{type:"checkbox",checked:j.notNull,onChange:s=>le({...j,notNull:s.target.checked}),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e("span",{class:"text-xs text-gray-700",children:"NN"})]}),e("label",{class:"flex items-center space-x-1",children:[e("input",{type:"checkbox",checked:(vt=j.foreignKey)==null?void 0:vt.enabled,onChange:s=>le({...j,foreignKey:{...j.foreignKey,enabled:s.target.checked,column:s.target.checked?"id":""}}),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e("span",{class:"text-xs text-gray-700",children:"FK"})]}),e("button",{type:"submit",class:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Add"})]}),((_t=j.foreignKey)==null?void 0:_t.enabled)&&e("div",{class:"flex space-x-2 mt-2",children:[e("select",{value:((wt=j.foreignKey)==null?void 0:wt.table)||"",onChange:s=>le({...j,foreignKey:{...j.foreignKey,table:s.target.value}}),class:"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm",children:[e("option",{value:"",children:"Select table..."}),Ye(t).map(s=>e("option",{value:s.name,children:s.name},s.name))]}),e("input",{type:"text",value:((kt=j.foreignKey)==null?void 0:kt.column)||"",onChange:s=>le({...j,foreignKey:{...j.foreignKey,column:s.target.value}}),placeholder:"id",class:"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"})]})]})]}),e("div",{class:"border-t pt-4",children:[e("div",{class:"flex items-center justify-between mb-3",children:[e("h5",{class:"text-xs font-medium text-gray-700",children:"Indexes"}),e("button",{type:"button",onClick:()=>ee(!V),class:"text-xs text-indigo-600 hover:text-indigo-500",children:V?"Hide":"Manage Indexes"})]}),e("div",{class:"space-y-2 mb-3",children:[x.map(s=>e("div",{class:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e("div",{class:"flex-1",children:[e("div",{class:"flex items-center space-x-2",children:[e("span",{class:"text-sm font-medium text-gray-900",children:s.name}),s.unique&&e("span",{class:"text-xs bg-blue-100 text-blue-800 px-2 py-0.5 rounded",children:"UNIQUE"})]}),e("div",{class:"text-xs text-gray-500",children:["Columns: ",s.columns.join(", ")]})]}),e("button",{onClick:()=>En(s.name),class:"text-xs text-red-600 hover:text-red-500",children:"Drop"})]},s.name)),x.length===0&&e("p",{class:"text-xs text-gray-500",children:"No custom indexes"})]}),V&&e("form",{onSubmit:Cn,class:"space-y-3 p-3 bg-blue-50 rounded-md",children:[e("h6",{class:"text-xs font-medium text-gray-700",children:"Create New Index"}),e("div",{children:e("input",{type:"text",value:q.name,onInput:s=>ge({...q,name:s.target.value}),placeholder:"index_name",pattern:"[a-zA-Z_][a-zA-Z0-9_]*",class:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm",required:!0})}),e("div",{class:"space-y-2",children:[e("label",{class:"text-xs text-gray-700",children:"Columns:"}),q.columns.map((s,l)=>e("div",{class:"flex space-x-2",children:[e("select",{value:s,onChange:f=>{const u=[...q.columns];u[l]=f.target.value,ge({...q,columns:u})},class:"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm",children:[e("option",{value:"",children:"Select column..."}),d.map(f=>e("option",{value:f.name,children:f.name},f.name))]}),q.columns.length>1&&e("button",{type:"button",onClick:()=>{const f=q.columns.filter((u,S)=>S!==l);ge({...q,columns:f})},class:"text-red-600 hover:text-red-500 text-sm",children:"Remove"})]},l)),e("button",{type:"button",onClick:()=>ge({...q,columns:[...q.columns,""]}),class:"text-xs text-indigo-600 hover:text-indigo-500",children:"Add Column"})]}),e("div",{children:e("label",{class:"flex items-center space-x-2",children:[e("input",{type:"checkbox",checked:q.unique,onChange:s=>ge({...q,unique:s.target.checked}),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e("span",{class:"text-sm text-gray-700",children:"Unique Index"})]})}),e("div",{class:"flex space-x-2",children:[e("button",{type:"submit",class:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Create Index"}),e("button",{type:"button",onClick:()=>{ee(!1),ge({name:"",columns:[""],unique:!1})},class:"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})]})]}),v&&e("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e("div",{class:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e("h4",{class:"text-lg font-medium text-gray-900 mb-4",children:["Modify Column: ",v.name]}),e("div",{class:"space-y-4",children:[e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-700",children:"Type"}),e("select",{value:v.type,onChange:s=>O({...v,type:s.target.value}),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[e("option",{value:"TEXT",children:"TEXT"}),e("option",{value:"INTEGER",children:"INTEGER"}),e("option",{value:"REAL",children:"REAL"}),e("option",{value:"BLOB",children:"BLOB"}),e("option",{value:"BOOLEAN",children:"BOOLEAN"})]})]}),e("div",{children:e("label",{class:"flex items-center space-x-2",children:[e("input",{type:"checkbox",checked:v.notNull,onChange:s=>O({...v,notNull:s.target.checked}),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e("span",{class:"text-sm text-gray-700",children:"NOT NULL"})]})}),e("div",{children:e("label",{class:"flex items-center space-x-2",children:[e("input",{type:"checkbox",checked:v.foreignKey.enabled,onChange:s=>O({...v,foreignKey:{...v.foreignKey,enabled:s.target.checked,column:s.target.checked?"id":""}}),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e("span",{class:"text-sm text-gray-700",children:"Foreign Key"})]})}),v.foreignKey.enabled&&e("div",{class:"space-y-2",children:[e("select",{value:v.foreignKey.table,onChange:s=>O({...v,foreignKey:{...v.foreignKey,table:s.target.value}}),class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[e("option",{value:"",children:"Select table..."}),Ye(t).map(s=>e("option",{value:s.name,children:s.name},s.name))]}),e("input",{type:"text",value:v.foreignKey.column,onChange:s=>O({...v,foreignKey:{...v.foreignKey,column:s.target.value}}),placeholder:"id",class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})]}),e("div",{class:"mt-6 flex space-x-3",children:[e("button",{onClick:()=>{var f,u;const s={};v.type!==((f=d.find(S=>S.name===v.name))==null?void 0:f.type)&&(s.type=v.type);const l=((u=d.find(S=>S.name===v.name))==null?void 0:u.notnull)===1;v.notNull!==l&&(s.notNull=v.notNull),v.foreignKey.enabled&&v.foreignKey.table&&v.foreignKey.column?s.foreignKey={table:v.foreignKey.table,column:v.foreignKey.column}:v.foreignKey.enabled||(s.foreignKey=null),vn(v.name,s)},class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Apply Changes"}),e("button",{onClick:()=>O(null),class:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})}),se&&e("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e("div",{class:"bg-white rounded-lg p-6 max-w-lg w-full mx-4",children:[e("div",{class:"flex items-center mb-4",children:[e("div",{class:"flex-shrink-0",children:e("svg",{class:"h-6 w-6 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e("div",{class:"ml-3",children:e("h3",{class:"text-lg font-medium text-gray-900",children:"Validation Warning"})})]}),e("div",{class:"mb-4",children:[e("p",{class:"text-sm text-gray-700 mb-3",children:"The following issues were found with your changes:"}),e("div",{class:"bg-yellow-50 border border-yellow-200 rounded-md p-3",children:[e("ul",{class:"list-disc list-inside space-y-1",children:se.errors.map((s,l)=>e("li",{class:"text-sm text-yellow-800",children:s},l))}),se.conflictingRows>0&&e("p",{class:"text-sm text-yellow-800 mt-2 font-medium",children:[se.conflictingRows," rows will be affected."]})]}),e("p",{class:"text-sm text-gray-600 mt-3",children:"Proceeding may result in data loss or corruption. Are you sure you want to continue?"})]}),e("div",{class:"flex space-x-3",children:[e("button",{onClick:se.onConfirm,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Proceed Anyway"}),e("button",{onClick:()=>Q(null),class:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})}),oe&&e("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e("div",{class:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e("div",{class:"flex items-center mb-4",children:[e("div",{class:"flex-shrink-0",children:oe.variant==="danger"?e("svg",{class:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}):e("svg",{class:"h-6 w-6 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e("div",{class:"ml-3",children:e("h3",{class:"text-lg font-medium text-gray-900",children:oe.title})})]}),e("div",{class:"mb-6",children:e("p",{class:"text-sm text-gray-700",children:oe.message})}),e("div",{class:"flex space-x-3",children:[e("button",{onClick:oe.onConfirm,class:`inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 ${oe.variant==="danger"?"bg-red-600 hover:bg-red-700 focus:ring-red-500":"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500"}`,children:"Confirm"}),e("button",{onClick:()=>Z(null),class:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})}),M&&e("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e("div",{class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[e("div",{class:"flex items-center justify-between mb-4",children:[e("h3",{class:"text-lg font-medium text-gray-900",children:"Edit Record"}),e("button",{onClick:()=>ce(null),class:"text-gray-400 hover:text-gray-600",children:e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e("div",{class:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:d.map(s=>{if(["id","created_at","updated_at"].includes(s.name))return e("div",{class:"sm:col-span-2",children:[e("label",{class:"block text-sm font-medium text-gray-500",children:[s.name," (read-only)"]}),e("div",{class:"mt-1 block w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-sm text-gray-500",children:s.name.includes("_at")&&M.data[s.name]?ft(M.data[s.name]):M.data[s.name]||"-"})]},s.name);const l=te(s.name);return e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-700",children:[s.name,s.notnull?e("span",{class:"text-red-500 ml-1",children:"*"}):null,l&&e("span",{class:"text-green-600 ml-1 text-xs",children:["FK → ",l.table,".",l.to]})]}),l?e("div",{class:"relative",children:[e("input",{type:"text",value:M.data[s.name]||"",onInput:f=>{const u=f.target.value;ce({...M,data:{...M.data,[s.name]:u}}),u.trim()&&gt(u,l)},class:`mt-1 block w-full border rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${M.data[s.name]&&Y[`${l.table}-${M.data[s.name]}`]?Y[`${l.table}-${M.data[s.name]}`].isValid?"border-green-300 bg-green-50":"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:`Enter ${l.table} ID`,required:s.notnull===1}),M.data[s.name]&&Y[`${l.table}-${M.data[s.name]}`]&&e("div",{class:`absolute left-0 top-full mt-1 text-xs px-2 py-1 rounded ${Y[`${l.table}-${M.data[s.name]}`].isValid?"text-green-700 bg-green-100":"text-red-700 bg-red-100"}`,children:Y[`${l.table}-${M.data[s.name]}`].isChecking?"Checking...":Y[`${l.table}-${M.data[s.name]}`].displayName})]}):e("input",{type:s.type==="INTEGER"||s.type==="REAL"?"number":"text",value:M.data[s.name]||"",onInput:f=>ce({...M,data:{...M.data,[s.name]:f.target.value}}),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",required:s.notnull===1})]},s.name)})}),e("div",{class:"mt-6 flex space-x-3",children:[e("button",{onClick:kn,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Save Changes"}),e("button",{onClick:()=>ce(null),class:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})}),A&&e("div",{class:"mb-6 p-4 border border-gray-200 rounded-lg",children:[e("h4",{class:"text-sm font-medium text-gray-900 mb-3",children:"Create New Record"}),e("form",{onSubmit:dn,children:[e("div",{class:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:Object.entries($).map(([s,l])=>e("div",{children:[e("label",{class:"block text-xs font-medium text-gray-700",children:s}),e("input",{type:"text",value:l,onInput:f=>T({...$,[s]:f.target.value}),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]},s))}),b&&A&&e("div",{class:"mt-3 bg-red-50 border border-red-200 rounded-md p-3",children:e("div",{class:"flex",children:[e("div",{class:"flex-shrink-0",children:e("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})})}),e("div",{class:"ml-3",children:e("p",{class:"text-sm text-red-700",children:b})})]})}),e("div",{class:"mt-3 flex space-x-2",children:[e("button",{type:"submit",class:"inline-flex justify-center py-1.5 px-3 border border-transparent shadow-sm text-xs font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Create"}),e("button",{type:"button",onClick:()=>{F(!1),m(null)},class:"inline-flex justify-center py-1.5 px-3 border border-gray-300 shadow-sm text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})]}),E?e("div",{class:"text-center py-4 text-sm text-gray-500",children:"Loading data..."}):a.length===0?e("div",{class:"text-center py-8",children:e("p",{class:"text-sm text-gray-500",children:"No data in this table"})}):e("div",{class:"overflow-x-auto",children:e("table",{class:"min-w-full divide-y divide-gray-200",children:[e("thead",{class:"bg-gray-50",children:e("tr",{children:[d.map(s=>e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s.name},s.name)),e("th",{class:"px-3 py-2"})]})}),e("tbody",{class:"bg-white divide-y divide-gray-200",children:a.map((s,l)=>{var f;return e("tr",{"data-record-id":s.id,children:[d.map(u=>{var S,P,R,U,xe,Ct,Et,$t;return e("td",{class:`px-3 py-2 whitespace-nowrap text-sm text-gray-900 select-text ${!["id","created_at","updated_at"].includes(u.name)&&((S=t.find(z=>z.name===r))==null?void 0:S.type)==="user"?"cursor-pointer hover:bg-gray-50":""}`,onClick:z=>{var Tt;const de=`${s.id}-${u.name}`;if(["id","created_at","updated_at"].includes(u.name)||((Tt=t.find(Se=>Se.name===r))==null?void 0:Tt.type)!=="user")return;const Te=Ve[de];if(Te)clearTimeout(Te.timeout),Ce(Se=>{const _e={...Se};return delete _e[de],_e}),z.preventDefault(),z.stopPropagation(),_n(s.id,u.name,s[u.name]);else{const Se=setTimeout(()=>{Ce(_e=>{const St={..._e};return delete St[de],St})},400);Ce(_e=>({..._e,[de]:{count:1,timeout:Se}}))}},title:!["id","created_at","updated_at"].includes(u.name)&&((P=t.find(z=>z.name===r))==null?void 0:P.type)==="user"?"Double-click to edit":"",children:(D==null?void 0:D.rowId)===s.id&&(D==null?void 0:D.columnName)===u.name?e("div",{class:"relative",children:[e("input",{type:u.type==="INTEGER"||u.type==="REAL"?"number":"text",value:(D==null?void 0:D.value)||"",onInput:z=>{if(D){const de=z.target.value;me({...D,value:de});const Te=te(u.name);Te&&de.trim()&&gt(de,Te)}},onKeyDown:z=>{D&&(z.key==="Enter"&&!z.isComposing&&xt(s.id,u.name,D.value),z.key==="Escape"&&wn())},onBlur:()=>{D&&xt(s.id,u.name,D.value)},class:`w-full px-2 py-1 border rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${te(u.name)&&(D!=null&&D.value)&&Y[`${(R=te(u.name))==null?void 0:R.table}-${D.value}`]?Y[`${(U=te(u.name))==null?void 0:U.table}-${D.value}`].isValid?"border-green-300 bg-green-50":"border-red-300 bg-red-50":"border-indigo-300"}`,ref:z=>{We.current=z,z&&!$e.current&&($e.current=!0,setTimeout(()=>{z.focus();const de=z.value.length;z.setSelectionRange(de,de)},0))}}),te(u.name)&&(D==null?void 0:D.value)&&Y[`${(xe=te(u.name))==null?void 0:xe.table}-${D.value}`]&&e("div",{class:`absolute left-0 -bottom-6 text-xs px-2 py-1 rounded ${Y[`${(Ct=te(u.name))==null?void 0:Ct.table}-${D.value}`].isValid?"text-green-700 bg-green-100":"text-red-700 bg-red-100"}`,children:Y[`${(Et=te(u.name))==null?void 0:Et.table}-${D.value}`].isChecking?"Checking...":Y[`${($t=te(u.name))==null?void 0:$t.table}-${D.value}`].displayName})]}):u.name.includes("_at")&&s[u.name]?ft(s[u.name]):(u.name==="id"||u.name.endsWith("_id"))&&s[u.name]&&s[u.name].length>8?e("button",{onClick:z=>{z.stopPropagation(),pn(z,s[u.name],l,u.name)},onDblClick:z=>{z.preventDefault(),z.stopPropagation()},class:"text-blue-600 hover:text-blue-800 cursor-pointer underline decoration-dotted relative",title:"Click to copy • Cmd+Click to jump to record",children:[nr(s[u.name]),G===`${l}-${u.name}`&&e("span",{class:"absolute -top-8 left-0 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:"Copied!"})]}):s[u.name]||"-"},u.name)}),e("td",{class:"px-3 py-2 whitespace-nowrap text-right text-sm font-medium",children:((f=t.find(u=>u.name===r))==null?void 0:f.type)==="user"&&e("div",{class:"flex space-x-2",children:[e("button",{onClick:()=>{const u=a.find(S=>S.id===s.id);u&&ce({id:s.id,data:{...u}})},class:"text-indigo-600 hover:text-indigo-900",children:"Edit"}),e("button",{onClick:()=>un(s.id),class:"text-red-600 hover:text-red-900",children:"Delete"})]})})]},s.id||l)})})]})})]})}):e("div",{class:"bg-white shadow rounded-lg",children:e("div",{class:"px-4 py-5 sm:p-6 text-center",children:[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e("h3",{class:"mt-2 text-sm font-medium text-gray-900",children:"No table selected"}),e("p",{class:"mt-1 text-sm text-gray-500",children:"Select a table from the list to view its data"})]})})})]}),Je&&e(tr,{onClose:()=>Pe(!1),onRestore:()=>{Me(),r&&(ve(),fe())}})]})}function ir(){const[t,n]=y([]),[r,o]=y(!0),[a,i]=y(null),[d,h]=y(!1),[g,p]=y(new Set);ue(()=>{E()},[]);const E=async(k,C)=>{try{o(!0);const $=new URLSearchParams,T=await fetch(`/api/storage?${$}`);if(!T.ok)throw new Error("Failed to load files");const _=await T.json();n(C?[...t,..._.objects]:_.objects)}catch($){i($ instanceof Error?$.message:"Unknown error")}finally{o(!1)}},c=async k=>{const C=k.target,$=C.files;if($!=null&&$.length){h(!0);try{for(const T of Array.from($)){const _=new FormData;if(_.append("file",T),!(await fetch("/api/storage/upload",{method:"POST",body:_})).ok)throw new Error(`Failed to upload ${T.name}`)}await E(),C.value=""}catch(T){i(T instanceof Error?T.message:"Upload failed")}finally{h(!1)}}},b=async k=>{if(confirm(`Delete ${k}?`))try{if(!(await fetch(`/api/storage/${encodeURIComponent(k)}`,{method:"DELETE"})).ok)throw new Error("Failed to delete file");n(t.filter($=>$.key!==k))}catch(C){i(C instanceof Error?C.message:"Delete failed")}},m=async()=>{if(g.size!==0&&confirm(`Delete ${g.size} files?`))try{if(!(await fetch("/api/storage",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({keys:Array.from(g)})})).ok)throw new Error("Failed to delete files");n(t.filter(C=>!g.has(C.key))),p(new Set)}catch(k){i(k instanceof Error?k.message:"Bulk delete failed")}},A=k=>{if(k===0)return"0 B";const C=1024,$=["B","KB","MB","GB"],T=Math.floor(Math.log(k)/Math.log(C));return parseFloat((k/Math.pow(C,T)).toFixed(2))+" "+$[T]},F=k=>{const C=new Set(g);C.has(k)?C.delete(k):C.add(k),p(C)};return r&&t.length===0?e("div",{class:"flex items-center justify-center h-64",children:e("div",{class:"text-gray-500",children:"Loading files..."})}):e("div",{children:[e("div",{class:"flex justify-between items-center mb-6",children:[e("h2",{class:"text-2xl font-bold text-gray-900",children:"Storage"}),e("div",{class:"flex gap-2",children:[g.size>0&&e("button",{onClick:m,class:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:["Delete Selected (",g.size,")"]}),e("label",{class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 cursor-pointer",children:[d?"Uploading...":"Upload Files",e("input",{type:"file",multiple:!0,onChange:c,disabled:d,class:"hidden"})]})]})]}),a&&e("div",{class:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:[e("p",{class:"text-red-600",children:a}),e("button",{onClick:()=>i(null),class:"mt-2 text-sm text-red-500 hover:text-red-700",children:"Dismiss"})]}),e("div",{class:"bg-white shadow rounded-lg overflow-hidden",children:e("table",{class:"min-w-full divide-y divide-gray-200",children:[e("thead",{class:"bg-gray-50",children:e("tr",{children:[e("th",{class:"w-12 px-6 py-3",children:e("input",{type:"checkbox",checked:g.size===t.length&&t.length>0,onChange:k=>{k.target.checked?p(new Set(t.map($=>$.key))):p(new Set)}})}),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Size"}),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Uploaded"}),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e("tbody",{class:"bg-white divide-y divide-gray-200",children:t.length===0?e("tr",{children:e("td",{colSpan:6,class:"px-6 py-4 text-center text-gray-500",children:"No files uploaded yet"})}):t.map(k=>e("tr",{class:"hover:bg-gray-50",children:[e("td",{class:"px-6 py-4",children:e("input",{type:"checkbox",checked:g.has(k.key),onChange:()=>F(k.key)})}),e("td",{class:"px-6 py-4 whitespace-nowrap",children:e("div",{class:"text-sm font-medium text-gray-900",children:k.key})}),e("td",{class:"px-6 py-4 whitespace-nowrap",children:e("div",{class:"text-sm text-gray-900",children:A(k.size)})}),e("td",{class:"px-6 py-4 whitespace-nowrap",children:e("div",{class:"text-sm text-gray-900",children:k.contentType||"Unknown"})}),e("td",{class:"px-6 py-4 whitespace-nowrap",children:e("div",{class:"text-sm text-gray-900",children:new Date(k.uploaded).toLocaleString()})}),e("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e("a",{href:`/api/storage/download/${encodeURIComponent(k.key)}`,class:"text-blue-600 hover:text-blue-900 mr-4",download:!0,children:"Download"}),e("button",{onClick:()=>b(k.key),class:"text-red-600 hover:text-red-900",children:"Delete"})]})]},k.key))})]})})]})}function ar({supportedProvider:t,configuredProvider:n,onUpdate:r}){const[o,a]=y(!1),[i,d]=y(!1),[h,g]=y({client_id:(n==null?void 0:n.client_id)||"",client_secret:(n==null?void 0:n.client_secret)||"",is_enabled:(n==null?void 0:n.is_enabled)||!1,scopes:(n==null?void 0:n.scopes)||t.default_scopes,redirect_uri:(n==null?void 0:n.redirect_uri)||""}),[p,E]=y(!1),[c,b]=y(null),m=!!n,A=(n==null?void 0:n.is_enabled)||!1,F=async()=>{if(!h.client_id||!h.client_secret){b("Client ID and Client Secret are required");return}d(!0),b(null);try{await I.updateOAuthProvider(t.provider,h),a(!1),r()}catch(T){b(T instanceof Error?T.message:"Failed to save provider")}finally{d(!1)}},k=async()=>{if(m){d(!0),b(null);try{await I.toggleOAuthProvider(t.provider,!A),r()}catch(T){b(T instanceof Error?T.message:"Failed to toggle provider")}finally{d(!1)}}},C=async()=>{if(!(!m||!confirm(`Are you sure you want to delete the ${t.name} OAuth configuration?`))){d(!0),b(null);try{await I.deleteOAuthProvider(t.provider),r()}catch(T){b(T instanceof Error?T.message:"Failed to delete provider")}finally{d(!1)}}};return e("div",{class:"bg-white border border-gray-200 rounded-lg p-6",children:[e("div",{class:"flex items-start justify-between mb-4",children:[e("div",{class:"flex items-center gap-3",children:[e("span",{class:"text-2xl",children:(T=>({google:"🟦",github:"⚫",facebook:"🟦",linkedin:"🔵",twitter:"🟦",apple:"⚫",microsoft:"🔵",discord:"🟣",slack:"🟩"})[T]||"🔗")(t.provider)}),e("div",{children:[e("h3",{class:"text-lg font-semibold text-gray-900",children:t.name}),e("div",{class:"flex items-center gap-2 mt-1",children:[e("span",{class:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${m?A?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:m?A?"Enabled":"Disabled":"Not Configured"}),t.note&&e("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:t.note})]})]})]}),e("div",{class:"flex items-center gap-2",children:[m&&e("button",{onClick:k,disabled:i,class:`px-3 py-1 text-sm rounded-md font-medium transition-colors ${A?"bg-yellow-100 text-yellow-800 hover:bg-yellow-200":"bg-green-100 text-green-800 hover:bg-green-200"} disabled:opacity-50`,children:A?"Disable":"Enable"}),e("button",{onClick:()=>a(!o),disabled:i,class:"px-3 py-1 text-sm rounded-md font-medium bg-blue-100 text-blue-800 hover:bg-blue-200 transition-colors disabled:opacity-50",children:o?"Cancel":m?"Edit":"Configure"})]})]}),c&&e("div",{class:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:e("p",{class:"text-sm text-red-600",children:c})}),o?e("div",{class:"space-y-4",children:[e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-700 mb-1",children:"Client ID"}),e("input",{type:"text",value:h.client_id,onInput:T=>g({...h,client_id:T.target.value}),class:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your OAuth Client ID"})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-700 mb-1",children:"Client Secret"}),e("div",{class:"relative",children:[e("input",{type:p?"text":"password",value:h.client_secret,onInput:T=>g({...h,client_secret:T.target.value}),class:"w-full border border-gray-300 rounded-md px-3 py-2 pr-10 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your OAuth Client Secret"}),e("button",{type:"button",onClick:()=>E(!p),class:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-400 hover:text-gray-600",children:p?"👁️":"👁️‍🗨️"})]})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-700 mb-1",children:"Redirect URI (optional)"}),e("input",{type:"url",value:h.redirect_uri,onInput:T=>g({...h,redirect_uri:T.target.value}),class:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:`${window.location.origin}/api/auth/callback/${t.provider}`})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-700 mb-2",children:"Scopes"}),e("div",{class:"flex flex-wrap gap-2",children:h.scopes.map((T,_)=>e("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:T},_))})]}),e("div",{class:"flex items-center gap-3 pt-4",children:[e("button",{onClick:F,disabled:i,class:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Saving...":"Save Configuration"}),m&&e("button",{onClick:C,disabled:i,class:"px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:"Delete"})]})]}):e("div",{class:"space-y-3",children:[e("div",{class:"text-sm text-gray-600",children:[e("strong",{children:"Setup Instructions:"}),e("p",{class:"mt-1",children:t.setup_instructions})]}),e("div",{class:"text-sm text-gray-600",children:[e("strong",{children:"Default Callback URL:"}),e("code",{class:"ml-2 px-2 py-1 bg-gray-100 rounded text-xs",children:[window.location.origin,"/api/auth/callback/",t.provider]})]}),e("div",{class:"text-sm text-gray-600",children:[e("strong",{children:"Default Scopes:"}),e("div",{class:"flex flex-wrap gap-1 mt-1",children:t.default_scopes.map((T,_)=>e("span",{class:"inline-flex items-center px-2 py-0.5 rounded text-xs bg-gray-100 text-gray-700",children:T},_))})]}),m&&e("div",{class:"pt-2 border-t border-gray-100",children:[e("div",{class:"text-sm text-gray-600",children:[e("strong",{children:"Status:"})," Configured and ",A?"enabled":"disabled"]}),n&&e("div",{class:"text-sm text-gray-600 mt-1",children:[e("strong",{children:"Last updated:"})," ",new Date(n.updated_at).toLocaleDateString()]})]})]})]})}function lr(){const[t,n]=y([]),[r,o]=y([]),[a,i]=y(!0),[d,h]=y(null),g=async()=>{i(!0),h(null);try{const[b,m]=await Promise.all([I.getSupportedProviders(),I.getOAuthProviders()]);n(b.supported_providers),o(m.providers)}catch(b){h(b instanceof Error?b.message:"Failed to load OAuth providers"),console.error("Error loading OAuth providers:",b)}finally{i(!1)}};ue(()=>{g()},[]);const p=b=>r.find(m=>m.provider===b),E=r.filter(b=>b.is_enabled).length,c=r.length;return a?e("div",{children:[e("h2",{class:"text-2xl font-bold text-gray-900 mb-6",children:"Authentication"}),e("div",{class:"flex items-center justify-center py-12",children:e("div",{class:"text-gray-500",children:"Loading OAuth providers..."})})]}):e("div",{children:[e("div",{class:"mb-6",children:[e("h2",{class:"text-2xl font-bold text-gray-900",children:"Authentication"}),e("p",{class:"text-gray-600 mt-2",children:"Configure OAuth providers to enable user authentication in your applications"})]}),d&&e("div",{class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md",children:[e("p",{class:"text-sm text-red-600",children:d}),d.includes("authentication required")?e("div",{class:"mt-3",children:[e("p",{class:"text-sm text-red-700 mb-2",children:"You need to log in as an administrator to manage OAuth settings."}),e("a",{href:"/",class:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Go to Dashboard"})]}):e("button",{onClick:g,class:"mt-2 text-sm text-red-700 hover:text-red-800 underline",children:"Try again"})]}),e("div",{class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e("div",{class:"bg-white border border-gray-200 rounded-lg p-4",children:[e("div",{class:"text-2xl font-bold text-gray-900",children:t.length}),e("div",{class:"text-sm text-gray-600",children:"Supported Providers"})]}),e("div",{class:"bg-white border border-gray-200 rounded-lg p-4",children:[e("div",{class:"text-2xl font-bold text-blue-600",children:c}),e("div",{class:"text-sm text-gray-600",children:"Configured"})]}),e("div",{class:"bg-white border border-gray-200 rounded-lg p-4",children:[e("div",{class:"text-2xl font-bold text-green-600",children:E}),e("div",{class:"text-sm text-gray-600",children:"Enabled"})]})]}),e("div",{class:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:t.map(b=>e(ar,{supportedProvider:b,configuredProvider:p(b.provider),onUpdate:g},b.provider))}),e("div",{class:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e("h3",{class:"text-lg font-semibold text-blue-900 mb-3",children:"Getting Started"}),e("div",{class:"space-y-2 text-sm text-blue-800",children:[e("p",{children:["1. ",e("strong",{children:"Choose a provider:"}),' Click "Configure" on any OAuth provider you want to enable']}),e("p",{children:["2. ",e("strong",{children:"Create OAuth app:"})," Follow the setup instructions to create an OAuth application"]}),e("p",{children:["3. ",e("strong",{children:"Configure credentials:"})," Enter your Client ID and Client Secret"]}),e("p",{children:["4. ",e("strong",{children:"Enable provider:"}),' Toggle the provider to "Enabled" status']}),e("p",{children:["5. ",e("strong",{children:"Test authentication:"})," Users can now authenticate with this provider"]})]})]}),e("div",{class:"mt-8 bg-gray-50 border border-gray-200 rounded-lg p-6",children:[e("h3",{class:"text-lg font-semibold text-gray-900 mb-3",children:"Authentication Endpoints"}),e("div",{class:"space-y-2 text-sm font-mono text-gray-700",children:[e("div",{children:[e("strong",{children:"Available providers:"})," ",e("code",{children:"GET /api/auth/providers"})]}),e("div",{children:[e("strong",{children:"Start authentication:"})," ",e("code",{children:["GET /api/auth/login/","{{provider}}"]})]}),e("div",{children:[e("strong",{children:"OAuth callback:"})," ",e("code",{children:["GET /api/auth/callback/","{{provider}}"]})]}),e("div",{children:[e("strong",{children:"Get user info:"})," ",e("code",{children:"GET /api/auth/me"})]}),e("div",{children:[e("strong",{children:"Refresh token:"})," ",e("code",{children:"POST /api/auth/refresh"})]}),e("div",{children:[e("strong",{children:"Logout:"})," ",e("code",{children:"POST /api/auth/logout"})]})]})]})]})}function cr(){const[t,n]=y("app-settings"),[r,o]=y([]),[a,i]=y(!1),[d,h]=y(null),[g,p]=y(""),[E,c]=y(!1),[b,m]=y(null),[A,F]=y([]),[k,C]=y(!1),[$,T]=y(null),[_,L]=y(!1),[H,ne]=y({name:"",scopes:[],expires_in_days:30}),[G,re]=y(null),[ae]=y(["data:read","data:write","data:delete","tables:read","tables:write","tables:delete","storage:read","storage:write","storage:delete"]),[J,j]=y(null),[le,X]=y([]),[pe,v]=y(!1),[O,se]=y(null),[Q,oe]=y(!1),[Z,D]=y({}),[me,M]=y(!1),ce=async()=>{try{i(!0),h(null);const x=await fetch("/api/admin",{credentials:"include"});if(!x.ok)throw new Error("Failed to load admins");const w=await x.json();o(w.admins)}catch(x){console.error("Failed to load admins:",x),h(x instanceof Error?x.message:"Failed to load admins")}finally{i(!1)}},Ve=async x=>{if(x.preventDefault(),!g.trim()){h("GitHub username is required");return}try{c(!0),h(null);const w=await fetch("/api/admin",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({github_username:g.trim()})});if(!w.ok){const V=await w.json();throw new Error(V.error||"Failed to add admin")}p(""),await ce()}catch(w){console.error("Failed to add admin:",w),h(w instanceof Error?w.message:"Failed to add admin")}finally{c(!1)}},Ce=async x=>{try{h(null);const w=await fetch(`/api/admin/${x}`,{method:"DELETE",credentials:"include"});if(!w.ok){const V=await w.json();throw new Error(V.error||"Failed to remove admin")}m(null),await ce()}catch(w){console.error("Failed to remove admin:",w),h(w instanceof Error?w.message:"Failed to remove admin")}},Y=async()=>{try{C(!0),T(null);const x=await fetch("/api/api-keys/init",{method:"POST",credentials:"include"});if(!x.ok){const ee=await x.json().catch(()=>({}))}const w=await fetch("/api/api-keys",{credentials:"include"});if(!w.ok){const ee=await w.json().catch(()=>({}));throw new Error(`Failed to load API keys: ${w.status} - ${ee.error||"Unknown error"}`)}const V=await w.json();F(V.data||[])}catch(x){console.error("Failed to load API keys:",x);let w="Failed to load API keys";x instanceof Error&&(w=x.message),typeof x=="object"&&x!==null&&"status"in x&&(w+=` (Status: ${x.status})`),T(w)}finally{C(!1)}},Ee=async x=>{if(x.preventDefault(),!H.name.trim()||H.scopes.length===0){T("Name and at least one scope are required");return}try{T(null);const w=await fetch("/api/api-keys",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(H)});if(!w.ok){const ee=await w.json().catch(()=>({})),q=`Failed to create API key: ${w.status} - ${ee.error||"Unknown error"}`;throw ee.details?new Error(`${q}. Details: ${JSON.stringify(ee.details)}`):new Error(q)}const V=await w.json();re(V.data),L(!1),ne({name:"",scopes:[],expires_in_days:30}),await Y()}catch(w){console.error("Failed to create API key:",w),T(w instanceof Error?w.message:"Failed to create API key")}},We=async x=>{try{T(null);const w=await fetch(`/api/api-keys/${x}/revoke`,{method:"PATCH",credentials:"include"});if(!w.ok){const V=await w.json().catch(()=>({})),ee=`Failed to revoke API key: ${w.status} - ${V.error||"Unknown error"}`;throw V.details?new Error(`${ee}. Details: ${JSON.stringify(V.details)}`):new Error(ee)}j(null),await Y()}catch(w){console.error("Failed to revoke API key:",w),T(w instanceof Error?w.message:"Failed to revoke API key")}},$e=x=>{ne(w=>({...w,scopes:w.scopes.includes(x)?w.scopes.filter(V=>V!==x):[...w.scopes,x]}))},Je=async()=>{try{v(!0),se(null);const x=await fetch("/api/app-settings",{credentials:"include"});if(!x.ok)throw new Error("Failed to load app settings");const w=await x.json();X(w.settings);const V={};w.settings.forEach(ee=>{V[ee.key]=ee.value}),D(V)}catch(x){console.error("Failed to load app settings:",x),se(x instanceof Error?x.message:"Failed to load app settings")}finally{v(!1)}},Pe=async()=>{try{M(!0),se(null);const x=await fetch("/api/app-settings",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(Z)});if(!x.ok)throw new Error("Failed to save app settings");const w=await x.json();X(w.settings),oe(!1)}catch(x){console.error("Failed to save app settings:",x),se(x instanceof Error?x.message:"Failed to save app settings")}finally{M(!1)}};return ue(()=>{ce(),Y(),Je()},[]),e("div",{children:[e("h2",{class:"text-2xl font-bold text-gray-900 mb-6",children:"Settings"}),e("div",{class:"flex gap-6",children:[e("div",{class:"w-64 flex-shrink-0",children:e("nav",{class:"space-y-1",children:[e("button",{onClick:()=>n("app-settings"),class:`w-full text-left px-3 py-2 text-sm font-medium rounded-md transition-colors ${t==="app-settings"?"bg-blue-50 text-blue-700 border-l-4 border-blue-700":"text-gray-700 hover:bg-gray-50"}`,children:"Application Settings"}),e("button",{onClick:()=>n("admins"),class:`w-full text-left px-3 py-2 text-sm font-medium rounded-md transition-colors ${t==="admins"?"bg-blue-50 text-blue-700 border-l-4 border-blue-700":"text-gray-700 hover:bg-gray-50"}`,children:"Admin Management"}),e("button",{onClick:()=>n("api-keys"),class:`w-full text-left px-3 py-2 text-sm font-medium rounded-md transition-colors ${t==="api-keys"?"bg-blue-50 text-blue-700 border-l-4 border-blue-700":"text-gray-700 hover:bg-gray-50"}`,children:"API Keys"})]})}),e("div",{class:"flex-1",children:[t==="app-settings"&&e("div",{class:"bg-white shadow rounded-lg",children:e("div",{class:"px-4 py-5 sm:p-6",children:[e("div",{class:"flex justify-between items-center mb-4",children:[e("h3",{class:"text-lg font-medium text-gray-900",children:"Application Settings"}),!Q&&e("button",{onClick:()=>oe(!0),class:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-300",children:"Edit Settings"})]}),O&&e("div",{class:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:e("p",{class:"text-sm text-red-600",children:O})}),pe?e("p",{class:"text-gray-500",children:"Loading app settings..."}):e("div",{class:"space-y-4",children:[e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-700 mb-1",children:"Application Name"}),e("input",{type:"text",value:Z.app_name||"",onChange:x=>D(w=>({...w,app_name:x.target.value})),disabled:!Q,class:`w-full px-3 py-2 border ${Q?"border-gray-300":"border-gray-200 bg-gray-50"} rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"My Vibebase App"}),e("p",{class:"mt-1 text-sm text-gray-500",children:"Used as User-Agent for OAuth providers"})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-700 mb-1",children:"Application URL (optional)"}),e("input",{type:"url",value:Z.app_url||"",onChange:x=>D(w=>({...w,app_url:x.target.value})),disabled:!Q,class:`w-full px-3 py-2 border ${Q?"border-gray-300":"border-gray-200 bg-gray-50"} rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"https://myapp.com"})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-700 mb-1",children:"Support Email (optional)"}),e("input",{type:"email",value:Z.support_email||"",onChange:x=>D(w=>({...w,support_email:x.target.value})),disabled:!Q,class:`w-full px-3 py-2 border ${Q?"border-gray-300":"border-gray-200 bg-gray-50"} rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"support@myapp.com"})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-700 mb-1",children:"Application Description (optional)"}),e("textarea",{value:Z.app_description||"",onChange:x=>D(w=>({...w,app_description:x.target.value})),disabled:!Q,rows:3,class:`w-full px-3 py-2 border ${Q?"border-gray-300":"border-gray-200 bg-gray-50"} rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"A brief description of your application"})]}),Q&&e("div",{class:"flex gap-3 pt-4",children:[e("button",{onClick:()=>{oe(!1);const x={};le.forEach(w=>{x[w.key]=w.value}),D(x)},disabled:me,class:"px-4 py-2 border border-gray-300 text-gray-700 text-sm font-medium rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-300",children:"Cancel"}),e("button",{onClick:Pe,disabled:me,class:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-300 disabled:opacity-50",children:me?"Saving...":"Save Settings"})]})]})]})}),t==="admins"&&e("div",{class:"bg-white shadow rounded-lg",children:e("div",{class:"px-4 py-5 sm:p-6",children:[e("h3",{class:"text-lg font-medium text-gray-900 mb-4",children:"Admin Management"}),d&&e("div",{class:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:e("p",{class:"text-sm text-red-600",children:d})}),e("form",{onSubmit:Ve,class:"mb-6",children:e("div",{class:"flex gap-2",children:[e("input",{type:"text",value:g,onInput:x=>p(x.target.value),placeholder:"GitHub username (e.g., meso)",class:"flex-1 border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:E}),e("button",{type:"submit",disabled:E||!g.trim(),class:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:E?"Adding...":"Add Admin"})]})}),a?e("div",{class:"text-center py-4",children:e("p",{class:"text-gray-500",children:"Loading admins..."})}):e("div",{class:"space-y-2",children:[e("h4",{class:"text-sm font-medium text-gray-700 mb-2",children:"Current Admins"}),r.length===0?e("p",{class:"text-sm text-gray-500",children:"No admins found"}):e("div",{class:"space-y-2",children:r.map(x=>e("div",{class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e("div",{class:"flex items-center space-x-3",children:e("div",{children:[e("p",{class:"text-sm font-medium text-gray-900",children:[x.github_username,x.is_root&&e("span",{class:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Root Admin"})]}),e("p",{class:"text-xs text-gray-500",children:["Added ",new Date(x.created_at).toLocaleDateString()]})]})}),!x.is_root&&e("button",{onClick:()=>m({id:x.id,username:x.github_username}),class:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Remove"})]},x.id))})]})]})}),t==="api-keys"&&e("div",{class:"bg-white shadow rounded-lg",children:e("div",{class:"px-4 py-5 sm:p-6",children:[e("div",{class:"flex items-center justify-between mb-4",children:[e("h3",{class:"text-lg font-medium text-gray-900",children:"API Keys"}),e("div",{class:"flex items-center space-x-2",children:e("button",{onClick:()=>L(!0),class:"px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500",children:"Create API Key"})})]}),$&&e("div",{class:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:e("p",{class:"text-sm text-red-600",children:$})}),k?e("div",{class:"text-center py-4",children:e("p",{class:"text-gray-500",children:"Loading API keys..."})}):e("div",{class:"space-y-2",children:A.length===0?e("p",{class:"text-sm text-gray-500",children:"No API keys found. Create one to get started."}):e("div",{class:"space-y-3",children:A.map(x=>e("div",{class:"border border-gray-200 rounded-lg p-4",children:e("div",{class:"flex items-start justify-between",children:[e("div",{class:"flex-1",children:[e("div",{class:"flex items-center space-x-2 mb-2",children:[e("h4",{class:"text-sm font-medium text-gray-900",children:x.name}),e("span",{class:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${x.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.is_active?"Active":"Revoked"})]}),e("div",{class:"text-sm text-gray-600 space-y-1",children:[e("p",{children:[e("span",{class:"font-medium",children:"Key:"})," ",x.key_prefix]}),e("p",{children:[e("span",{class:"font-medium",children:"Scopes:"})," ",x.scopes.join(", ")]}),e("p",{children:[e("span",{class:"font-medium",children:"Created:"})," ",new Date(x.created_at).toLocaleDateString()]}),x.expires_at&&e("p",{children:[e("span",{class:"font-medium",children:"Expires:"})," ",new Date(x.expires_at).toLocaleDateString()]}),x.last_used_at&&e("p",{children:[e("span",{class:"font-medium",children:"Last used:"})," ",new Date(x.last_used_at).toLocaleDateString()]})]})]}),x.is_active&&e("button",{onClick:()=>j({id:x.id,name:x.name}),class:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Revoke"})]})},x.id))})})]})}),_&&e("div",{class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e("div",{class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e("div",{class:"mt-3",children:[e("h3",{class:"text-lg font-medium text-gray-900 mb-4",children:"Create New API Key"}),e("form",{onSubmit:Ee,children:[e("div",{class:"space-y-4",children:[e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),e("input",{type:"text",value:H.name,onInput:x=>ne(w=>({...w,name:x.target.value})),placeholder:"My Backend Service",class:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-700 mb-2",children:"Permissions"}),e("div",{class:"space-y-2 max-h-32 overflow-y-auto",children:ae.map(x=>e("label",{class:"flex items-center",children:[e("input",{type:"checkbox",checked:H.scopes.includes(x),onChange:()=>$e(x),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e("span",{class:"ml-2 text-sm text-gray-700",children:x})]},x))})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-700 mb-1",children:"Expires in (days)"}),e("select",{value:H.expires_in_days||"",onChange:x=>ne(w=>({...w,expires_in_days:x.target.value?parseInt(x.target.value):void 0})),class:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e("option",{value:"7",children:"7 days"}),e("option",{value:"30",children:"30 days"}),e("option",{value:"90",children:"90 days"}),e("option",{value:"365",children:"1 year"}),e("option",{value:"",children:"Never"})]})]})]}),e("div",{class:"flex space-x-3 mt-6",children:[e("button",{type:"button",onClick:()=>L(!1),class:"flex-1 px-4 py-2 bg-gray-500 text-white text-sm font-medium rounded-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-300",children:"Cancel"}),e("button",{type:"submit",class:"flex-1 px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-300",children:"Create Key"})]})]})]})})})]})]}),G&&e("div",{class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e("div",{class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e("div",{class:"mt-3",children:[e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4",children:e("svg",{class:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})})}),e("h3",{class:"text-lg font-medium text-gray-900 text-center mb-4",children:"API Key Created"}),e("div",{class:"bg-yellow-50 border border-yellow-200 rounded-md p-4 mb-4",children:[e("p",{class:"text-sm text-yellow-800 mb-2",children:[e("strong",{children:"Important:"})," Save this key securely. It will not be shown again."]}),e("div",{class:"bg-white p-3 rounded border",children:e("code",{class:"text-sm break-all",children:G.key})})]}),e("div",{class:"text-sm text-gray-600 space-y-1 mb-4",children:[e("p",{children:[e("strong",{children:"Name:"})," ",G.name]}),e("p",{children:[e("strong",{children:"Scopes:"})," ",G.scopes.join(", ")]}),G.expires_at&&e("p",{children:[e("strong",{children:"Expires:"})," ",new Date(G.expires_at).toLocaleDateString()]})]}),e("button",{onClick:()=>re(null),class:"w-full px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-300",children:"I've saved the key safely"})]})})}),J&&e("div",{class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e("div",{class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e("div",{class:"mt-3 text-center",children:[e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:e("svg",{class:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 19.5c-.77.833.192 2.5 1.732 2.5z"})})}),e("h3",{class:"text-lg font-medium text-gray-900 mt-2",children:"Revoke API Key"}),e("div",{class:"mt-2 px-7 py-3",children:e("p",{class:"text-sm text-gray-500",children:['Are you sure you want to revoke the API key "',J.name,'"? This action cannot be undone and will immediately disable the key.']})}),e("div",{class:"items-center px-4 py-3",children:e("div",{class:"flex space-x-3",children:[e("button",{onClick:()=>j(null),class:"flex-1 px-4 py-2 bg-gray-500 text-white text-base font-medium rounded-md shadow-sm hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-300",children:"Cancel"}),e("button",{onClick:()=>We(J.id),class:"flex-1 px-4 py-2 bg-red-600 text-white text-base font-medium rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-300",children:"Revoke"})]})})]})})}),b&&e("div",{class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e("div",{class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e("div",{class:"mt-3 text-center",children:[e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:e("svg",{class:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 19.5c-.77.833.192 2.5 1.732 2.5z"})})}),e("h3",{class:"text-lg font-medium text-gray-900 mt-2",children:"Remove Admin"}),e("div",{class:"mt-2 px-7 py-3",children:e("p",{class:"text-sm text-gray-500",children:['Are you sure you want to remove admin "',b.username,'"? This action cannot be undone.']})}),e("div",{class:"items-center px-4 py-3",children:e("div",{class:"flex space-x-3",children:[e("button",{onClick:()=>m(null),class:"flex-1 px-4 py-2 bg-gray-500 text-white text-base font-medium rounded-md shadow-sm hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-300",children:"Cancel"}),e("button",{onClick:()=>Ce(b.id),class:"flex-1 px-4 py-2 bg-red-600 text-white text-base font-medium rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-300",children:"Remove"})]})})]})})})]})}function dr(){return e(Yn,{children:e(ln,{children:[e(Ae,{path:"/",component:er}),e(Ae,{path:"/database",component:or}),e(Ae,{path:"/storage",component:ir}),e(Ae,{path:"/auth",component:lr}),e(Ae,{path:"/settings",component:cr})]})})}Fn(e(dr,{}),document.getElementById("app"));
//# sourceMappingURL=index-C76W1l5o.js.map
