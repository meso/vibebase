(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function r(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(i){if(i.ep)return;i.ep=!0;const l=r(i);fetch(i.href,l)}})();var Se,N,Ot,ue,$t,Pt,Mt,Ut,nt,Ge,Ze,zt,je={},Bt=[],En=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ne=Array.isArray;function ne(t,n){for(var r in n)t[r]=n[r];return t}function rt(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function De(t,n,r){var s,i,l,d={};for(l in n)l=="key"?s=n[l]:l=="ref"?i=n[l]:d[l]=n[l];if(arguments.length>2&&(d.children=arguments.length>3?Se.call(arguments,2):r),typeof t=="function"&&t.defaultProps!=null)for(l in t.defaultProps)d[l]===void 0&&(d[l]=t.defaultProps[l]);return $e(t,d,s,i,null)}function $e(t,n,r,s,i){var l={type:t,props:n,key:r,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++Ot,__i:-1,__u:0};return i==null&&N.vnode!=null&&N.vnode(l),l}function Re(t){return t.children}function Te(t,n){this.props=t,this.context=n}function xe(t,n){if(n==null)return t.__?xe(t.__,t.__i+1):null;for(var r;n<t.__k.length;n++)if((r=t.__k[n])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?xe(t):null}function Ht(t){var n,r;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,n=0;n<t.__k.length;n++)if((r=t.__k[n])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return Ht(t)}}function Xe(t){(!t.__d&&(t.__d=!0)&&ue.push(t)&&!Ie.__r++||$t!=N.debounceRendering)&&(($t=N.debounceRendering)||Pt)(Ie)}function Ie(){for(var t,n,r,s,i,l,d,m=1;ue.length;)ue.length>m&&ue.sort(Mt),t=ue.shift(),m=ue.length,t.__d&&(r=void 0,i=(s=(n=t).__v).__e,l=[],d=[],n.__P&&((r=ne({},s)).__v=s.__v+1,N.vnode&&N.vnode(r),ot(n.__P,r,s,n.__n,n.__P.namespaceURI,32&s.__u?[i]:null,l,i??xe(s),!!(32&s.__u),d),r.__v=s.__v,r.__.__k[r.__i]=r,Vt(l,r,d),r.__e!=i&&Ht(r)));Ie.__r=0}function qt(t,n,r,s,i,l,d,m,x,g,v){var c,_,f,$,E,j,C=s&&s.__k||Bt,k=n.length;for(x=jn(r,n,C,x,k),c=0;c<k;c++)(f=r.__k[c])!=null&&(_=f.__i==-1?je:C[f.__i]||je,f.__i=c,j=ot(t,f,_,i,l,d,m,x,g,v),$=f.__e,f.ref&&_.ref!=f.ref&&(_.ref&&st(_.ref,null,f),v.push(f.ref,f.__c||$,f)),E==null&&$!=null&&(E=$),4&f.__u||_.__k===f.__k?x=Wt(f,x,t):typeof f.type=="function"&&j!==void 0?x=j:$&&(x=$.nextSibling),f.__u&=-7);return r.__e=E,x}function jn(t,n,r,s,i){var l,d,m,x,g,v=r.length,c=v,_=0;for(t.__k=new Array(i),l=0;l<i;l++)(d=n[l])!=null&&typeof d!="boolean"&&typeof d!="function"?(x=l+_,(d=t.__k[l]=typeof d=="string"||typeof d=="number"||typeof d=="bigint"||d.constructor==String?$e(null,d,null,null,null):Ne(d)?$e(Re,{children:d},null,null,null):d.constructor==null&&d.__b>0?$e(d.type,d.props,d.key,d.ref?d.ref:null,d.__v):d).__=t,d.__b=t.__b+1,m=null,(g=d.__i=Sn(d,r,x,c))!=-1&&(c--,(m=r[g])&&(m.__u|=2)),m==null||m.__v==null?(g==-1&&(i>v?_--:i<v&&_++),typeof d.type!="function"&&(d.__u|=4)):g!=x&&(g==x-1?_--:g==x+1?_++:(g>x?_--:_++,d.__u|=4))):t.__k[l]=null;if(c)for(l=0;l<v;l++)(m=r[l])!=null&&!(2&m.__u)&&(m.__e==s&&(s=xe(m)),Gt(m,m));return s}function Wt(t,n,r){var s,i;if(typeof t.type=="function"){for(s=t.__k,i=0;s&&i<s.length;i++)s[i]&&(s[i].__=t,n=Wt(s[i],n,r));return n}t.__e!=n&&(n&&t.type&&!r.contains(n)&&(n=xe(t)),r.insertBefore(t.__e,n||null),n=t.__e);do n=n&&n.nextSibling;while(n!=null&&n.nodeType==8);return n}function Qe(t,n){return n=n||[],t==null||typeof t=="boolean"||(Ne(t)?t.some(function(r){Qe(r,n)}):n.push(t)),n}function Sn(t,n,r,s){var i,l,d=t.key,m=t.type,x=n[r];if(x===null&&t.key==null||x&&d==x.key&&m==x.type&&!(2&x.__u))return r;if(s>(x!=null&&!(2&x.__u)?1:0))for(i=r-1,l=r+1;i>=0||l<n.length;){if(i>=0){if((x=n[i])&&!(2&x.__u)&&d==x.key&&m==x.type)return i;i--}if(l<n.length){if((x=n[l])&&!(2&x.__u)&&d==x.key&&m==x.type)return l;l++}}return-1}function Tt(t,n,r){n[0]=="-"?t.setProperty(n,r??""):t[n]=r==null?"":typeof r!="number"||En.test(n)?r:r+"px"}function Fe(t,n,r,s,i){var l,d;e:if(n=="style")if(typeof r=="string")t.style.cssText=r;else{if(typeof s=="string"&&(t.style.cssText=s=""),s)for(n in s)r&&n in r||Tt(t.style,n,"");if(r)for(n in r)s&&r[n]==s[n]||Tt(t.style,n,r[n])}else if(n[0]=="o"&&n[1]=="n")l=n!=(n=n.replace(Ut,"$1")),d=n.toLowerCase(),n=d in t||n=="onFocusOut"||n=="onFocusIn"?d.slice(2):n.slice(2),t.l||(t.l={}),t.l[n+l]=r,r?s?r.u=s.u:(r.u=nt,t.addEventListener(n,l?Ze:Ge,l)):t.removeEventListener(n,l?Ze:Ge,l);else{if(i=="http://www.w3.org/2000/svg")n=n.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(n!="width"&&n!="height"&&n!="href"&&n!="list"&&n!="form"&&n!="tabIndex"&&n!="download"&&n!="rowSpan"&&n!="colSpan"&&n!="role"&&n!="popover"&&n in t)try{t[n]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&n[4]!="-"?t.removeAttribute(n):t.setAttribute(n,n=="popover"&&r==1?"":r))}}function Et(t){return function(n){if(this.l){var r=this.l[n.type+t];if(n.t==null)n.t=nt++;else if(n.t<r.u)return;return r(N.event?N.event(n):n)}}}function ot(t,n,r,s,i,l,d,m,x,g){var v,c,_,f,$,E,j,C,k,W,y,D,B,re,V,X,ee,H=n.type;if(n.constructor!=null)return null;128&r.__u&&(x=!!(32&r.__u),l=[m=n.__e=r.__e]),(v=N.__b)&&v(n);e:if(typeof H=="function")try{if(C=n.props,k="prototype"in H&&H.prototype.render,W=(v=H.contextType)&&s[v.__c],y=v?W?W.props.value:v.__:s,r.__c?j=(c=n.__c=r.__c).__=c.__E:(k?n.__c=c=new H(C,y):(n.__c=c=new Te(C,y),c.constructor=H,c.render=Dn),W&&W.sub(c),c.props=C,c.state||(c.state={}),c.context=y,c.__n=s,_=c.__d=!0,c.__h=[],c._sb=[]),k&&c.__s==null&&(c.__s=c.state),k&&H.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=ne({},c.__s)),ne(c.__s,H.getDerivedStateFromProps(C,c.__s))),f=c.props,$=c.state,c.__v=n,_)k&&H.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),k&&c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(k&&H.getDerivedStateFromProps==null&&C!==f&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(C,y),!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(C,c.__s,y)===!1||n.__v==r.__v){for(n.__v!=r.__v&&(c.props=C,c.state=c.__s,c.__d=!1),n.__e=r.__e,n.__k=r.__k,n.__k.some(function(T){T&&(T.__=n)}),D=0;D<c._sb.length;D++)c.__h.push(c._sb[D]);c._sb=[],c.__h.length&&d.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(C,c.__s,y),k&&c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(f,$,E)})}if(c.context=y,c.props=C,c.__P=t,c.__e=!1,B=N.__r,re=0,k){for(c.state=c.__s,c.__d=!1,B&&B(n),v=c.render(c.props,c.state,c.context),V=0;V<c._sb.length;V++)c.__h.push(c._sb[V]);c._sb=[]}else do c.__d=!1,B&&B(n),v=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++re<25);c.state=c.__s,c.getChildContext!=null&&(s=ne(ne({},s),c.getChildContext())),k&&!_&&c.getSnapshotBeforeUpdate!=null&&(E=c.getSnapshotBeforeUpdate(f,$)),X=v,v!=null&&v.type===Re&&v.key==null&&(X=Jt(v.props.children)),m=qt(t,Ne(X)?X:[X],n,r,s,i,l,d,m,x,g),c.base=n.__e,n.__u&=-161,c.__h.length&&d.push(c),j&&(c.__E=c.__=null)}catch(T){if(n.__v=null,x||l!=null)if(T.then){for(n.__u|=x?160:128;m&&m.nodeType==8&&m.nextSibling;)m=m.nextSibling;l[l.indexOf(m)]=null,n.__e=m}else for(ee=l.length;ee--;)rt(l[ee]);else n.__e=r.__e,n.__k=r.__k;N.__e(T,n,r)}else l==null&&n.__v==r.__v?(n.__k=r.__k,n.__e=r.__e):m=n.__e=Nn(r.__e,n,r,s,i,l,d,x,g);return(v=N.diffed)&&v(n),128&n.__u?void 0:m}function Vt(t,n,r){for(var s=0;s<r.length;s++)st(r[s],r[++s],r[++s]);N.__c&&N.__c(n,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(l){l.call(i)})}catch(l){N.__e(l,i.__v)}})}function Jt(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:Ne(t)?t.map(Jt):ne({},t)}function Nn(t,n,r,s,i,l,d,m,x){var g,v,c,_,f,$,E,j=r.props,C=n.props,k=n.type;if(k=="svg"?i="http://www.w3.org/2000/svg":k=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),l!=null){for(g=0;g<l.length;g++)if((f=l[g])&&"setAttribute"in f==!!k&&(k?f.localName==k:f.nodeType==3)){t=f,l[g]=null;break}}if(t==null){if(k==null)return document.createTextNode(C);t=document.createElementNS(i,k,C.is&&C),m&&(N.__m&&N.__m(n,l),m=!1),l=null}if(k==null)j===C||m&&t.data==C||(t.data=C);else{if(l=l&&Se.call(t.childNodes),j=r.props||je,!m&&l!=null)for(j={},g=0;g<t.attributes.length;g++)j[(f=t.attributes[g]).name]=f.value;for(g in j)if(f=j[g],g!="children"){if(g=="dangerouslySetInnerHTML")c=f;else if(!(g in C)){if(g=="value"&&"defaultValue"in C||g=="checked"&&"defaultChecked"in C)continue;Fe(t,g,null,f,i)}}for(g in C)f=C[g],g=="children"?_=f:g=="dangerouslySetInnerHTML"?v=f:g=="value"?$=f:g=="checked"?E=f:m&&typeof f!="function"||j[g]===f||Fe(t,g,f,j[g],i);if(v)m||c&&(v.__html==c.__html||v.__html==t.innerHTML)||(t.innerHTML=v.__html),n.__k=[];else if(c&&(t.innerHTML=""),qt(n.type=="template"?t.content:t,Ne(_)?_:[_],n,r,s,k=="foreignObject"?"http://www.w3.org/1999/xhtml":i,l,d,l?l[0]:r.__k&&xe(r,0),m,x),l!=null)for(g=l.length;g--;)rt(l[g]);m||(g="value",k=="progress"&&$==null?t.removeAttribute("value"):$!=null&&($!==t[g]||k=="progress"&&!$||k=="option"&&$!=j[g])&&Fe(t,g,$,j[g],i),g="checked",E!=null&&E!=t[g]&&Fe(t,g,E,j[g],i))}return t}function st(t,n,r){try{if(typeof t=="function"){var s=typeof t.__u=="function";s&&t.__u(),s&&n==null||(t.__u=t(n))}else t.current=n}catch(i){N.__e(i,r)}}function Gt(t,n,r){var s,i;if(N.unmount&&N.unmount(t),(s=t.ref)&&(s.current&&s.current!=t.__e||st(s,null,n)),(s=t.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(l){N.__e(l,n)}s.base=s.__P=null}if(s=t.__k)for(i=0;i<s.length;i++)s[i]&&Gt(s[i],n,r||typeof t.type!="function");r||rt(t.__e),t.__c=t.__=t.__e=void 0}function Dn(t,n,r){return this.constructor(t,r)}function Ln(t,n,r){var s,i,l,d;n==document&&(n=document.documentElement),N.__&&N.__(t,n),i=(s=!1)?null:n.__k,l=[],d=[],ot(n,t=n.__k=De(Re,null,[t]),i||je,je,n.namespaceURI,i?null:n.firstChild?Se.call(n.childNodes):null,l,i?i.__e:n.firstChild,s,d),Vt(l,t,d)}function Fn(t,n,r){var s,i,l,d,m=ne({},t.props);for(l in t.type&&t.type.defaultProps&&(d=t.type.defaultProps),n)l=="key"?s=n[l]:l=="ref"?i=n[l]:m[l]=n[l]===void 0&&d!=null?d[l]:n[l];return arguments.length>2&&(m.children=arguments.length>3?Se.call(arguments,2):r),$e(t.type,m,s||t.key,i||t.ref,null)}function An(t){function n(r){var s,i;return this.getChildContext||(s=new Set,(i={})[n.__c]=this,this.getChildContext=function(){return i},this.componentWillUnmount=function(){s=null},this.shouldComponentUpdate=function(l){this.props.value!=l.value&&s.forEach(function(d){d.__e=!0,Xe(d)})},this.sub=function(l){s.add(l);var d=l.componentWillUnmount;l.componentWillUnmount=function(){s&&s.delete(l),d&&d.call(l)}}),r.children}return n.__c="__cC"+zt++,n.__=t,n.Provider=n.__l=(n.Consumer=function(r,s){return r.children(s)}).contextType=n,n}Se=Bt.slice,N={__e:function(t,n,r,s){for(var i,l,d;n=n.__;)if((i=n.__c)&&!i.__)try{if((l=i.constructor)&&l.getDerivedStateFromError!=null&&(i.setState(l.getDerivedStateFromError(t)),d=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,s||{}),d=i.__d),d)return i.__E=i}catch(m){t=m}throw t}},Ot=0,Te.prototype.setState=function(t,n){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=ne({},this.state),typeof t=="function"&&(t=t(ne({},r),this.props)),t&&ne(r,t),t!=null&&this.__v&&(n&&this._sb.push(n),Xe(this))},Te.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Xe(this))},Te.prototype.render=Re,ue=[],Pt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Mt=function(t,n){return t.__v.__b-n.__v.__b},Ie.__r=0,Ut=/(PointerCapture)$|Capture$/i,nt=0,Ge=Et(!1),Ze=Et(!0),zt=0;var In=0;function e(t,n,r,s,i,l){n||(n={});var d,m,x=n;if("ref"in x)for(m in x={},n)m=="ref"?d=n[m]:x[m]=n[m];var g={type:t,props:x,key:r,ref:d,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--In,__i:-1,__u:0,__source:i,__self:l};if(typeof t=="function"&&(d=t.defaultProps))for(m in d)x[m]===void 0&&(x[m]=d[m]);return N.vnode&&N.vnode(g),g}var ye,O,He,jt,Ke=0,Zt=[],M=N,St=M.__b,Nt=M.__r,Dt=M.diffed,Lt=M.__c,Ft=M.unmount,At=M.__;function Oe(t,n){M.__h&&M.__h(O,t,Ke||n),Ke=0;var r=O.__H||(O.__H={__:[],__h:[]});return t>=r.__.length&&r.__.push({}),r.__[t]}function w(t){return Ke=1,Kn(Qt,t)}function Kn(t,n,r){var s=Oe(ye++,2);if(s.t=t,!s.__c&&(s.__=[Qt(void 0,n),function(m){var x=s.__N?s.__N[0]:s.__[0],g=s.t(x,m);x!==g&&(s.__N=[g,s.__[1]],s.__c.setState({}))}],s.__c=O,!O.__f)){var i=function(m,x,g){if(!s.__c.__H)return!0;var v=s.__c.__H.__.filter(function(_){return!!_.__c});if(v.every(function(_){return!_.__N}))return!l||l.call(this,m,x,g);var c=s.__c.props!==m;return v.forEach(function(_){if(_.__N){var f=_.__[0];_.__=_.__N,_.__N=void 0,f!==_.__[0]&&(c=!0)}}),l&&l.call(this,m,x,g)||c};O.__f=!0;var l=O.shouldComponentUpdate,d=O.componentWillUpdate;O.componentWillUpdate=function(m,x,g){if(this.__e){var v=l;l=void 0,i(m,x,g),l=v}d&&d.call(this,m,x,g)},O.shouldComponentUpdate=i}return s.__N||s.__}function le(t,n){var r=Oe(ye++,3);!M.__s&&Xt(r.__H,n)&&(r.__=t,r.u=n,O.__H.__h.push(r))}function It(t){return Ke=5,Rn(function(){return{current:t}},[])}function Rn(t,n){var r=Oe(ye++,7);return Xt(r.__H,n)&&(r.__=t(),r.__H=n,r.__h=t),r.__}function On(t){var n=O.context[t.__c],r=Oe(ye++,9);return r.c=t,n?(r.__==null&&(r.__=!0,n.sub(O)),n.props.value):t.__}function Pn(){for(var t;t=Zt.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Ae),t.__H.__h.forEach(Ye),t.__H.__h=[]}catch(n){t.__H.__h=[],M.__e(n,t.__v)}}M.__b=function(t){O=null,St&&St(t)},M.__=function(t,n){t&&n.__k&&n.__k.__m&&(t.__m=n.__k.__m),At&&At(t,n)},M.__r=function(t){Nt&&Nt(t),ye=0;var n=(O=t.__c).__H;n&&(He===O?(n.__h=[],O.__h=[],n.__.forEach(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(n.__h.forEach(Ae),n.__h.forEach(Ye),n.__h=[],ye=0)),He=O},M.diffed=function(t){Dt&&Dt(t);var n=t.__c;n&&n.__H&&(n.__H.__h.length&&(Zt.push(n)!==1&&jt===M.requestAnimationFrame||((jt=M.requestAnimationFrame)||Mn)(Pn)),n.__H.__.forEach(function(r){r.u&&(r.__H=r.u),r.u=void 0})),He=O=null},M.__c=function(t,n){n.some(function(r){try{r.__h.forEach(Ae),r.__h=r.__h.filter(function(s){return!s.__||Ye(s)})}catch(s){n.some(function(i){i.__h&&(i.__h=[])}),n=[],M.__e(s,r.__v)}}),Lt&&Lt(t,n)},M.unmount=function(t){Ft&&Ft(t);var n,r=t.__c;r&&r.__H&&(r.__H.__.forEach(function(s){try{Ae(s)}catch(i){n=i}}),r.__H=void 0,n&&M.__e(n,r.__v))};var Kt=typeof requestAnimationFrame=="function";function Mn(t){var n,r=function(){clearTimeout(s),Kt&&cancelAnimationFrame(n),setTimeout(t)},s=setTimeout(r,35);Kt&&(n=requestAnimationFrame(r))}function Ae(t){var n=O,r=t.__c;typeof r=="function"&&(t.__c=void 0,r()),O=n}function Ye(t){var n=O;t.__c=t.__(),O=n}function Xt(t,n){return!t||t.length!==n.length||n.some(function(r,s){return r!==t[s]})}function Qt(t,n){return typeof n=="function"?n(t):n}var Un={};function ke(t,n){for(var r in n)t[r]=n[r];return t}function et(t,n,r){var s,i=/(?:\?([^#]*))?(#.*)?$/,l=t.match(i),d={};if(l&&l[1])for(var m=l[1].split("&"),x=0;x<m.length;x++){var g=m[x].split("=");d[decodeURIComponent(g[0])]=decodeURIComponent(g.slice(1).join("="))}t=tt(t.replace(i,"")),n=tt(n||"");for(var v=Math.max(t.length,n.length),c=0;c<v;c++)if(n[c]&&n[c].charAt(0)===":"){var _=n[c].replace(/(^:|[+*?]+$)/g,""),f=(n[c].match(/[+*?]+$/)||Un)[0]||"",$=~f.indexOf("+"),E=~f.indexOf("*"),j=t[c]||"";if(!j&&!E&&(f.indexOf("?")<0||$)){s=!1;break}if(d[_]=decodeURIComponent(j),$||E){d[_]=t.slice(c).map(decodeURIComponent).join("/");break}}else if(n[c]!==t[c]){s=!1;break}return(r.default===!0||s!==!1)&&d}function zn(t,n){return t.rank<n.rank?1:t.rank>n.rank?-1:t.index-n.index}function Bn(t,n){return t.index=n,t.rank=function(r){return r.props.default?0:tt(r.props.path).map(Hn).join("")}(t),t.props}function tt(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function Hn(t){return t.charAt(0)==":"?1+"*+?".indexOf(t.charAt(t.length-1))||4:5}var qn={},he=[],Ee=[],G=null,it={url:at()},Yt=An(it);function Wn(){var t=On(Yt);if(t===it){var n=w()[1];le(function(){return Ee.push(n),function(){return Ee.splice(Ee.indexOf(n),1)}},[])}return[t,en]}function at(){var t;return""+((t=G&&G.location?G.location:G&&G.getCurrentLocation?G.getCurrentLocation():typeof location<"u"?location:qn).pathname||"")+(t.search||"")}function en(t,n){return n===void 0&&(n=!1),typeof t!="string"&&t.url&&(n=t.replace,t=t.url),function(r){for(var s=he.length;s--;)if(he[s].canRoute(r))return!0;return!1}(t)&&function(r,s){s===void 0&&(s="push"),G&&G[s]?G[s](r):typeof history<"u"&&history[s+"State"]&&history[s+"State"](null,null,r)}(t,n?"replace":"push"),tn(t)}function tn(t){for(var n=!1,r=0;r<he.length;r++)he[r].routeTo(t)&&(n=!0);return n}function Vn(t){if(t&&t.getAttribute){var n=t.getAttribute("href"),r=t.getAttribute("target");if(n&&n.match(/^\//g)&&(!r||r.match(/^_?self$/i)))return en(n)}}function Jn(t){return t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.stopPropagation&&t.stopPropagation(),t.preventDefault(),!1}function nn(t){if(!(t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||t.button)){var n=t.target;do if(n.localName==="a"&&n.getAttribute("href")){if(n.hasAttribute("data-native")||n.hasAttribute("native"))return;if(Vn(n))return Jn(t)}while(n=n.parentNode)}}var Rt=!1;function rn(t){t.history&&(G=t.history),this.state={url:t.url||at()}}ke(rn.prototype=new Te,{shouldComponentUpdate:function(t){return t.static!==!0||t.url!==this.props.url||t.onChange!==this.props.onChange},canRoute:function(t){var n=Qe(this.props.children);return this.g(n,t)!==void 0},routeTo:function(t){this.setState({url:t});var n=this.canRoute(t);return this.p||this.forceUpdate(),n},componentWillMount:function(){this.p=!0},componentDidMount:function(){var t=this;Rt||(Rt=!0,G||addEventListener("popstate",function(){tn(at())}),addEventListener("click",nn)),he.push(this),G&&(this.u=G.listen(function(n){var r=n.location||n;t.routeTo(""+(r.pathname||"")+(r.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),he.splice(he.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(t,n){t=t.filter(Bn).sort(zn);for(var r=0;r<t.length;r++){var s=t[r],i=et(n,s.props.path,s.props);if(i)return[s,i]}},render:function(t,n){var r,s,i=t.onChange,l=n.url,d=this.c,m=this.g(Qe(t.children),l);if(m&&(s=Fn(m[0],ke(ke({url:l,matches:r=m[1]},r),{key:void 0,ref:void 0}))),l!==(d&&d.url)){ke(it,d=this.c={url:l,previous:d&&d.url,current:s,path:s?s.props.path:null,matches:r}),d.router=this,d.active=s?[s]:[];for(var x=Ee.length;x--;)Ee[x]({});typeof i=="function"&&i(d)}return De(Yt.Provider,{value:d},s)}});var Gn=function(t){return De("a",ke({onClick:nn},t))},we=function(t){return De(t.component,t)},Zn=["className","activeClass","activeClassName","path"];function Xn(t){var n=t.className,r=t.activeClass,s=t.activeClassName,i=t.path,l=function(v,c){if(v==null)return{};var _,f,$={},E=Object.keys(v);for(f=0;f<E.length;f++)c.indexOf(_=E[f])>=0||($[_]=v[_]);return $}(t,Zn),d=Wn()[0],m=i&&d.path&&et(d.path,i,{})||et(d.url,l.href,{}),x=l.class||n||"",g=m&&(r||s)||"";return l.class=x+(x&&g&&" ")+g,De(Gn,l)}function on(t){var n,r,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(n=0;n<i;n++)t[n]&&(r=on(t[n]))&&(s&&(s+=" "),s+=r)}else for(r in t)t[r]&&(s&&(s+=" "),s+=r);return s}function Qn(){for(var t,n,r=0,s="",i=arguments.length;r<i;r++)(t=arguments[r])&&(n=on(t))&&(s&&(s+=" "),s+=n);return s}function Yn({children:t}){return e("div",{class:"min-h-screen bg-gray-50",children:[e("nav",{class:"bg-white shadow-sm border-b",children:e("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e("div",{class:"flex justify-between h-16",children:[e("div",{class:"flex",children:[e("div",{class:"flex-shrink-0 flex items-center",children:e("h1",{class:"text-xl font-bold text-gray-900",children:"Viveforge"})}),e("div",{class:"hidden sm:ml-6 sm:flex sm:space-x-8",children:[e(Ce,{href:"/",children:"Dashboard"}),e(Ce,{href:"/database",children:"Database"}),e(Ce,{href:"/storage",children:"Storage"}),e(Ce,{href:"/auth",children:"Auth"}),e(Ce,{href:"/settings",children:"Settings"})]})]}),e("div",{class:"flex items-center space-x-4",children:e("a",{href:"/api/docs/swagger",target:"_blank",rel:"noopener noreferrer",class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"📚 API Docs"})})]})})}),e("main",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t})]})}function Ce({href:t,children:n}){return e(Xn,{href:t,class:Qn("inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium","hover:border-gray-300 hover:text-gray-700"),activeClassName:"border-indigo-500 text-gray-900",inactiveClassName:"border-transparent text-gray-500",children:n})}const S=window.location.origin,A={async health(){return(await fetch(`${S}/api/health`)).json()},async getItems(){const t=await fetch(`${S}/api/items`);if(!t.ok)throw new Error("Failed to fetch items");return t.json()},async createItem(t){const n=await fetch(`${S}/api/items`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error("Failed to create item");return n.json()},async updateItem(t,n){const r=await fetch(`${S}/api/items/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok)throw new Error("Failed to update item");return r.json()},async deleteItem(t){const n=await fetch(`${S}/api/items/${t}`,{method:"DELETE"});if(!n.ok)throw new Error("Failed to delete item");return n.json()},async getTables(){const t=await fetch(`${S}/api/tables`);if(!t.ok)throw new Error("Failed to fetch tables");return t.json()},async getTableSchema(t){const n=await fetch(`${S}/api/tables/${t}/schema`);if(!n.ok)throw new Error("Failed to fetch table schema");return n.json()},async getTableData(t,n=100,r=0){const s=await fetch(`${S}/api/tables/${t}/data?limit=${n}&offset=${r}`);if(!s.ok)throw new Error("Failed to fetch table data");return s.json()},async createTable(t,n){const r=await fetch(`${S}/api/tables`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,columns:n})});if(!r.ok){const s=await r.json();throw new Error(s.error||"Failed to create table")}return r.json()},async dropTable(t){const n=await fetch(`${S}/api/tables/${t}`,{method:"DELETE"});if(!n.ok){const r=await n.json();throw new Error(r.error||"Failed to drop table")}return n.json()},async executeSQL(t,n=[]){const r=await fetch(`${S}/api/tables/query`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sql:t,params:n})});if(!r.ok){const s=await r.json();throw new Error(s.error||"Failed to execute SQL")}return r.json()},async addColumn(t,n){const r=await fetch(`${S}/api/tables/${t}/columns`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok){const s=await r.json();throw new Error(s.error||"Failed to add column")}return r.json()},async renameColumn(t,n,r){const s=await fetch(`${S}/api/tables/${t}/columns/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldName:n,newName:r})});if(!s.ok){const i=await s.json();throw new Error(i.error||"Failed to rename column")}return s.json()},async dropColumn(t,n){const r=await fetch(`${S}/api/tables/${t}/columns/${n}`,{method:"DELETE"});if(!r.ok){const s=await r.json();throw new Error(s.error||"Failed to drop column")}return r.json()},async modifyColumn(t,n,r){const s=await fetch(`${S}/api/tables/${t}/columns/${n}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok){const i=await s.json();throw new Error(i.error||"Failed to modify column")}return s.json()},async validateColumnChanges(t,n,r){const s=await fetch(`${S}/api/tables/${t}/columns/${n}/validate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok){const i=await s.json();throw new Error(i.error||"Failed to validate column changes")}return s.json()},async updateRecord(t,n,r){const s=await fetch(`${S}/api/tables/${t}/data/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok){const i=await s.json();throw new Error(i.error||"Failed to update record")}return s.json()},async getSnapshots(t=20,n=0){const r=await fetch(`${S}/api/snapshots?limit=${t}&offset=${n}`);if(!r.ok)throw new Error("Failed to fetch snapshots");return r.json()},async getSnapshot(t){const n=await fetch(`${S}/api/snapshots/${t}`);if(!n.ok)throw new Error("Failed to fetch snapshot");return n.json()},async createSnapshot(t){const n=await fetch(`${S}/api/snapshots`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const r=await n.json();throw new Error(r.error||"Failed to create snapshot")}return n.json()},async restoreSnapshot(t){const n=await fetch(`${S}/api/snapshots/${t}/restore`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!n.ok){const r=await n.json().catch(()=>({error:"Failed to restore snapshot"}));throw new Error(r.error||"Failed to restore snapshot")}return n.json()},async deleteSnapshot(t){const n=await fetch(`${S}/api/snapshots/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!n.ok){const r=await n.json().catch(()=>({error:"Failed to delete snapshot"}));throw new Error(r.error||"Failed to delete snapshot")}return n.json()},async compareSnapshots(t,n){const r=await fetch(`${S}/api/snapshots/compare/${t}/${n}`);if(!r.ok)throw new Error("Failed to compare snapshots");return r.json()},async getTableIndexes(t){const n=await fetch(`${S}/api/tables/${t}/indexes`);if(!n.ok){const r=await n.json();throw new Error(r.error||"Failed to fetch table indexes")}return n.json()},async getAllIndexes(){const t=await fetch(`${S}/api/tables/indexes`);if(!t.ok){const n=await t.json();throw new Error(n.error||"Failed to fetch all indexes")}return t.json()},async createIndex(t,n){const r=await fetch(`${S}/api/tables/${t}/indexes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok){const s=await r.json();throw new Error(s.error||"Failed to create index")}return r.json()},async dropIndex(t,n){const r=await fetch(`${S}/api/tables/${t}/indexes/${n}`,{method:"DELETE"});if(!r.ok){const s=await r.json();throw new Error(s.error||"Failed to drop index")}return r.json()}};function er(){const[t,n]=w({userTables:0,systemTables:0,dbStatus:"checking..."});le(()=>{r()},[]);const r=async()=>{try{const s=await A.health(),i=await A.getTables(),l=i.tables.filter(m=>m.type==="user").length,d=i.tables.filter(m=>m.type==="system").length;n({userTables:l,systemTables:d,dbStatus:s.database==="connected"?"connected":"disconnected"})}catch(s){console.error("Failed to load stats:",s),n(i=>({...i,dbStatus:"error"}))}};return e("div",{children:[e("h2",{class:"text-2xl font-bold text-gray-900 mb-6",children:"Dashboard"}),e("div",{class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[e(qe,{title:"Database Tables",description:"User-defined tables in D1",href:"/database",stats:`${t.userTables} tables`,status:t.dbStatus}),e(qe,{title:"System Tables",description:"Protected system tables",href:"/database",stats:`${t.systemTables} tables`}),e(qe,{title:"Storage",description:"R2 object storage (coming soon)",href:"/storage",stats:"Not configured"})]}),e("div",{class:"mt-8",children:[e("h3",{class:"text-lg font-medium text-gray-900 mb-4",children:"Quick Actions"}),e("div",{class:"bg-white overflow-hidden shadow rounded-lg",children:e("div",{class:"px-4 py-5 sm:p-6",children:e("div",{class:"space-y-3",children:[e("a",{href:"/database",class:"text-indigo-600 hover:text-indigo-500 block",children:"Create new table →"}),e("a",{href:"/database",class:"text-indigo-600 hover:text-indigo-500 block",children:"Browse database →"}),e("a",{href:"/api/health",target:"_blank",class:"text-indigo-600 hover:text-indigo-500 block",children:"View API health →"})]})})})]}),e("div",{class:"mt-8",children:[e("h3",{class:"text-lg font-medium text-gray-900 mb-4",children:"API Endpoints"}),e("div",{class:"bg-white overflow-hidden shadow rounded-lg",children:e("div",{class:"px-4 py-5 sm:p-6",children:e("div",{class:"space-y-2 text-sm",children:[e("div",{class:"flex justify-between",children:[e("code",{class:"text-gray-600",children:"GET /api/health"}),e("span",{class:"text-green-600",children:"Health check"})]}),e("div",{class:"flex justify-between",children:[e("code",{class:"text-gray-600",children:"GET /api/tables"}),e("span",{class:"text-green-600",children:"List tables"})]}),e("div",{class:"flex justify-between",children:[e("code",{class:"text-gray-600",children:"POST /api/tables"}),e("span",{class:"text-green-600",children:"Create table"})]}),e("div",{class:"flex justify-between",children:[e("code",{class:"text-gray-600",children:"GET /api/tables/:name/data"}),e("span",{class:"text-green-600",children:"Get table data"})]})]})})})]})]})}function qe({title:t,description:n,href:r,stats:s,status:i}){return e("div",{class:"bg-white overflow-hidden shadow rounded-lg",children:e("div",{class:"px-4 py-5 sm:p-6",children:[e("div",{class:"flex items-center justify-between",children:[e("dt",{class:"text-sm font-medium text-gray-500 truncate",children:t}),i&&e("span",{class:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${i==="connected"?"bg-green-100 text-green-800":i==="error"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:i})]}),e("dd",{class:"mt-1 text-3xl font-semibold text-gray-900",children:s}),e("p",{class:"mt-2 text-sm text-gray-600",children:n}),e("a",{href:r,class:"mt-3 text-indigo-600 hover:text-indigo-500 text-sm font-medium inline-block",children:"Manage →"})]})})}function We({size:t="sm"}){return e("svg",{class:`animate-spin ${t==="sm"?"h-4 w-4":"h-6 w-6"} text-white`,fill:"none",viewBox:"0 0 24 24",children:[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}function tr({onClose:t,onRestore:n}){const[r,s]=w([]),[i,l]=w(null),[d,m]=w(!0),[x,g]=w(null),[v,c]=w(!1),[_,f]=w({name:"",description:""}),[$,E]=w(null),[j,C]=w(null),[k,W]=w(null),[y,D]=w(!1),[B,re]=w(!1),[V,X]=w(!1);le(()=>{ee()},[]),le(()=>{const p=I=>{if(k){const se=I.target;!se.closest("[data-menu-container]")&&!se.closest("[data-menu-button]")&&W(null)}};return document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}},[k]);const ee=async()=>{try{m(!0),g(null);const p=await A.getSnapshots();s(p.snapshots)}catch(p){g(p instanceof Error?p.message:"Failed to load data")}finally{m(!1)}},H=async p=>{p.preventDefault();try{g(null),D(!0),await A.createSnapshot(_),c(!1),f({name:"",description:""}),await ee()}catch(I){g(I instanceof Error?I.message:"Failed to create snapshot")}finally{D(!1)}},T=async()=>{if($)try{g(null),re(!0),await A.restoreSnapshot($),E(null),n&&n(),t()}catch(p){g(p instanceof Error?p.message:"Failed to restore"),E(null)}finally{re(!1)}},oe=async()=>{if(j)try{g(null),X(!0),await A.deleteSnapshot(j),C(null),W(null),await ee()}catch(p){g(p instanceof Error?p.message:"Failed to delete snapshot"),C(null)}finally{X(!1)}},Q=p=>new Date(p+"Z").toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1,timeZoneName:"short"}),fe=p=>{const I=new Date(p+"Z"),me=new Date().getTime()-I.getTime(),te=Math.floor(me/(1e3*60*60*24)),J=Math.floor(me%(1e3*60*60*24)/(1e3*60*60));return te>0?`${te} day${te>1?"s":""} ago`:J>0?`${J} hour${J>1?"s":""} ago`:"Just now"};return e("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e("div",{class:"bg-white rounded-lg w-full max-w-6xl mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[e("div",{class:"px-6 py-4 border-b flex items-center justify-between",children:[e("h2",{class:"text-xl font-semibold text-gray-900",children:"Schema Snapshots"}),e("button",{onClick:t,class:"text-gray-400 hover:text-gray-600",children:e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})})})]}),x&&e("div",{class:"mx-6 mt-4 bg-red-50 border border-red-200 rounded-md p-4",children:e("div",{class:"text-sm text-red-700",children:x})}),e("div",{class:"mx-6 mt-4 bg-blue-50 border border-blue-200 rounded-md p-4",children:e("div",{class:"flex",children:[e("div",{class:"flex-shrink-0",children:e("svg",{class:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})})}),e("div",{class:"ml-3",children:[e("h3",{class:"text-sm font-medium text-blue-800",children:"💡 CloudflareのTime Travel機能について"}),e("p",{class:"mt-1 text-sm text-blue-700",children:["Cloudflareの管理画面から、D1データベースを過去の任意の時点（無料プランで7日間、有料プランで30日間）に復元できるTime Travel機能が利用可能です。 詳しくは",e("a",{href:"https://developers.cloudflare.com/d1/reference/time-travel/",target:"_blank",rel:"noopener noreferrer",class:"font-medium underline hover:no-underline",children:"Cloudflare D1 Time Travelドキュメント"}),"をご確認ください。"]})]})]})}),e("div",{class:"flex-1 overflow-auto p-6",children:d?e("div",{class:"text-center py-8",children:e("div",{class:"text-gray-500",children:"Loading..."})}):e("div",{children:[!v&&e("div",{class:"mb-6",children:e("button",{onClick:()=>c(!0),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[e("svg",{class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})}),"Create Snapshot"]})}),v&&e("div",{class:"mb-6 bg-gray-50 rounded-lg p-4",children:[e("h3",{class:"text-sm font-medium text-gray-900 mb-3",children:"Create New Snapshot"}),e("form",{onSubmit:H,children:e("div",{class:"space-y-3",children:[e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-700",children:"Name"}),e("input",{type:"text",value:_.name,onInput:p=>f({..._,name:p.target.value}),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"e.g., Before major refactoring"})]}),e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-700",children:"Description"}),e("textarea",{value:_.description,onInput:p=>f({..._,description:p.target.value}),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",rows:2,placeholder:"Optional description of current state"})]}),e("div",{class:"flex space-x-3",children:[e("button",{type:"submit",disabled:y,class:`inline-flex justify-center items-center space-x-2 py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${y?"bg-indigo-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:[y&&e(We,{size:"sm"}),e("span",{children:y?"Creating...":"Create"})]}),e("button",{type:"button",onClick:()=>{c(!1),f({name:"",description:""})},class:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})})]}),e("div",{class:"space-y-3",children:r.length===0?e("div",{class:"text-center py-8 text-gray-500",children:"No snapshots yet. Create your first snapshot to start tracking schema changes."}):r.map(p=>e("div",{class:`border rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer ${(i==null?void 0:i.id)===p.id?"border-indigo-500 bg-indigo-50":"border-gray-200"}`,onClick:()=>l(p),children:e("div",{class:"flex items-start justify-between",children:[e("div",{class:"flex-1",children:[e("div",{class:"flex items-center space-x-3",children:[e("h4",{class:"text-sm font-medium text-gray-900",children:p.name||`Snapshot v${p.version}`}),e("span",{class:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p.snapshotType==="manual"?"bg-blue-100 text-blue-800":p.snapshotType==="auto"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:p.snapshotType})]}),p.description&&e("p",{class:"mt-1 text-sm text-gray-600",children:p.description}),e("div",{class:"mt-2 flex items-center space-x-4 text-xs text-gray-500",children:[e("span",{children:["Version ",p.version]}),e("span",{children:Q(p.createdAt)}),e("span",{children:fe(p.createdAt)})]})]}),e("div",{class:"ml-4 flex items-center space-x-2",children:[e("button",{onClick:I=>{I.stopPropagation(),E(p.id)},class:"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Restore"}),e("div",{class:"relative",children:[e("button",{onClick:I=>{I.stopPropagation(),W(k===p.id?null:p.id)},"data-menu-button":"true",class:"inline-flex items-center p-1.5 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 rounded-md",children:e("svg",{class:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),k===p.id&&e("div",{class:"absolute right-0 top-full mt-1 w-32 bg-white rounded-md shadow-lg border border-gray-200 z-10","data-menu-container":"true",children:e("div",{class:"py-1",children:e("button",{onClick:I=>{I.preventDefault(),I.stopPropagation(),W(null),C(p.id)},class:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 focus:outline-none",children:e("div",{class:"flex items-center space-x-2",children:[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),e("span",{children:"Delete"})]})})})})]})]})]})},p.id))})]})}),$&&e("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e("div",{class:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e("div",{class:"flex items-center mb-4",children:[e("div",{class:"flex-shrink-0",children:e("svg",{class:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e("div",{class:"ml-3",children:e("h3",{class:"text-lg font-medium text-gray-900",children:"Confirm Restore"})})]}),e("div",{class:"mb-6",children:[e("p",{class:"text-sm text-gray-700",children:"This will restore your database schema to the selected snapshot. All current tables and data will be replaced."}),e("p",{class:"text-sm text-red-600 mt-2 font-medium",children:"This action cannot be undone. Make sure you have a backup of your current data."})]}),e("div",{class:"flex space-x-3",children:[e("button",{onClick:T,disabled:B,class:`inline-flex justify-center items-center space-x-2 py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 ${B?"bg-red-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700"}`,children:[B&&e(We,{size:"sm"}),e("span",{children:B?"Restoring...":"Restore"})]}),e("button",{onClick:()=>E(null),disabled:B,class:`inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${B?"text-gray-400 bg-gray-100 cursor-not-allowed":"text-gray-700 bg-white hover:bg-gray-50"}`,children:"Cancel"})]})]})}),j&&e("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e("div",{class:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e("div",{class:"flex items-center mb-4",children:[e("div",{class:"flex-shrink-0",children:e("svg",{class:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e("div",{class:"ml-3",children:e("h3",{class:"text-lg font-medium text-gray-900",children:"Delete Snapshot"})})]}),e("div",{class:"mb-6",children:e("p",{class:"text-sm text-gray-700",children:"Are you sure you want to delete this snapshot? This action cannot be undone."})}),e("div",{class:"flex space-x-3",children:[e("button",{onClick:oe,disabled:V,class:`inline-flex justify-center items-center space-x-2 py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 ${V?"bg-red-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700"}`,children:[V&&e(We,{size:"sm"}),e("span",{children:V?"Deleting...":"Delete"})]}),e("button",{onClick:()=>C(null),disabled:V,class:`inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${V?"text-gray-400 bg-gray-100 cursor-not-allowed":"text-gray-700 bg-white hover:bg-gray-50"}`,children:"Cancel"})]})]})})]})})}const nr=t=>t?t.length>8?`${t.substring(0,4)}...`:t:"-",rr=["admins","sessions","schema_snapshots","schema_snapshot_counter","d1_migrations"],Ve=t=>t.filter(n=>!rr.includes(n.name)),Je=(t,n)=>{const r=n.filter(s=>s.trim()!=="").join("_");return`idx_${t}_${r}`.toLowerCase()},or=async t=>{try{return await navigator.clipboard.writeText(t),!0}catch{try{const r=document.createElement("textarea");r.value=t,document.body.appendChild(r),r.focus(),r.select();const s=document.execCommand("copy");return document.body.removeChild(r),s}catch(r){return console.error("Failed to copy to clipboard:",r),!1}}};function sr(){var gt,pt,xt,yt,bt;const[t,n]=w([]),[r,s]=w(null),[i,l]=w([]),[d,m]=w([]),[x,g]=w([]),[v,c]=w(!1),[_,f]=w(null),[$,E]=w(!1),[j,C]=w(!1),[k,W]=w({}),[y,D]=w({name:"",columns:[{name:"",type:"TEXT",notNull:!1,foreignKey:{enabled:!1,table:"",column:""}}],indexes:[]}),[B,re]=w(null),[V,X]=w(null),[ee,H]=w(!1),[T,oe]=w({name:"",type:"TEXT",notNull:!1,foreignKey:{enabled:!1,table:"",column:""}}),[Q,fe]=w(null),[p,I]=w(null),[se,me]=w(null),[te,J]=w(null),[U,be]=w(null),[P,ce]=w(null),[sn,Pe]=w({}),[Z,Me]=w({}),an=It(null),Ue=It(!1),[ln,lt]=w(!1),[ct,cn]=w([]),[ze,Be]=w(!1),[z,ae]=w({name:"",columns:[""],unique:!1});le(()=>{if(r&&z.columns.some(o=>o.trim()!=="")){const o=Je(r,z.columns);ae(a=>({...a,name:o}))}},[r,z.columns]);const dt=o=>o?new Date(o+"Z").toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1,timeZoneName:"short"}):"-";le(()=>{Le()},[]),le(()=>{r&&(ge(),ie(),E(!1),C(!1),H(!1))},[r]),le(()=>{const o=()=>{re(null)};return document.addEventListener("click",o),()=>document.removeEventListener("click",o)},[]);const Le=async()=>{try{c(!0);const o=await A.getTables();n(o.tables),f(null)}catch(o){f(o instanceof Error?o.message:"Failed to load tables")}finally{c(!1)}},ie=async()=>{if(r)try{const o=await A.getTableSchema(r);m(o.columns),g(o.foreignKeys||[]);const a=await A.getTableIndexes(r);cn(a.indexes);const h={};o.columns.forEach(u=>{["id","created_at","updated_at"].includes(u.name)||(h[u.name]="")}),W(h)}catch(o){console.error("Failed to load table schema:",o)}},ge=async()=>{if(r)try{c(!0);const o=await A.getTableData(r);l(o.data),f(null)}catch(o){f(o instanceof Error?o.message:"Failed to load table data")}finally{c(!1)}},dn=async o=>{if(o.preventDefault(),!!r)try{const a=Object.fromEntries(Object.entries(k).map(([u,b])=>[u,b===""?null:b]));console.log("Sending record data:",a);const h=await fetch(`${window.location.origin}/api/tables/${r}/data`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!h.ok){const u=await h.json();throw new Error(u.error||`HTTP ${h.status}: Failed to create record`)}await ge(),E(!1),f(null)}catch(a){if(console.error("Create record error:",a),a instanceof Error){let h=a.message;if(a.message.includes("FOREIGN KEY constraint failed"))h="Foreign key constraint failed: The referenced record does not exist";else if(a.message.includes("NOT NULL constraint failed")){const u=a.message.match(/NOT NULL constraint failed: (\w+)\.(\w+)/);u?h=`Required field "${u[2]}" cannot be empty`:h="A required field cannot be empty"}else if(a.message.includes("UNIQUE constraint failed")){const u=a.message.match(/UNIQUE constraint failed: (\w+)\.(\w+)/);u?h=`Value for "${u[2]}" must be unique`:h="This value must be unique"}f(h)}else f("Failed to create record")}},un=async o=>{r&&J({title:"Delete Record",message:"Are you sure you want to delete this record? This action cannot be undone.",variant:"danger",onConfirm:async()=>{J(null);try{await fetch(`${window.location.origin}/api/tables/${r}/data/${o}`,{method:"DELETE"}),await ge()}catch(a){f(a instanceof Error?a.message:"Failed to delete record")}}})},hn=async o=>{o.preventDefault();try{const a=y.columns.filter(h=>h.name).map(h=>{var u,b,F;return{name:h.name,type:h.type,constraints:h.notNull?"NOT NULL":void 0,...(u=h.foreignKey)!=null&&u.enabled&&((b=h.foreignKey)!=null&&b.table)&&((F=h.foreignKey)!=null&&F.column)?{foreignKey:{table:h.foreignKey.table,column:h.foreignKey.column}}:{}}});console.log("Creating table:",y.name,"with columns:",a),await A.createTable(y.name,a);for(const h of y.indexes)if(h.name&&h.columns.length>0&&h.columns.some(u=>u.trim()!==""))try{await A.createIndex(y.name,{name:h.name,columns:h.columns.filter(u=>u.trim()!==""),unique:h.unique})}catch(u){console.warn("Failed to create index:",u)}await Le(),C(!1),D({name:"",columns:[{name:"",type:"TEXT",notNull:!1,foreignKey:{enabled:!1,table:"",column:""}}],indexes:[]}),f(null)}catch(a){f(a instanceof Error?a.message:"Failed to create table")}},fn=async o=>{J({title:"Drop Table",message:`Are you sure you want to drop the table "${o}"? This action cannot be undone.`,variant:"danger",onConfirm:async()=>{J(null);try{await A.dropTable(o),await Le(),r===o&&(s(null),l([]))}catch(a){f(a instanceof Error?a.message:"Failed to drop table")}}})},mn=async(o,a,h)=>{if(await or(o)){const b=`${a}-${h}`;X(b),setTimeout(()=>X(null),2e3)}},gn=async(o,a,h,u)=>{o.metaKey||o.ctrlKey?await pn(a,u):await mn(a,h,u)},pn=async(o,a)=>{const h=await xn(o,a);h&&(s(h),setTimeout(()=>{const u=document.querySelector(`[data-record-id="${o}"]`);u&&(u.scrollIntoView({behavior:"smooth",block:"center"}),u.classList.add("bg-yellow-100"),setTimeout(()=>u.classList.remove("bg-yellow-100"),2e3))},500))},xn=async(o,a)=>{if(a.endsWith("_id")){const h=a.replace("_id","")+"s",u=t.find(b=>b.name===h);if(u)return u.name}for(const h of t)try{if((await A.getTableData(h.name,1,0)).data.some(F=>F.id===o))return h.name}catch{}return null},yn=async o=>{var a,h,u;if(o.preventDefault(),!!r)try{const b={name:T.name,type:T.type,constraints:T.notNull?"NOT NULL":void 0,...(a=T.foreignKey)!=null&&a.enabled&&((h=T.foreignKey)!=null&&h.table)&&((u=T.foreignKey)!=null&&u.column)?{foreignKey:{table:T.foreignKey.table,column:T.foreignKey.column}}:{}};await A.addColumn(r,b),await ie(),oe({name:"",type:"TEXT",notNull:!1,foreignKey:{enabled:!1,table:"",column:""}}),f(null)}catch(b){f(b instanceof Error?b.message:"Failed to add column")}},ut=async(o,a)=>{if(!(!r||!a||o===a))try{await A.renameColumn(r,o,a),await ie(),fe(null),f(null)}catch(h){f(h instanceof Error?h.message:"Failed to rename column")}},bn=async o=>{r&&J({title:"Drop Column",message:`Are you sure you want to drop the column "${o}"? This action cannot be undone.`,variant:"danger",onConfirm:async()=>{J(null);try{await A.dropColumn(r,o),await ie(),f(null)}catch(a){f(a instanceof Error?a.message:"Failed to drop column")}}})},_n=async(o,a)=>{if(r)try{const h=await A.validateColumnChanges(r,o,a);if(!h.valid){me({errors:h.errors,conflictingRows:h.conflictingRows,onConfirm:async()=>{me(null);try{await A.modifyColumn(r,o,a),await ie(),I(null),f(null)}catch(u){f(u instanceof Error?u.message:"Failed to modify column")}}});return}await A.modifyColumn(r,o,a),await ie(),I(null),f(null)}catch(h){f(h instanceof Error?h.message:"Failed to modify column")}},q=o=>x.find(a=>a.from===o)||null,ht=async(o,a)=>{if(!o.trim())return null;const h=`${a.table}-${o}`;Me(u=>({...u,[h]:{isValid:!1,isChecking:!0}}));try{const b=(await A.getTableData(a.table)).data.some(F=>F.id===o);return Me(F=>({...F,[h]:{isValid:b,isChecking:!1,displayName:b?`Valid ID in ${a.table}`:`ID not found in ${a.table}`}})),b}catch{return Me(b=>({...b,[h]:{isValid:!1,isChecking:!1,displayName:`Error checking ${a.table}`}})),!1}},vn=(o,a,h)=>{if(["id","created_at","updated_at"].includes(a))return;const u=d.find(F=>F.name===a);if(q(a)||!u){const F=i.find(L=>L.id===o);F&&ce({id:o,data:{...F}})}else Ue.current=!1,be({rowId:o,columnName:a,value:h})},ft=async(o,a,h)=>{if(r){be(null),l(u=>u.map(b=>b.id===o?{...b,[a]:h}:b));try{await A.updateRecord(r,o,{[a]:h}),f(null)}catch(u){f(u instanceof Error?u.message:"Failed to update record"),be({rowId:o,columnName:a,value:h}),await ge()}}},wn=()=>{be(null)},Cn=async()=>{if(!(!r||!P))try{const o={...P.data};delete o.id,delete o.created_at,delete o.updated_at,await A.updateRecord(r,P.id,o),await ge(),ce(null),f(null)}catch(o){f(o instanceof Error?o.message:"Failed to update record")}},kn=async o=>{if(o.preventDefault(),!!r)try{const a=z.columns.filter(h=>h.trim()!=="");if(a.length===0){f("At least one column is required for the index");return}await A.createIndex(r,{name:z.name,columns:a,unique:z.unique}),await ie(),ae({name:"",columns:[""],unique:!1}),Be(!1),f(null)}catch(a){f(a instanceof Error?a.message:"Failed to create index")}},$n=async o=>{r&&J({title:"Drop Index",message:`Are you sure you want to drop the index "${o}"? This action cannot be undone.`,variant:"danger",onConfirm:async()=>{J(null);try{await A.dropIndex(r,o),await ie(),f(null)}catch(a){f(a instanceof Error?a.message:"Failed to drop index")}}})},mt=t.filter(o=>o.type==="user"),Tn=t.filter(o=>o.type==="system");return e("div",{children:[e("div",{class:"sm:flex sm:items-center",children:[e("div",{class:"sm:flex-auto",children:[e("h2",{class:"text-2xl font-bold text-gray-900",children:"Database"}),e("p",{class:"mt-2 text-sm text-gray-700",children:"Manage your D1 database tables and data"})]}),e("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none flex space-x-3",children:[e("button",{type:"button",onClick:()=>lt(!0),class:"inline-flex items-center justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:w-auto",children:[e("svg",{class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"History"]}),e("button",{type:"button",onClick:()=>C(!0),class:"inline-flex items-center justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:w-auto",children:"Create Table"})]})]}),_&&!$&&e("div",{class:"mt-4 bg-red-50 border border-red-200 rounded-md p-4",children:[e("div",{class:"text-sm text-red-700",children:_}),e("button",{onClick:()=>f(null),class:"mt-2 text-xs text-red-600 hover:text-red-500",children:"Dismiss"})]}),j&&e("div",{class:"mt-6 bg-white shadow rounded-lg p-6",children:[e("h3",{class:"text-lg font-medium text-gray-900 mb-4",children:"Create New Table"}),e("form",{onSubmit:hn,children:[e("div",{class:"mb-4",children:[e("label",{class:"block text-sm font-medium text-gray-700",children:"Table Name"}),e("input",{type:"text",value:y.name,onInput:o=>D({...y,name:o.target.value}),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"my_table",pattern:"[a-zA-Z_][a-zA-Z0-9_]*",required:!0})]}),e("div",{class:"mb-4",children:[e("label",{class:"block text-sm font-medium text-gray-700 mb-2",children:"Columns"}),e("div",{class:"space-y-2",children:y.columns.map((o,a)=>{var h,u,b,F;return e("div",{children:[e("div",{class:"flex space-x-2",children:[e("input",{type:"text",value:o.name,onInput:L=>{const K=[...y.columns];K[a].name=L.target.value,D({...y,columns:K})},class:"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"column_name",pattern:"[a-zA-Z_][a-zA-Z0-9_]*"}),e("select",{value:o.type,onChange:L=>{const K=[...y.columns];K[a].type=L.target.value,D({...y,columns:K})},class:"border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[e("option",{value:"TEXT",children:"TEXT"}),e("option",{value:"INTEGER",children:"INTEGER"}),e("option",{value:"REAL",children:"REAL"}),e("option",{value:"BLOB",children:"BLOB"}),e("option",{value:"BOOLEAN",children:"BOOLEAN"})]}),e("label",{class:"flex items-center space-x-1",children:[e("input",{type:"checkbox",checked:o.notNull||!1,onChange:L=>{const K=[...y.columns];K[a].notNull=L.target.checked,D({...y,columns:K})},class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e("span",{class:"text-xs text-gray-700",children:"NN"})]}),e("label",{class:"flex items-center space-x-1",children:[e("input",{type:"checkbox",checked:((h=o.foreignKey)==null?void 0:h.enabled)||!1,onChange:L=>{const K=[...y.columns],de=L.target.checked;K[a].foreignKey={...K[a].foreignKey,enabled:de,column:de?"id":""},D({...y,columns:K})},class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e("span",{class:"text-xs text-gray-700",children:"FK"})]}),a>0&&e("button",{type:"button",onClick:()=>{const L=y.columns.filter((K,de)=>de!==a);D({...y,columns:L})},class:"text-red-600 hover:text-red-900 text-sm",children:"Remove"})]}),((u=o.foreignKey)==null?void 0:u.enabled)&&e("div",{class:"flex space-x-2 ml-4 mt-1",children:[e("select",{value:((b=o.foreignKey)==null?void 0:b.table)||"",onChange:L=>{const K=[...y.columns];K[a].foreignKey={...K[a].foreignKey,table:L.target.value},D({...y,columns:K})},class:"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[e("option",{value:"",children:"Select table..."}),Ve(t).map(L=>e("option",{value:L.name,children:L.name},L.name))]}),e("input",{type:"text",value:((F=o.foreignKey)==null?void 0:F.column)||"",onChange:L=>{const K=[...y.columns];K[a].foreignKey={...K[a].foreignKey,column:L.target.value},D({...y,columns:K})},placeholder:"id",class:"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})]},a)})}),e("button",{type:"button",onClick:()=>D({...y,columns:[...y.columns,{name:"",type:"TEXT",notNull:!1,foreignKey:{enabled:!1,table:"",column:""}}]}),class:"mt-2 text-sm text-indigo-600 hover:text-indigo-500",children:"Add Column"}),e("p",{class:"mt-2 text-xs text-gray-500",children:"Note: id, created_at, and updated_at columns will be added automatically"})]}),e("div",{class:"mb-4",children:[e("div",{class:"flex items-center justify-between mb-2",children:[e("label",{class:"block text-sm font-medium text-gray-700",children:"Indexes (Optional)"}),e("button",{type:"button",onClick:()=>{const o=y.columns.filter(h=>h.name.trim()!=="").map(h=>h.name),a=y.name?Je(y.name,o.slice(0,1)):"";D({...y,indexes:[...y.indexes,{name:a,columns:o.slice(0,1),unique:!1}]})},class:"text-sm text-indigo-600 hover:text-indigo-500",children:"Add Index"})]}),e("div",{class:"space-y-3",children:y.indexes.map((o,a)=>e("div",{class:"p-3 bg-gray-50 rounded-md",children:[e("div",{class:"flex space-x-2 mb-2",children:[e("input",{type:"text",value:o.name,onInput:h=>{const u=[...y.indexes];u[a].name=h.target.value,D({...y,indexes:u})},placeholder:"index_name",class:"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"}),e("label",{class:"flex items-center space-x-1",children:[e("input",{type:"checkbox",checked:o.unique,onChange:h=>{const u=[...y.indexes];u[a].unique=h.target.checked,D({...y,indexes:u})},class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e("span",{class:"text-xs text-gray-700",children:"Unique"})]}),e("button",{type:"button",onClick:()=>{const h=y.indexes.filter((u,b)=>b!==a);D({...y,indexes:h})},class:"text-red-600 hover:text-red-900 text-sm",children:"Remove"})]}),e("div",{class:"space-y-1",children:[e("label",{class:"text-xs text-gray-700",children:"Columns:"}),o.columns.map((h,u)=>e("div",{class:"flex space-x-2",children:[e("select",{value:h,onChange:b=>{const F=[...y.indexes];F[a].columns[u]=b.target.value,y.name&&(F[a].name=Je(y.name,F[a].columns.filter(L=>L.trim()!==""))),D({...y,indexes:F})},class:"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm",children:[e("option",{value:"",children:"Select column..."}),y.columns.filter(b=>b.name.trim()!=="").map(b=>e("option",{value:b.name,children:b.name},b.name))]}),o.columns.length>1&&e("button",{type:"button",onClick:()=>{const b=[...y.indexes];b[a].columns=b[a].columns.filter((F,L)=>L!==u),D({...y,indexes:b})},class:"text-red-600 hover:text-red-500 text-sm",children:"Remove"})]},u)),e("button",{type:"button",onClick:()=>{const h=[...y.indexes];h[a].columns.push(""),D({...y,indexes:h})},class:"text-xs text-indigo-600 hover:text-indigo-500",children:"Add Column"})]})]},a))})]}),e("div",{class:"flex space-x-3",children:[e("button",{type:"submit",class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Create"}),e("button",{type:"button",onClick:()=>{C(!1),D({name:"",columns:[{name:"",type:"TEXT",notNull:!1,foreignKey:{enabled:!1,table:"",column:""}}],indexes:[]}),f(null)},class:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})]}),e("div",{class:"mt-8 grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e("div",{class:"lg:col-span-1",children:e("div",{class:"bg-white shadow rounded-lg",children:e("div",{class:"px-4 py-5 sm:p-6",children:[e("h3",{class:"text-lg font-medium text-gray-900 mb-4",children:"Tables"}),v&&!r?e("div",{class:"text-sm text-gray-500",children:"Loading..."}):e("div",{class:"space-y-4",children:[e("div",{children:[e("h4",{class:"text-sm font-medium text-gray-700 mb-2",children:"User Tables"}),e("div",{class:"space-y-1",children:[mt.map(o=>e("div",{class:`flex items-center justify-between p-2 rounded hover:bg-gray-50 ${r===o.name?"bg-indigo-50 border border-indigo-200":""}`,children:[e("div",{class:"flex-1 cursor-pointer",onClick:()=>s(o.name),children:[e("div",{class:"text-sm font-medium text-gray-900",children:o.name}),e("div",{class:"text-xs text-gray-500",children:[o.rowCount||0," rows"]})]}),o.type==="user"&&e("div",{class:"relative",children:[e("button",{onClick:a=>{a.stopPropagation(),re(B===o.name?null:o.name)},class:"p-1 text-gray-400 hover:text-gray-600 rounded",children:e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),B===o.name&&e("div",{class:"absolute right-0 mt-1 w-24 bg-white border border-gray-200 rounded-md shadow-lg z-10",children:e("button",{onClick:a=>{a.stopPropagation(),fn(o.name),re(null)},class:"w-full px-3 py-2 text-xs text-left text-red-600 hover:bg-red-50",children:"Drop Table"})})]})]},o.name)),mt.length===0&&e("p",{class:"text-sm text-gray-500",children:"No user tables yet"})]})]}),e("div",{children:[e("h4",{class:"text-sm font-medium text-gray-700 mb-2",children:"System Tables"}),e("div",{class:"space-y-1",children:Tn.map(o=>e("div",{class:`flex items-center justify-between p-2 rounded cursor-pointer hover:bg-gray-50 ${r===o.name?"bg-indigo-50 border border-indigo-200":""}`,onClick:()=>s(o.name),children:[e("div",{children:[e("div",{class:"text-sm font-medium text-gray-900",children:o.name}),e("div",{class:"text-xs text-gray-500",children:[o.rowCount||0," rows"]})]}),e("span",{class:"text-xs text-gray-400",children:"Protected"})]},o.name))})]})]})]})})}),e("div",{class:"lg:col-span-2",children:r?e("div",{class:"bg-white shadow rounded-lg",children:e("div",{class:"px-4 py-5 sm:p-6",children:[e("div",{class:"flex items-center justify-between mb-4",children:[e("h3",{class:"text-lg font-medium text-gray-900",children:r}),((gt=t.find(o=>o.name===r))==null?void 0:gt.type)==="user"&&e("div",{class:"flex space-x-2",children:[e("button",{type:"button",onClick:()=>H(!ee),class:"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Edit Schema"}),e("button",{type:"button",onClick:()=>{const o={};d.forEach(a=>{["id","created_at","updated_at"].includes(a.name)||(o[a.name]="")}),W(o),f(null),E(!0)},class:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Add Record"})]})]}),ee&&e("div",{class:"mb-6 p-4 border border-gray-200 rounded-lg",children:[e("h4",{class:"text-sm font-medium text-gray-900 mb-3",children:"Table Schema"}),e("div",{class:"mb-4",children:[e("h5",{class:"text-xs font-medium text-gray-700 mb-2",children:"Columns"}),e("div",{class:"space-y-2",children:d.map(o=>e("div",{class:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[(Q==null?void 0:Q.oldName)===o.name?e("input",{type:"text",value:Q.newName,onInput:a=>fe({...Q,newName:a.target.value}),onKeyDown:a=>{a.key==="Enter"&&ut(Q.oldName,Q.newName),a.key==="Escape"&&fe(null)},onBlur:()=>ut(Q.oldName,Q.newName),class:"flex-1 text-sm border-gray-300 rounded px-2 py-1",autoFocus:!0}):e("div",{class:"flex-1",children:[e("span",{class:"text-sm font-medium text-gray-900",children:o.name}),e("span",{class:"ml-2 text-xs text-gray-500",children:o.type}),o.notnull?e("span",{class:"ml-1 text-xs text-red-500",children:"NOT NULL"}):null,o.pk?e("span",{class:"ml-1 text-xs text-blue-500",children:"PRIMARY KEY"}):null,q(o.name)&&e("span",{class:"ml-1 text-xs text-green-600",children:["FK → ",q(o.name).table,".",q(o.name).to]})]}),!["id","created_at","updated_at"].includes(o.name)&&e("div",{class:"flex space-x-2",children:[e("button",{onClick:()=>fe({oldName:o.name,newName:o.name}),class:"text-xs text-indigo-600 hover:text-indigo-500",children:"Rename"}),e("button",{onClick:()=>{const a=q(o.name);I({name:o.name,type:o.type,notNull:o.notnull===1,foreignKey:{enabled:!!a,table:(a==null?void 0:a.table)||"",column:(a==null?void 0:a.to)||""}})},class:"text-xs text-blue-600 hover:text-blue-500",children:"Modify"}),e("button",{onClick:()=>bn(o.name),class:"text-xs text-red-600 hover:text-red-500",children:"Drop"})]})]},o.name))})]}),e("div",{class:"border-t pt-4",children:[e("h5",{class:"text-xs font-medium text-gray-700 mb-2",children:"Add Column"}),e("form",{onSubmit:yn,children:[e("div",{class:"flex space-x-2",children:[e("input",{type:"text",value:T.name,onInput:o=>oe({...T,name:o.target.value}),placeholder:"column_name",pattern:"[a-zA-Z_][a-zA-Z0-9_]*",class:"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm",required:!0}),e("select",{value:T.type,onChange:o=>oe({...T,type:o.target.value}),class:"border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm",children:[e("option",{value:"TEXT",children:"TEXT"}),e("option",{value:"INTEGER",children:"INTEGER"}),e("option",{value:"REAL",children:"REAL"}),e("option",{value:"BLOB",children:"BLOB"}),e("option",{value:"BOOLEAN",children:"BOOLEAN"})]}),e("label",{class:"flex items-center space-x-1",children:[e("input",{type:"checkbox",checked:T.notNull,onChange:o=>oe({...T,notNull:o.target.checked}),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e("span",{class:"text-xs text-gray-700",children:"NN"})]}),e("label",{class:"flex items-center space-x-1",children:[e("input",{type:"checkbox",checked:(pt=T.foreignKey)==null?void 0:pt.enabled,onChange:o=>oe({...T,foreignKey:{...T.foreignKey,enabled:o.target.checked,column:o.target.checked?"id":""}}),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e("span",{class:"text-xs text-gray-700",children:"FK"})]}),e("button",{type:"submit",class:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Add"})]}),((xt=T.foreignKey)==null?void 0:xt.enabled)&&e("div",{class:"flex space-x-2 mt-2",children:[e("select",{value:((yt=T.foreignKey)==null?void 0:yt.table)||"",onChange:o=>oe({...T,foreignKey:{...T.foreignKey,table:o.target.value}}),class:"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm",children:[e("option",{value:"",children:"Select table..."}),Ve(t).map(o=>e("option",{value:o.name,children:o.name},o.name))]}),e("input",{type:"text",value:((bt=T.foreignKey)==null?void 0:bt.column)||"",onChange:o=>oe({...T,foreignKey:{...T.foreignKey,column:o.target.value}}),placeholder:"id",class:"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"})]})]})]}),e("div",{class:"border-t pt-4",children:[e("div",{class:"flex items-center justify-between mb-3",children:[e("h5",{class:"text-xs font-medium text-gray-700",children:"Indexes"}),e("button",{type:"button",onClick:()=>Be(!ze),class:"text-xs text-indigo-600 hover:text-indigo-500",children:ze?"Hide":"Manage Indexes"})]}),e("div",{class:"space-y-2 mb-3",children:[ct.map(o=>e("div",{class:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e("div",{class:"flex-1",children:[e("div",{class:"flex items-center space-x-2",children:[e("span",{class:"text-sm font-medium text-gray-900",children:o.name}),o.unique&&e("span",{class:"text-xs bg-blue-100 text-blue-800 px-2 py-0.5 rounded",children:"UNIQUE"})]}),e("div",{class:"text-xs text-gray-500",children:["Columns: ",o.columns.join(", ")]})]}),e("button",{onClick:()=>$n(o.name),class:"text-xs text-red-600 hover:text-red-500",children:"Drop"})]},o.name)),ct.length===0&&e("p",{class:"text-xs text-gray-500",children:"No custom indexes"})]}),ze&&e("form",{onSubmit:kn,class:"space-y-3 p-3 bg-blue-50 rounded-md",children:[e("h6",{class:"text-xs font-medium text-gray-700",children:"Create New Index"}),e("div",{children:e("input",{type:"text",value:z.name,onInput:o=>ae({...z,name:o.target.value}),placeholder:"index_name",pattern:"[a-zA-Z_][a-zA-Z0-9_]*",class:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm",required:!0})}),e("div",{class:"space-y-2",children:[e("label",{class:"text-xs text-gray-700",children:"Columns:"}),z.columns.map((o,a)=>e("div",{class:"flex space-x-2",children:[e("select",{value:o,onChange:h=>{const u=[...z.columns];u[a]=h.target.value,ae({...z,columns:u})},class:"flex-1 border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm",children:[e("option",{value:"",children:"Select column..."}),d.map(h=>e("option",{value:h.name,children:h.name},h.name))]}),z.columns.length>1&&e("button",{type:"button",onClick:()=>{const h=z.columns.filter((u,b)=>b!==a);ae({...z,columns:h})},class:"text-red-600 hover:text-red-500 text-sm",children:"Remove"})]},a)),e("button",{type:"button",onClick:()=>ae({...z,columns:[...z.columns,""]}),class:"text-xs text-indigo-600 hover:text-indigo-500",children:"Add Column"})]}),e("div",{children:e("label",{class:"flex items-center space-x-2",children:[e("input",{type:"checkbox",checked:z.unique,onChange:o=>ae({...z,unique:o.target.checked}),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e("span",{class:"text-sm text-gray-700",children:"Unique Index"})]})}),e("div",{class:"flex space-x-2",children:[e("button",{type:"submit",class:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Create Index"}),e("button",{type:"button",onClick:()=>{Be(!1),ae({name:"",columns:[""],unique:!1})},class:"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})]})]}),p&&e("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e("div",{class:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e("h4",{class:"text-lg font-medium text-gray-900 mb-4",children:["Modify Column: ",p.name]}),e("div",{class:"space-y-4",children:[e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-700",children:"Type"}),e("select",{value:p.type,onChange:o=>I({...p,type:o.target.value}),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[e("option",{value:"TEXT",children:"TEXT"}),e("option",{value:"INTEGER",children:"INTEGER"}),e("option",{value:"REAL",children:"REAL"}),e("option",{value:"BLOB",children:"BLOB"}),e("option",{value:"BOOLEAN",children:"BOOLEAN"})]})]}),e("div",{children:e("label",{class:"flex items-center space-x-2",children:[e("input",{type:"checkbox",checked:p.notNull,onChange:o=>I({...p,notNull:o.target.checked}),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e("span",{class:"text-sm text-gray-700",children:"NOT NULL"})]})}),e("div",{children:e("label",{class:"flex items-center space-x-2",children:[e("input",{type:"checkbox",checked:p.foreignKey.enabled,onChange:o=>I({...p,foreignKey:{...p.foreignKey,enabled:o.target.checked,column:o.target.checked?"id":""}}),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e("span",{class:"text-sm text-gray-700",children:"Foreign Key"})]})}),p.foreignKey.enabled&&e("div",{class:"space-y-2",children:[e("select",{value:p.foreignKey.table,onChange:o=>I({...p,foreignKey:{...p.foreignKey,table:o.target.value}}),class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[e("option",{value:"",children:"Select table..."}),Ve(t).map(o=>e("option",{value:o.name,children:o.name},o.name))]}),e("input",{type:"text",value:p.foreignKey.column,onChange:o=>I({...p,foreignKey:{...p.foreignKey,column:o.target.value}}),placeholder:"id",class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})]}),e("div",{class:"mt-6 flex space-x-3",children:[e("button",{onClick:()=>{var h,u;const o={};p.type!==((h=d.find(b=>b.name===p.name))==null?void 0:h.type)&&(o.type=p.type);const a=((u=d.find(b=>b.name===p.name))==null?void 0:u.notnull)===1;p.notNull!==a&&(o.notNull=p.notNull),p.foreignKey.enabled&&p.foreignKey.table&&p.foreignKey.column?o.foreignKey={table:p.foreignKey.table,column:p.foreignKey.column}:p.foreignKey.enabled||(o.foreignKey=null),_n(p.name,o)},class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Apply Changes"}),e("button",{onClick:()=>I(null),class:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})}),se&&e("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e("div",{class:"bg-white rounded-lg p-6 max-w-lg w-full mx-4",children:[e("div",{class:"flex items-center mb-4",children:[e("div",{class:"flex-shrink-0",children:e("svg",{class:"h-6 w-6 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e("div",{class:"ml-3",children:e("h3",{class:"text-lg font-medium text-gray-900",children:"Validation Warning"})})]}),e("div",{class:"mb-4",children:[e("p",{class:"text-sm text-gray-700 mb-3",children:"The following issues were found with your changes:"}),e("div",{class:"bg-yellow-50 border border-yellow-200 rounded-md p-3",children:[e("ul",{class:"list-disc list-inside space-y-1",children:se.errors.map((o,a)=>e("li",{class:"text-sm text-yellow-800",children:o},a))}),se.conflictingRows>0&&e("p",{class:"text-sm text-yellow-800 mt-2 font-medium",children:[se.conflictingRows," rows will be affected."]})]}),e("p",{class:"text-sm text-gray-600 mt-3",children:"Proceeding may result in data loss or corruption. Are you sure you want to continue?"})]}),e("div",{class:"flex space-x-3",children:[e("button",{onClick:se.onConfirm,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Proceed Anyway"}),e("button",{onClick:()=>me(null),class:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})}),te&&e("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e("div",{class:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e("div",{class:"flex items-center mb-4",children:[e("div",{class:"flex-shrink-0",children:te.variant==="danger"?e("svg",{class:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}):e("svg",{class:"h-6 w-6 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e("div",{class:"ml-3",children:e("h3",{class:"text-lg font-medium text-gray-900",children:te.title})})]}),e("div",{class:"mb-6",children:e("p",{class:"text-sm text-gray-700",children:te.message})}),e("div",{class:"flex space-x-3",children:[e("button",{onClick:te.onConfirm,class:`inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 ${te.variant==="danger"?"bg-red-600 hover:bg-red-700 focus:ring-red-500":"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500"}`,children:"Confirm"}),e("button",{onClick:()=>J(null),class:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})}),P&&e("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e("div",{class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[e("div",{class:"flex items-center justify-between mb-4",children:[e("h3",{class:"text-lg font-medium text-gray-900",children:"Edit Record"}),e("button",{onClick:()=>ce(null),class:"text-gray-400 hover:text-gray-600",children:e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e("div",{class:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:d.map(o=>{if(["id","created_at","updated_at"].includes(o.name))return e("div",{class:"sm:col-span-2",children:[e("label",{class:"block text-sm font-medium text-gray-500",children:[o.name," (read-only)"]}),e("div",{class:"mt-1 block w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-sm text-gray-500",children:o.name.includes("_at")&&P.data[o.name]?dt(P.data[o.name]):P.data[o.name]||"-"})]},o.name);const a=q(o.name);return e("div",{children:[e("label",{class:"block text-sm font-medium text-gray-700",children:[o.name,o.notnull?e("span",{class:"text-red-500 ml-1",children:"*"}):null,a&&e("span",{class:"text-green-600 ml-1 text-xs",children:["FK → ",a.table,".",a.to]})]}),a?e("div",{class:"relative",children:[e("input",{type:"text",value:P.data[o.name]||"",onInput:h=>{const u=h.target.value;ce({...P,data:{...P.data,[o.name]:u}}),u.trim()&&ht(u,a)},class:`mt-1 block w-full border rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${P.data[o.name]&&Z[`${a.table}-${P.data[o.name]}`]?Z[`${a.table}-${P.data[o.name]}`].isValid?"border-green-300 bg-green-50":"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:`Enter ${a.table} ID`,required:o.notnull===1}),P.data[o.name]&&Z[`${a.table}-${P.data[o.name]}`]&&e("div",{class:`absolute left-0 top-full mt-1 text-xs px-2 py-1 rounded ${Z[`${a.table}-${P.data[o.name]}`].isValid?"text-green-700 bg-green-100":"text-red-700 bg-red-100"}`,children:Z[`${a.table}-${P.data[o.name]}`].isChecking?"Checking...":Z[`${a.table}-${P.data[o.name]}`].displayName})]}):e("input",{type:o.type==="INTEGER"||o.type==="REAL"?"number":"text",value:P.data[o.name]||"",onInput:h=>ce({...P,data:{...P.data,[o.name]:h.target.value}}),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",required:o.notnull===1})]},o.name)})}),e("div",{class:"mt-6 flex space-x-3",children:[e("button",{onClick:Cn,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Save Changes"}),e("button",{onClick:()=>ce(null),class:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})}),$&&e("div",{class:"mb-6 p-4 border border-gray-200 rounded-lg",children:[e("h4",{class:"text-sm font-medium text-gray-900 mb-3",children:"Create New Record"}),e("form",{onSubmit:dn,children:[e("div",{class:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:Object.entries(k).map(([o,a])=>e("div",{children:[e("label",{class:"block text-xs font-medium text-gray-700",children:o}),e("input",{type:"text",value:a,onInput:h=>W({...k,[o]:h.target.value}),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]},o))}),_&&$&&e("div",{class:"mt-3 bg-red-50 border border-red-200 rounded-md p-3",children:e("div",{class:"flex",children:[e("div",{class:"flex-shrink-0",children:e("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})})}),e("div",{class:"ml-3",children:e("p",{class:"text-sm text-red-700",children:_})})]})}),e("div",{class:"mt-3 flex space-x-2",children:[e("button",{type:"submit",class:"inline-flex justify-center py-1.5 px-3 border border-transparent shadow-sm text-xs font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Create"}),e("button",{type:"button",onClick:()=>{E(!1),f(null)},class:"inline-flex justify-center py-1.5 px-3 border border-gray-300 shadow-sm text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})]}),v?e("div",{class:"text-center py-4 text-sm text-gray-500",children:"Loading data..."}):i.length===0?e("div",{class:"text-center py-8",children:e("p",{class:"text-sm text-gray-500",children:"No data in this table"})}):e("div",{class:"overflow-x-auto",children:e("table",{class:"min-w-full divide-y divide-gray-200",children:[e("thead",{class:"bg-gray-50",children:e("tr",{children:[d.map(o=>e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:o.name},o.name)),e("th",{class:"px-3 py-2"})]})}),e("tbody",{class:"bg-white divide-y divide-gray-200",children:i.map((o,a)=>{var h;return e("tr",{"data-record-id":o.id,children:[d.map(u=>{var b,F,L,K,de,_t,vt,wt;return e("td",{class:`px-3 py-2 whitespace-nowrap text-sm text-gray-900 select-text ${!["id","created_at","updated_at"].includes(u.name)&&((b=t.find(R=>R.name===r))==null?void 0:b.type)==="user"?"cursor-pointer hover:bg-gray-50":""}`,onClick:R=>{var Ct;const Y=`${o.id}-${u.name}`;if(["id","created_at","updated_at"].includes(u.name)||((Ct=t.find(ve=>ve.name===r))==null?void 0:Ct.type)!=="user")return;const _e=sn[Y];if(_e)clearTimeout(_e.timeout),Pe(ve=>{const pe={...ve};return delete pe[Y],pe}),R.preventDefault(),R.stopPropagation(),vn(o.id,u.name,o[u.name]);else{const ve=setTimeout(()=>{Pe(pe=>{const kt={...pe};return delete kt[Y],kt})},400);Pe(pe=>({...pe,[Y]:{count:1,timeout:ve}}))}},title:!["id","created_at","updated_at"].includes(u.name)&&((F=t.find(R=>R.name===r))==null?void 0:F.type)==="user"?"Double-click to edit":"",children:(U==null?void 0:U.rowId)===o.id&&(U==null?void 0:U.columnName)===u.name?e("div",{class:"relative",children:[e("input",{type:u.type==="INTEGER"||u.type==="REAL"?"number":"text",value:U.value||"",onInput:R=>{const Y=R.target.value;be({...U,value:Y});const _e=q(u.name);_e&&Y.trim()&&ht(Y,_e)},onKeyDown:R=>{R.key==="Enter"&&!R.isComposing&&ft(o.id,u.name,U.value),R.key==="Escape"&&wn()},onBlur:()=>ft(o.id,u.name,U.value),class:`w-full px-2 py-1 border rounded focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${q(u.name)&&U.value&&Z[`${(L=q(u.name))==null?void 0:L.table}-${U.value}`]?Z[`${(K=q(u.name))==null?void 0:K.table}-${U.value}`].isValid?"border-green-300 bg-green-50":"border-red-300 bg-red-50":"border-indigo-300"}`,ref:R=>{an.current=R,R&&!Ue.current&&(Ue.current=!0,setTimeout(()=>{R.focus();const Y=R.value.length;R.setSelectionRange(Y,Y)},0))}}),q(u.name)&&U.value&&Z[`${(de=q(u.name))==null?void 0:de.table}-${U.value}`]&&e("div",{class:`absolute left-0 -bottom-6 text-xs px-2 py-1 rounded ${Z[`${(_t=q(u.name))==null?void 0:_t.table}-${U.value}`].isValid?"text-green-700 bg-green-100":"text-red-700 bg-red-100"}`,children:Z[`${(vt=q(u.name))==null?void 0:vt.table}-${U.value}`].isChecking?"Checking...":Z[`${(wt=q(u.name))==null?void 0:wt.table}-${U.value}`].displayName})]}):u.name.includes("_at")&&o[u.name]?dt(o[u.name]):(u.name==="id"||u.name.endsWith("_id"))&&o[u.name]&&o[u.name].length>8?e("button",{onClick:R=>{R.stopPropagation(),gn(R,o[u.name],a,u.name)},onDoubleClick:R=>{R.preventDefault(),R.stopPropagation()},class:"text-blue-600 hover:text-blue-800 cursor-pointer underline decoration-dotted relative",title:"Click to copy • Cmd+Click to jump to record",children:[nr(o[u.name]),V===`${a}-${u.name}`&&e("span",{class:"absolute -top-8 left-0 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap",children:"Copied!"})]}):o[u.name]||"-"},u.name)}),e("td",{class:"px-3 py-2 whitespace-nowrap text-right text-sm font-medium",children:((h=t.find(u=>u.name===r))==null?void 0:h.type)==="user"&&e("div",{class:"flex space-x-2",children:[e("button",{onClick:()=>{const u=i.find(b=>b.id===o.id);u&&ce({id:o.id,data:{...u}})},class:"text-indigo-600 hover:text-indigo-900",children:"Edit"}),e("button",{onClick:()=>un(o.id),class:"text-red-600 hover:text-red-900",children:"Delete"})]})})]},o.id||a)})})]})})]})}):e("div",{class:"bg-white shadow rounded-lg",children:e("div",{class:"px-4 py-5 sm:p-6 text-center",children:[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e("h3",{class:"mt-2 text-sm font-medium text-gray-900",children:"No table selected"}),e("p",{class:"mt-1 text-sm text-gray-500",children:"Select a table from the list to view its data"})]})})})]}),ln&&e(tr,{onClose:()=>lt(!1),onRestore:()=>{Le(),r&&(ge(),ie())}})]})}function ir(){return e("div",{children:[e("h2",{class:"text-2xl font-bold text-gray-900 mb-6",children:"Storage"}),e("p",{class:"text-gray-600",children:"R2 storage management coming soon..."})]})}function ar(){return e("div",{children:[e("h2",{class:"text-2xl font-bold text-gray-900 mb-6",children:"Authentication"}),e("p",{class:"text-gray-600",children:"OAuth provider configuration coming soon..."})]})}function lr(){return e("div",{children:[e("h2",{class:"text-2xl font-bold text-gray-900 mb-6",children:"Settings"}),e("p",{class:"text-gray-600",children:"Project settings coming soon..."})]})}function cr(){return e(Yn,{children:e(rn,{children:[e(we,{path:"/",component:er}),e(we,{path:"/database",component:sr}),e(we,{path:"/storage",component:ir}),e(we,{path:"/auth",component:ar}),e(we,{path:"/settings",component:lr})]})})}Ln(e(cr,{}),document.getElementById("app"));
//# sourceMappingURL=index-aoXy9Slh.js.map
